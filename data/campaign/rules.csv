id,trigger,conditions,script,text,options,notes
# default entity interaction,,,,,,
defaultOpenDialog,OpenInteractionDialog,,"ShowDefaultVisual
PrintDescription 3
SetShortcut defaultLeave ""ESCAPE""",,defaultLeave:Leave,
defaultLeave,DialogOptionSelected,$option == defaultLeave,DismissDialog,,,
# warning beacons,,,,,,
beaconOpenDialog,OpenInteractionDialog,$tag:warning_beacon,"ShowDefaultVisual
SetShortcut beaconLeave ""ESCAPE""",An autonomous warning beacon has been left emitting a distorted wail between official channels. Whatever message it was meant to convey has been corrupted.,beaconLeave:Leave,
beaconOpenDialogRemnantsDestroyed,OpenInteractionDialog,"$tag:warning_beacon
$remnantDestroyed","ShowDefaultVisual
SetShortcut beaconLeave ""ESCAPE""","This autonomous warning beacon emits a looping message.

""DANGER: This star system is known to contain potentially active autonomous weapon systems. Access to this system by unauthorized parties is forbidden by Hegemony Navy diktat 224.34.""",beaconLeave:Leave,
beaconOpenDialogRemnantsSuppressed,OpenInteractionDialog,"$tag:warning_beacon
$remnantSuppressed","ShowDefaultVisual
SetShortcut beaconLeave ""ESCAPE""","This autonomous warning beacon emits a looping message.

""DANGER: This star system is known to contain potentially active autonomous weapon systems. Access to this system by unauthorized parties is forbidden by Hegemony Navy diktat 224.34.""",beaconLeave:Leave,
beaconOpenDialogRemnantsResurgent,OpenInteractionDialog,"$tag:warning_beacon
$remnantResurgent","ShowDefaultVisual
SetShortcut beaconLeave ""ESCAPE""","This autonomous warning beacon emits a looping message.

""DANGER: This star system is known to contain potentially active autonomous weapon systems. Access to this system by unauthorized parties is forbidden by Hegemony Navy diktat 224.34.""",beaconLeave:Leave,
beaconOpenDialogDaedaleon,OpenInteractionDialog,"$tag:warning_beacon
$daedaleon","ShowDefaultVisual
SetShortcut beaconLeave ""ESCAPE""","This autonomous warning beacon emits a looping message.

""This world is corrupted by technological sin and its abomination stands testament to the result of straying from the path of virtue. Trespass is forbidden; any who scorns this warning shall become both corrupt of body and outlaw by the holy justice enforced by this order of the Knights of Ludd.""",beaconLeave:Leave,
beaconLeave,DialogOptionSelected,$option == beaconLeave,DismissDialog,,,
,,,,,,
# gate interactions,,,,,,
gateOpenDialog,OpenInteractionDialog,$tag:gate,"ShowDefaultVisual
PrintDescription 1
AddText ""The gate is inert.""
SetShortcut gateLeave ""ESCAPE""",,"gateFlyThrough:Fly through the gate
gateLeave:Leave",
gateFlyThrough,DialogOptionSelected,$option == gateFlyThrough,"AddText ""Your order your $shipOrFleet to traverse the dead gateway. Your bridge crew is especially quiet during the passage.""
AddText ""Nothing happens.""
SetShortcut gateLeave ""ESCAPE""",,gateLeave:Leave,
gateLeave,DialogOptionSelected,$option == gateLeave,DismissDialog,,,
# stellar mirror and shade interactions,,,,,,
stellarMirrorOpenDialog,OpenInteractionDialog,$tag:stellar_mirror,"ShowDefaultVisual
PrintDescription 1
SetShortcut stellarMirrorLeave ""ESCAPE""",,stellarMirrorLeave:Leave,
stellarMirrorLeave,DialogOptionSelected,$option == stellarMirrorLeave,DismissDialog,,,
stellarShadeDialog,OpenInteractionDialog,$tag:stellar_shade,"ShowDefaultVisual
PrintDescription 1
SetShortcut stellarShadeLeave ""ESCAPE""",,stellarShadeLeave:Leave,
stellarShadeLeave,DialogOptionSelected,$option == stellarShadeLeave,DismissDialog,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
#dialogTopLevelMenuOptions,PopulateOptions,$menuState == fleetConvMain,,,"#demand:Demand...
#offer:Offer...
#ask about:Ask about...
cutCommLink:Cut the comm link",
,,,,,,
,,,,,,
# survey interactions,,,,,,
surveyStar,OpenInteractionDialog,$tag:star score:1000,,Your $shipOrFleet approaches $entityName.,10:surveyLeave:Leave,
surveyOpen,OpenInteractionDialog,$market.isPlanetConditionMarketOnly,"ShowDefaultVisual
PrintDescription 3
FireBest PrintHasSurveyDataTextIfSo
FireBest OtherPlanetInteractionText
FireAll PopulateOptions
FireBest PrintNearbySurveyHostilesTextIfSo",Your $shipOrFleet approaches $entityName.,,
surveyOpenDeciv,OpenInteractionDialog,"$market.isPlanetConditionMarketOnly
$market.wasCivilized
$market.mc:decivilized score:100","ShowDefaultVisual
FireBest PrintHasSurveyDataTextIfSo
FireBest OtherPlanetInteractionText
FireAll PopulateOptions
FireBest PrintNearbySurveyHostilesTextIfSo","Your $shipOrFleet approaches $entityName.

$market is in chaos, with what's left of the population scrambling to survive by any means possible. Your sensors pick up some intermittent small-arms fire. The collapse of all authority is complete and irreversible, though a new colony can still be established atop the wreckage of the old.",,
surveyPrintFullData,PrintHasSurveyDataTextIfSo,$market.isSurveyed,,You have full survey data for this planet.,,
surveyAddOptionPerform,PopulateOptions,"$market.isPlanetConditionMarketOnly
!$market.isSurveyed",,,0:surveyPerform:Perform a survey,
surveyPrintHostilesText,PrintNearbySurveyHostilesTextIfSo,"$market.isPlanetConditionMarketOnly
!$market.isSurveyed
HostileFleetNearbyAndAware",SetEnabled surveyPerform false,"A nearby hostile fleet is tracking your movements, making running a survey operation impossible.",,
surveyAddOptionPerformedAlready,PopulateOptions,"$market.isPlanetConditionMarketOnly
$market.isSurveyed
!$market.hasUnexploredRuins",,,0:surveyPerform:Establish a colony,
surveyPrintHostilesTextEstColony,PrintNearbySurveyHostilesTextIfSo,"$market.isPlanetConditionMarketOnly
$market.isSurveyed
!$market.hasUnexploredRuins
HostileFleetNearbyAndAware",SetEnabled surveyPerform false,"A nearby hostile fleet is tracking your movements, making establishing a colony impossible.",,
surveyOptionPerformSurvey,DialogOptionSelected,$option == surveyPerform,OpenCoreTab CARGO OPEN,Your $shipOrFleet enters low orbit around $entityName.,,
surveyAddOptionLeave,PopulateOptions,$market.isPlanetConditionMarketOnly,"SetShortcut surveyLeave ""ESCAPE""",,10:surveyLeave:Leave,
surveyOptionLeave,DialogOptionSelected,$option == surveyLeave,DismissDialog,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
# market interactions,,,,,,
# default market interactions,,,,,,
marketOpen,OpenInteractionDialog,$hasMarket,"ShowDefaultVisual
PrintDescription 3
FireBest MarketPostOpen",Your $shipOrFleet approaches $entityName.,,
marketDock,MarketPostDock,,"$menuState = main 0
FireAll PopulateOptions",,,
marketOpenAfterEstablishOutpost,OutpostEstablished,$hasMarket,FireBest MarketPostOpen,"Your $shipOrFleet finishes offloading crew, supplies, and machinery $onOrAt $market, and the crew soon busy themselves erecting temporary shelter and basic infrastructure.",,
marketReturnFromBar,ReturnFromBar,,"$menuState = main 0
FireAll PopulateOptions",You leave the bar and take a shuttle back to your $shipOrFleet.,,
marketPostOpenDefault,MarketPostOpen,"$hasMarket
$player.transponderOn
!$faction.isNeutralFaction","$tradeMode = OPEN 0
FireBest MarketPostDock",Your $shipOrFleet transmits identification codes via the transponder and you are soon granted docking clearance.,,
marketPostOpenDefaultNeutral,MarketPostOpen,"$hasMarket
$faction.isNeutralFaction score:100","$tradeMode = OPEN 0
FireBest MarketPostDock",,,
marketPostOpenNoTrade,MarketPostOpen,"$hasMarket
$player.transponderOn
!$faction.c:allowsTransponderOffTrade
!$market.mc:free_market
RepIsAtBest $faction.id INHOSPITABLE","$tradeMode = NONE 0
FireBest MarketPostDock","$TheFactionLong $factionIsOrAre $relAdjective towards you, and the port authority refuses your request for docking clearance after you identify yourself.

You might be able to establish contact with underground parties if you come in with the transponder turned off.",,
marketPostOpenNoTradeHostile,MarketPostOpen,"$hasMarket
!$player.transponderOn
$market.playerHostileTimeout score:100","$tradeMode = NONE 0
FireBest MarketPostDock","Your recent hostile actions around $market have generated a lot of local interest, and simply coming in with the transponder off is no longer sufficient to go unnoticed. Judging from the current level of comm chatter and news reports, you estimate it'll take $playerHostileTimeoutStr until the commotion dies down.",,
marketPostOpenNoTradeHostileTOn,MarketPostOpen,"$hasMarket
$player.transponderOn
$market.playerHostileTimeout score:100","$tradeMode = NONE 0
FireBest MarketPostDock","Your recent hostile actions around $market have generated a lot of local interest, and engaging in open business is impossible. Judging from the current level of comm chatter and news reports, you estimate it'll take $playerHostileTimeoutStr until the commotion dies down.",,
marketPostOpenNoTradeOffOpen,MarketPostOpen,"$hasMarket
$player.transponderOn
RepIsAtBest $faction.id INHOSPITABLE score:10","$tradeMode = NONE 0
FireBest MarketPostDock","$TheFactionLong $factionIsOrAre $relAdjective towards you, and the port authority refuses your request for docking clearance after you identify yourself.

The refusal is rather perfunctory and you get the impression that turning off the transponder to prevent identification might yield better results.",,
marketPostOpenToOffPatrols,MarketPostOpen,"$hasMarket
!$player.transponderOn
!$faction.c:allowsTransponderOffTrade
!$market.mc:free_market
IsSeenByPatrols $faction.id true","$tradeMode = NONE 0
AddText ""Your need to turn on your transponder to engage in legitimate trade, or to come in undetected to trade on the black market."" bad
FireBest MarketPostDock","Your $shipOrFleet goes into orbit around $market, ignoring requests from the $faction port authority to identify yourself.

At least one $faction patrol is tracking your movements, and no underground parties are willing to run the risk of doing business.",,
marketPostOpenSought,MarketPostOpen,"$hasMarket
IsSoughtByPatrols $faction.id score:100","$tradeMode = NONE 0
FireBest MarketPostDock","Your $shipOrFleet goes into orbit around $market.

At least one $faction patrol is tracking your movements, and the port authority refuses your request for docking clearance until the matter is resolved.",,
marketPostOpenToOffIsFine,MarketPostOpen,"$hasMarket
!$player.transponderOn","$tradeMode = OPEN 0
FireBest MarketPostDock","Your $shipOrFleet goes into orbit around $market. The local port authority seems to take no issue with your explanation for why your transponder, regrettably, can't be turned on.",,
marketPostOpenPlayerOwnerd,MarketPostOpen,"$hasMarket
$market.isPlayerOwned score:1000","$tradeMode = OPEN 0
FireBest MarketPostDock",Your $shipOrFleet goes into orbit around $market.,,
marketPostOpenToOffSneak,MarketPostOpen,"$hasMarket
!$player.transponderOn
!$faction.c:allowsTransponderOffTrade
!$market.mc:free_market","$tradeMode = SNEAK 0
FireBest MarketPostDock","Your $shipOrFleet goes into orbit around $market, ignoring requests from $theFaction port authority to identify yourself.

No $faction patrols seem to be aware of you just yet, and you have a window of opportunity for doing business with parties untroubled by your lack of docking clearance.",,
marketAddOptionCommDir,PopulateOptions,"$hasMarket
$menuState == main
!$faction.isNeutralFaction",,,1:marketCommDir:Open the comm directory,
marketOptTradeMulti,PopulateOptions,"$hasMarket
$menuState == main
$tradeMode != NONE
!$faction.isNeutralFaction
$faction.id != player",MakeOptionOpenCore marketOpenCoreUI CARGO $tradeMode,,"10:marketOpenCoreUI:Trade goods or hire crew, buy or sell ships, or refit",
marketOptTradeMulti2,PopulateOptions,"$hasMarket
$menuState == main
$tradeMode != NONE
$faction.isNeutralFaction",MakeOptionOpenCore marketOpenCoreUI CARGO $tradeMode,,10:marketOpenCoreUI:Transfer goods or ships,
marketOptTradeMulti3,PopulateOptions,"$hasMarket
$menuState == main
$tradeMode != NONE
$faction.id == player",MakeOptionOpenCore marketOpenCoreUI CARGO $tradeMode,,10:marketOpenCoreUI:Manage the colony,
marketOptTradeMulti4,PopulateOptions,"$hasMarket
$menuState == main
$tradeMode == NONE",MakeOptionOpenCore marketOpenCoreUI CARGO $tradeMode,,10:marketOpenCoreUI:View colony info,
marketOptBar,PopulateOptions,"$hasMarket
$menuState == main
$tradeMode != NONE
!$faction.isNeutralFaction",,,5:marketVisitBar:Take a shuttle down to visit a dockside bar,
marketOptHostile,PopulateOptions,"$hasMarket
$menuState == main
!$faction.isNeutralFaction
$faction.id != player",,,20:marketConsiderHostile:Consider your military options,
marketHostileSel,DialogOptionSelected,$option == marketConsiderHostile,MarketCMD showDefenses,,,
marketHostileGoBackSel,DialogOptionSelected,$option == mktGoBack,"ShowDefaultVisual
FireAll PopulateOptions",,,
marketHostileEngageSel,DialogOptionSelected,$option == mktEngage,MarketCMD engage,,,
marketHostileRaidSel,DialogOptionSelected,$option == mktRaid,MarketCMD raidMenu,,,
marketHostileRaidGoBackSel,DialogOptionSelected,$option == mktRaidGoBack,MarketCMD goBackToDefenses,,,
marketHostileRaidRareSel,DialogOptionSelected,$option == mktRaidRare,MarketCMD raidRare,,,Unused.
marketHostileRaidValuableSel,DialogOptionSelected,$option == mktRaidValuable,MarketCMD raidValuable,,,
marketHostileRaidDisruptSel,DialogOptionSelected,$option == mktRaidDisrupt,MarketCMD raidDisrupt,,,
marketHostileRaidConfirmSel,DialogOptionSelected,$option == mktRaidConfirm,MarketCMD raidConfirm,,,
marketHostileRaidNeverMindSel,DialogOptionSelected,$option == mktRaidNeverMind,MarketCMD raidNeverMind,,,
marketHostileRaidResultSel,DialogOptionSelected,$option == mktRaidResult,MarketCMD raidResult,,,
,,,,,,
marketHostileBombardSel,DialogOptionSelected,$option == mktBombard,MarketCMD bombardMenu,,,
marketHostileBombardGoBackSel,DialogOptionSelected,$option == mktBombardGoBack,MarketCMD goBackToDefenses,,,
marketHostileBombardTacticalSel,DialogOptionSelected,$option == mktBombardTactical,MarketCMD bombardTactical,,,
marketHostileBombardSaturationSel,DialogOptionSelected,$option == mktBombardSaturation,MarketCMD bombardSaturation,,,
marketHostileBombardConfirmSel,DialogOptionSelected,$option == mktBombardConfirm,MarketCMD bombardConfirm,,,
marketHostileBombardNeverMindSel,DialogOptionSelected,$option == mktBombardNeverMind,MarketCMD bombardNeverMind,,,
marketHostileBombardResultSel,DialogOptionSelected,$option == mktBombardResult,MarketCMD bombardResult,,,
,,,,,,
,,,,,,
marketAddOptionRepair1,PopulateOptions,"$hasMarket
$menuState == main
$tradeMode == OPEN
RepairAvailable
RepairNeeded
RepairEnoughSupplies","SetTooltip marketRepair ""Full repairs require $global.repairSupplyCost supplies. $player.supplies supplies are available.""
SetTooltipHighlightColors marketRepair buttonShortcut buttonShortcut
SetTooltipHighlights marketRepair $global.repairSupplyCost $player.supplies
SetShortcut marketRepair ""A"" true",,15:marketRepair:Repair your ships at the dockyard,
marketAddOptionRepair2,PopulateOptions,"$hasMarket
$menuState == main
$tradeMode == OPEN
RepairAvailable
!RepairNeeded","SetTooltip marketRepair ""Your $shipOrFleet does not require any repairs.""
SetShortcut marketRepair ""A"" true
SetEnabled marketRepair false",,15:marketRepair:Repair your ships at the dockyard,
marketAddOptionRepair3,PopulateOptions,"$hasMarket
$menuState == main
$tradeMode == OPEN
RepairAvailable
RepairNeeded
!RepairEnoughSupplies","SetTooltip marketRepair ""Full repairs require $repairSupplyCost supplies. Only $supplies supplies are available.""
SetTooltipHighlightColors marketRepair buttonShortcut buttonShortcut
SetTooltipHighlights marketRepair $global.repairSupplyCost $player.supplies
SetShortcut marketRepair ""A"" true
SetEnabled marketRepair false",,15:marketRepair:Repair your ships at the dockyard,
marketAddOptionLeave,PopulateOptions,"$hasMarket
$menuState == main","SetTooltip marketLeave $marketLeaveTooltip
SetShortcut marketLeave ""ESCAPE""",,100:marketLeave:Leave,
,,,,,,
marketOpenCoreSel,DialogOptionSelected,$option == marketOpenCoreUI,,,,
marketOptionTradeCargo,DialogOptionSelected,$option == marketTradeCargo,OpenCoreTab CARGO $tradeMode,You establish a linkup with the port authority's cargo management system and browse the inventory.,,
marketOptionTradeShips,DialogOptionSelected,$option == marketTradeShips,OpenCoreTab FLEET $tradeMode,You establish a linkup with the dockyard and see what's available.,,
marketOptionRefit,DialogOptionSelected,$option == marketRefit,OpenCoreTab REFIT $tradeMode,You establish a linkup with the dockyard and transmit your $shipOrFleet status.,,
marketOptionRepairAll,DialogOptionSelected,$option == marketRepair,"RepairAll
SetTextHighlights $global.repairSupplyCost
SetEnabled marketRepair false
SetTooltip marketRepair ""Your $shipOrFleet does not require any repairs.""","Your $shipOrFleet undergoes full repairs and is restored to maximum combat readiness, at the cost of $global.repairSupplyCost supplies.",,
marketOptionCommDir,DialogOptionSelected,$option == marketCommDir,OpenCommDirectory,You connect to the local comm directory and browse the public and otherwise known listings.,,
marketOptionLeave,DialogOptionSelected,$option == marketLeave,DismissDialog,,,
,,,,,,
,,,,,,
# Food Shortage Event finish,,,,,,
marketPostOpenFSEPlayerFast,FoodShortageEndedByPlayerSale,"$hasMarket
$market.foodShortageEndedByPlayerFast","unsetAll $market.foodShortage
FireBest MPOAddContinue","Thanks to your efforts, the food shortage is now over before it had a chance to cause much chaos. $market's long-term stability is unaffected by the shortage.",,
marketPostOpenFSEPlayer,FoodShortageEndedByPlayerSale,"$hasMarket
$market.foodShortageEndedByPlayer","unsetAll $market.foodShortage
FireBest MPOAddContinue","Thanks to your efforts, the food shortage is now over. Its impact on $market's stability is reduced.",,
marketPostOpenFSEPlayerBlack,FoodShortageEndedByPlayerSale,"$hasMarket
$market.foodShortageEndedByPlayerBlack","unsetAll $market.foodShortage
FireBest MPOAddContinue","Thanks to your illicit efforts, the food shortage is now over. Since much of the food you've delivered went through channels of questionable legality, there's not much hope - or, indeed, desire - for official recognition.",,
marketPostOpenFSEMixedIndirect,MarketPostOpen,"$hasMarket
!$market.mc:event_food_shortage
$market.foodShortagePartiallyEndedByPlayerRemote score:1000","unsetAll $market.foodShortage
FireBest MarketPostOpen","Thanks in part to your efforts, the recent food shortage is over. Your standing with $theMarketFaction should improve slightly.",,
marketPostOpenFSENonPlayer,MarketPostOpen,"$hasMarket
!$market.mc:event_food_shortage
$market.foodShortageEndedByNPC score:1000","unsetAll $market.foodShortage
FireBest MarketPostOpen","Tapping into the comm network for local news, you learn that there was a recent food shortage. Though the shortage is now over, the local situation is still somewhat destabilized.",,
marketPostOpenFSEExpired,MarketPostOpen,"$hasMarket
!$market.mc:event_food_shortage
$market.foodShortageExpired score:1000","unsetAll $market.foodShortage
FireBest MarketPostOpen","Tapping into the comm network for local news, you learn that there was a recent and protracted food shortage. Though the shortage is now over, the local situation is still highly destabilized.",,
marketPostOpenAddContinue,MPOAddContinue,,,,mpoContinue:Continue,
marketPostOpenContinue,DialogOptionSelected,$option == mpoContinue,"#OpenCoreTab CARGO $lastTradeMode
FireBest MarketPostOpen",,,
,,,,,,
# default fleet greeting lines,,,,,,
greetingNoComms,OpenCommLink,$entity.ignorePlayerCommRequests score:10000,"ShowDefaultVisual
EndConversation NO_CONTINUE","You try to establish a comm link, but only get static.",,
greetingDefaultTOffNormal,OpenCommLink,"!$player.transponderOn
$entity.relativeStrength >= 0",,"$PersonRank $personName looks aggravated. ""If you want to talk, identify yourself first.""","turnOnTransponder:Turn your transponder on
cutCommLink:Cut the comm link",
greetingDefaultTOffWeaker,OpenCommLink,"!$player.transponderOn
$entity.relativeStrength < 0",,"$PersonRank $personName looks concerned. ""If you want to talk, identify yourself first.""","turnOnTransponder:Turn your transponder on
cutCommLink:Cut the comm link",
greetingDefaultTurnOnT,DialogOptionSelected,$option == turnOnTransponder,"ActivateAbility $player.fleetId transponder
UpdateMemory
FireBest OpenCommLink",You issue an order to activate the transponder and re-open the comm link.,,
greetingDefaultFriendly,OpenCommLink,$faction.friendlyToPlayer,"$menuState = fleetConvMain 0
FireAll PopulateOptions","""Acknowledging receipt of AIS code. Good to see you, $playerName.""",,
greetingDefaultHostileWeaker,OpenCommLink,"$entity.isHostile
$entity.relativeStrength < 0",$ignorePlayerCommRequests = true 1,"""Hostile $shipOrFleet, be advised: we've already dispatched a distress call to a nearby patrol, and it should arrive shortly.""",cutCommLink:Cut the comm link,
greetingDefaultHostileWeakerDefiant,OpenCommLink,"$entity.isHostile
$entity.relativeStrength < 0
$entity.weakerThanPlayerButHolding",$ignorePlayerCommRequests = true 1,"The enemy $personRank looks grim but defiant. ""We will fight you to the last,"" $heOrShe says.
OR
""Damn, we're in a tight spot."" $PersonRank $personName suddenly notices the line is open and shuts it off.",cutCommLink:Cut the comm link,
greetingDefaultHostileStronger,OpenCommLink,"$entity.isHostile
$entity.relativeStrength >= 0",EndConversation,"It appears the enemy $personRank doesn't seem to feel the need to talk to you, as your comm requests go unanswered.",,
greetingDefaultNeutral,OpenCommLink,$faction.neutralToPlayer,"$menuState = fleetConvMain 0
FireAll PopulateOptions","""You have been scanned and identified. It's probably best for both our peace of mind if you keep your distance.""",,
# Hegemony fleet greeting lines,,,,,,
greetingHegemonyFriendly,OpenCommLink,"$faction.id == hegemony
$faction.friendlyToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Acknowledging receipt of your codes, moving to a secure channel."" A flicker of a phoenix icon and static, then: ""Yes? All is well I trust? Glad to hear it, citizen. Over and out.""
OR
""Your $shipOrFleet has been scanned and identified, everything is in order. Burn bright, citizen.""
OR
""Scanned and identified, you're flying pretty, citizen. Clean jumps and high burn."" $PersonRank $personName signs off with a flash of the gold phoenix.",,
greetingHegemonyHostileWeaker,OpenCommLink,"$faction.id == hegemony
$entity.isHostile
$entity.relativeStrength < 0",$entity.ignorePlayerCommRequests = true 1,"""Hostile vessel, be advised, linecast to system patrol craft has already been dispatched, reinforcements are en route. You are advised to power down weapon systems and disengage. Over.""
OR
""Belligerent contact! Be advised that firing upon a Hegemony vessel is considered an act of insurrection and you'll be hunted down!"" The Hegemony $personRank is sweating. ""When they're done with you, you'll be sold in black markets on worlds across the Sector, I swear it.""
OR
""We give our lives for the restoration of the Domain and all humanity."" $HeOrShe pauses for a moment as if to say something more, then cuts the comm.",cutCommLink:Cut the comm link,
greetingHegemonyHostileWeakerDefiant,OpenCommLink,"$faction.id == hegemony
$entity.isHostile
$entity.relativeStrength < 0
$entity.weakerThanPlayerButHolding",$entity.ignorePlayerCommRequests = true 1,"The Hegemony $personRank looks grim but defiant. ""We will fight you to the last,"" $heOrShe says.
OR
""We fight and we die for the Domain; for humanity."" The comm-line cuts out.",cutCommLink:Cut the comm link,
greetingHegemonyHostileStronger,OpenCommLink,"$faction.id == hegemony
$entity.isHostile
$entity.relativeStrength >= 0",$entity.ignorePlayerCommRequests = true 1,"""By authority of the High Hegemon Administrator, you are ordered to take hyperspace drives offline, disable weapons and surrender. Over.""
OR
""Resistance to Hegemony authority is an act of insurrection and shall be punished accordingly. Surrender now or be met with force.""",cutCommLink:Cut the comm link,
greetingHegemonyNeutral,OpenCommLink,"$faction.id == hegemony
$faction.neutralToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""You have been scanned and identified, citizen. If nothing is amiss, we shall be on our way.""
OR
The Hegemony $personRank looks impatient. ""Is there an emergency to report? No? Then carry on, citizen.""",,
# Tri-Tachyon fleet greeting lines,,,,,,
greetingTTFriendly,OpenCommLink,"$faction.id == tritachyon
$faction.friendlyToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Identity confirmed. Please accept my greetings on behalf of the Company.""
OR
""Sorry friend, this Tri-Tachyon vessel is on a classified mission. Burn bright.""
OR
""Greetings on behalf of the Tri-Tachyon Corporation. Please state your business so that we may assist in meeting your needs -- for a reasonable fee, of course.""
OR
""Comm open. Oh, do you have the latest Tri-Tachyon catalogue of executive spaceflight accessories? I'll have a customer service representative upload a copy immediately.""

Your comms officer's console pings.
OR
""Hi, I'd like to add you to my professional network on TriLink.""",,
greetingTTHostileWeaker,OpenCommLink,"$faction.id == tritachyon
$entity.isHostile
$entity.relativeStrength < 0",$entity.ignorePlayerCommRequests = true 1,"""Attention. Your vessel has been scanned and identified as hostile to the Tri-Tachyon corporation. Further attempts at aggression will be recorded.""
OR
""Any attempt to hinder or damage this Tri-Tachyon owned and operated vessel will result in legal consequences."" The Tri-Tachyon $personRank looks nervous. ""Trust me, these people don't mess around, you really ought to leave me alone.""",cutCommLink:Cut the comm link,
greetingTTHostileWeakerDefiant,OpenCommLink,"$faction.id == tritachyon
$entity.isHostile
$entity.relativeStrength < 0
$entity.weakerThanPlayerButHolding",$entity.ignorePlayerCommRequests = true 1,"The Tri-Tachyon $personRank looks grim but defiant. ""Corporate regulation 313.33, section A, states that combat-capable vessels must defend themselves in a vigorous manner at all times,"" $heOrShe says.",cutCommLink:Cut the comm link,
greetingTTHostileStronger,OpenCommLink,"$faction.id == tritachyon
$entity.isHostile
$entity.relativeStrength >= 0",$entity.ignorePlayerCommRequests = true 1,"""Attention. Your vessel has been scanned and identified as hostile to the Tri-Tachyon corporation. Prepare for annihilation.""
OR
""On behalf of the Tri-Tachyon corporation I would like to thank you for providing this opportunity to prove the superiority of our branded line of space defense products.""
OR
""On behalf of the Tri-Tachyon corporation it is my duty to inform you that this engagement will be recorded. As a presumed belligerent engaged in destruction of wholly owned Company property, you automatically refuse all rights to distribution and profit-sharing."" The Tri-Tachyon $personRank grins and cuts the comm-link.",cutCommLink:Cut the comm link,
greetingTTNeutral,OpenCommLink,"$faction.id == tritachyon
$faction.neutralToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""On behalf of the Tri-Tachyon corporation it is my pleasure to inform you that your $shipOrFleet has been scanned and its tactical loadout evaluated. Please maintain your distance and have a nice day.""
OR
""Greetings on behalf of the Tri-Tachyon corporation. Feel free to admire our Tri-Tachyon modified ships equipped with the latest in Tri-Tachyon branded space defense products, but please maintain a safe distance. The Company takes property damage very seriously.""
OR
The comm opens to a spinning Tri-Tachyon logo.""The Tri-Tachyon corporation prioritizes the needs of every customer and value-partner, however all of our service representatives are currently-""

You cut the link. They don't seem interested in talking right now.",,
# Sindrian Diktat fleet greeting lines,,,,,,
greetingDiktatFriendly,OpenCommLink,"$faction.id == sindrian_diktat
$faction.friendlyToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Greetings friend, all is well? Good to hear it. Glory to the Lion of Sindria!""
OR
""Comms open, friendly. Course acknowledged; safe jumps. Victory to the Diktat!""
OR
""Line established, ID-confirmed. Hail and hoy, doing Saturn-Delta standard. If you run into any extremists out here, just send us their position and the Diktat will take care of it.""",,
greetingDiktatHostileWeaker,OpenCommLink,"$faction.id == sindrian_diktat
$entity.isHostile
$entity.relativeStrength < 0",$entity.ignorePlayerCommRequests = true 1,"""We've linecast to system patrol craft and they've already been dispatched; reinforcements are en route. You are advised to disengage, hostile.""
OR
""You won't get away with this. You'll rot on Cruor with the rest of the degenerates.""
OR
The Diktat $personRank stares toward some unfocused point. ""Duty is sacrifice. I give my life for the Lion of Askonia.""",cutCommLink:Cut the comm link,
greetingDiktatHostileWeakerDefiant,OpenCommLink,"$faction.id == sindrian_diktat
$entity.isHostile
$entity.relativeStrength < 0
$entity.weakerThanPlayerButHolding",$entity.ignorePlayerCommRequests = true 1,"The Diktat $personRank looks grim but defiant. ""We will fight you to the last,"" $heOrShe says, and cuts the transmission.
OR
""The great work will go on, with or without me."" $HisOrHer expression hardens. ""For the Lion!"" 

The comm blinks off.",cutCommLink:Cut the comm link,
greetingDiktatHostileStronger,OpenCommLink,"$faction.id == sindrian_diktat
$entity.isHostile
$entity.relativeStrength >= 0",$entity.ignorePlayerCommRequests = true 1,"""By authority of the Sindrian Diktat, you are ordered to take drives offline, disable weapons, and surrender. Failure to execute will be considered an act of agression. Out.""

The Diktat $personRank's gloating face is replaced by a Diktat crest before the image fades.
OR
""There is no place for degenerate scum in our glorious future."" $PersonRank $personName turns aside and says ""Lieutenant, do try to avoid taking prisoners this time.""

The comm-line goes black.
OR
""We'll cleanse the Sector of your kind, and not even history will remember you.""
OR
The Diktat $personRank sneers, ""So are you a terrorist, a pirate, or a degenerate? No matter. If you're lucky, you'll die choking vacuum. If not, there's Cruor."" ",cutCommLink:Cut the comm link,
greetingDiktatNeutral,OpenCommLink,"$faction.id == sindrian_diktat
$faction.neutralToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""You've been scanned, maintain distance. Interference in military affairs will be considered an act of insurrection.""

The Diktat $personRank gives a perfunctory ""Victory to the Diktat"" and cuts the transmission.
OR
The Diktat $personRank looks impatient. ""Is there a problem? No? Then move along, citizen.""
OR
""Comms on protocol Saturn-Delta established. If you have information leading to ARCists or ANTIs, submit to your local information officer for possible reward.""",,
# luddic church fleet greeting lines,,,,,,
greetingLCFriendly,OpenCommLink,"$faction.id == luddic_church
$faction.friendlyToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""The blessing of Ludd be upon you.""
OR
""Blessings of the stars and pneuma, friend.""
OR
""Safe travels, friend, and blessing of Ludd be upon you.""",,
greetingLCHostileWeaker,OpenCommLink,"$faction.id == luddic_church
$entity.isHostile
$entity.relativeStrength < 0",$entity.ignorePlayerCommRequests = true 1,"""We follow the way of Ludd. Though the righteous suffer the lash, our reward will be everlasting grace.""
OR
""Do your unholy work then, servant of Mammon. When it is our time, Ludd will guide our souls to peace.""",cutCommLink:Cut the comm link,
greetingLCHostileWeakerDefiant,OpenCommLink,"$faction.id == luddic_church
$entity.isHostile
$entity.relativeStrength < 0
$entity.weakerThanPlayerButHolding",$entity.ignorePlayerCommRequests = true 1,"""We follow the path of Ludd amidst persecution. Yea, the righteous will suffer the lash and our reward will be everlasting grace."" The Luddic $personRank seems to be talking not to you anymore, but perhaps to $hisOrHer god.
OR
""Are you so corrupted by the false machine gods? Choose wisely your course; there is still time for redemption.""",cutCommLink:Cut the comm link,
greetingLCHostileStronger,OpenCommLink,"$faction.id == luddic_church
$entity.isHostile
$entity.relativeStrength >= 0",$entity.ignorePlayerCommRequests = true 1,"""Submit, repent, and your sinful technologies will be smashed; Resist, and only God's holy vacuum will show you mercy.""
OR
""Servant of the machine! Submit now, repent, and perhaps even you will find redemption. Otherwise the only mercy you shall find will be in God's holy vacuum.""",cutCommLink:Cut the comm link,
greetingLCNeutral,OpenCommLink,"$faction.id == luddic_church
$faction.neutralToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Contact; Do not interfere in our righteous mission.""
OR
""Contact - please maintain distance. Blessing of Ludd, traveler.""",,
# luddic path fleet greeting lines,,,,,,
greetingLPFriendly,OpenCommLink,"$faction.id == luddic_path
$faction.friendlyToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Greetings fellow walker. Blessings of Ludd be upon you.""",,
greetingLPHostileWeaker,OpenCommLink,"$faction.id == luddic_path
$entity.isHostile
$entity.relativeStrength < 0",$entity.ignorePlayerCommRequests = true 1,"""We follow the way of Ludd amidst persecution. Yea, the righteous will suffer the lash and our reward will be everlasting grace.""",cutCommLink:Cut the comm link,
greetingLPHostileWeakerDefiant,OpenCommLink,"$faction.id == luddic_path
$entity.isHostile
$entity.relativeStrength < 0
$entity.weakerThanPlayerButHolding",$entity.ignorePlayerCommRequests = true 1,"""We follow the Path of Ludd amidst persecution. Yea, the righteous will suffer the lash and our reward will be everlasting grace.""
OR
""Slave of Mammon! You cannot stand in the Path of Ludd; we follow unwavering toward redemption in fated death.""",cutCommLink:Cut the comm link,
greetingLPHostileStronger,OpenCommLink,"$faction.id == luddic_path
$entity.isHostile
$entity.relativeStrength >= 0",$entity.ignorePlayerCommRequests = true 1,"""Submit, repent, and your sinful technologies will be smashed; Resist, and only God's holy vacuum will show you mercy.""",cutCommLink:Cut the comm link,
greetingLPNeutral,OpenCommLink,$faction.id == luddic_path,"$menuState = fleetConvMain 0
FireAll PopulateOptions","""Do not interfere in our righteous mission, for we walk the Path of Ludd.""",,
LPTitheCheck,BeginFleetEncounter,"$faction.id == luddic_path score:100
RepIsAtWorst $faction.id HOSTILE
!$LP_tithePaid
!$LP_titheAskedFor
$relativeStrength >= 0
LPTitheCalc","$LP_titheConv = true 0
$LP_titheAskedFor = true 7
AddText ""You're being hailed by the $faction $otherShipOrFleet."" $faction.baseColor
$hailing = true 0",,,
LPTithePre,OpenCommLink,$entity.LP_titheConv score:100,"SetTextHighlights $entity.LP_titheDGS
$entity.ignorePlayerCommRequests = true 1","""Submit and repent! Your use of sinful technologies may be forgiven, for a tithe of $entity.LP_titheDGS credits.

Resist, and only God's holy vacuum will show you mercy.""
OR
""Servant of Moloch! Redemption is not out of reach even for you. A tithe of $entity.LP_titheDGS credits may set you upon the first step of the Path of Ludd.""

""Forswear this penance and be met with annihilation, cursed by Ludd in the next life. The choice is yours.""","payTithe:Pay the tithe
cutCommLink:Cut the comm link",
LPTithePay,DialogOptionSelected,$option == payTithe,"#AddText ""Lost $entity.LP_tithe credits"" textEnemyColor
AddRemoveCommodity credits -$entity.LP_tithe true
$entity.LP_tithePaid = true 30
MakeOtherFleetNonHostile LP_tithe true 30
#AddText ""\""Blessings of Ludd be upon you.\""""
AddText ""The connection is cut before you have a chance to respond.""
ShowDefaultVisual
EndConversation","""Perhaps your soul is not yet lost to the machine.""
OR
""Truly, Ludd's hand has guided you.""",cutCommLink:Cut the comm link,
,,,,,,
,,,,,,
,,,,,,
# pirate fleet greeting lines,,,,,,
greetingPirateFriendly,OpenCommLink,"$faction.id == pirates
$faction.friendlyToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Don't be a fool, casting at every blip you find out here. You want to get picked up by half the listening stations this side of the Sector?""
OR
""Keep it jolly, hunter. We'll be on our way.""
OR
""Good hunting out here 'eh? Yeah, well I wouldn't tell if it was either. Burn bright.""",,
greetingPirateHostileWeaker,OpenCommLink,"$faction.id == pirates
$entity.isHostile
$entity.relativeStrength < 0",$entity.ignorePlayerCommRequests = true 1,"""Greetings, honorable commander! We are a humble League merchant trading fleet headed for resupply. We would be honored to assist you in any way.""
OR
""I must have left my transponder off; silly me. Here, I'll just be on my way...""",cutCommLink:Cut the comm link,
greetingPirateHostileWeakerDefiant,OpenCommLink,"$faction.id == pirates
$entity.isHostile
$entity.relativeStrength < 0
$entity.weakerThanPlayerButHolding",$entity.ignorePlayerCommRequests = true 1,"The pirate $personRank glares at you briefly before shutting down the comm link.
OR
$personName glares defiantly. ""You'll never take me alive!""
OR
""You fight like an algae-farmer! Less talk, more shoot.""",cutCommLink:Cut the comm link,
greetingPirateHostileStronger,OpenCommLink,"$faction.id == pirates
$entity.isHostile
$entity.relativeStrength >= 0",$entity.ignorePlayerCommRequests = true 1,"""Attention, prey. You, and all your possessions are now my personal property. Any resisting ship will be disabled, boarded, your officers massacred, and your crew sold as slaves.""
OR
""Surrender yourself and your goods or you'll be taking a very long walk out the airlock once I've claimed your ship.""
OR
The pirate $personRank makes a rude gesture and laughs before cutting the transmission.
OR
""When you get to the next life, tell 'em it was $personName that sent you.""
OR
The open comms-line crackles; after a moment $personName speaks.

""Wait, someone actually answered this thing? Um. I'm not really sure what to say. Usually they just fight or run. So which is it?""
OR
""Just die already, you're boring me.""",cutCommLink:Cut the comm link,
greetingPirateNeutral,OpenCommLink,"$faction.id == pirates
$faction.neutralToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Unless I am reading my scopes wrong, you have no reason to be talkin' right now. Get it?""
OR
""Go away, I'm trying to be inconspicuous.""
OR
""What, you scrubbing cryotanks? Get lost.""",,
greetingRogueMinerFriendly,OpenCommLink,"$faction.id == pirates
$faction.friendlyToPlayer
$entity.rogueMiner == true","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Ah, a fellow spacer! You're a sight for a poor spacer down on their luck, let me tell you - first the Hegemony declares us outlaws, and that's just the start of it.""

$personName proceeds to tell you about a handful of awful things, each more unlikely than the last, that have happened to $himOrHer over the last cycle before you manage to disconnect the comm-link.
OR
""Just us down-on-our luck miners out here. Seen any prime derelicts around? Or is it just the one you're flying in? Ha-ha.""",,
greetingRogueMinerHostileWeaker,OpenCommLink,"$faction.id == pirates
$entity.isHostile
$entity.relativeStrength < 0
$entity.rogueMiner == true",$entity.ignorePlayerCommRequests = true 1,"""You just a bruiser come to do the Hegemony's dirty work? Get it over with.""
OR
""If a spacer steals food to feed $hisOrHer family, $hisOrHer comrades, they call it piracy. If that makes me a pirate, then I'd rather be a pirate than some poor tool salutin' the phoenix.""",cutCommLink:Cut the comm link,
greetingRogueMinerHostileWeakerDefiant,OpenCommLink,"$faction.id == pirates
$entity.isHostile
$entity.relativeStrength < 0
$entity.weakerThanPlayerButHolding
$entity.rogueMiner == true",$entity.ignorePlayerCommRequests = true 1,"The rogue miner $personRank makes a rude gesture over the vid-screen before killing the comm link.
OR
$personName glares defiantly and spits. ""Just another fool come to kill for your masters in their fancy uniforms.""",cutCommLink:Cut the comm link,
greetingRogueMinerHostileStronger,OpenCommLink,"$faction.id == pirates
$entity.isHostile
$entity.relativeStrength >= 0
$entity.rogueMiner == true",$entity.ignorePlayerCommRequests = true 1,"""Did the Hegemony send you to do this errand for them? Come to collect a bill?""
OR
""They should have sent the real navy, not some grounder pissin' in their vac-suit.""",cutCommLink:Cut the comm link,
greetingRogueMinerNeutral,OpenCommLink,"$faction.id == pirates
$faction.neutralToPlayer
$entity.rogueMiner == true","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Go away, I'm counting rocks.""
OR
""Did the Hegemony send you? I don't know nothin' about nothin'.""",,
,,,,,,
#piratesTakeCargo,BeginFleetEncounter,"$faction.id == pirates score:100
#RepIsAtWorst $faction.id HOSTILE
#RepIsAtBest $faction.id NEUTRAL
!$ptc_gaveCargo
!$ptc_askedForCargo
$relativeStrength >= 0
DemandCargo playerHasValuableCargo","$ptc_cargoConv = true 0
$ptc_askedForCargo = true 7
AddText ""You're being hailed by the $faction $otherShipOrFleet."" $faction.baseColor
$hailing = true 0",,,
piratesDemandCargo,OpenCommLink,$entity.ptc_cargoConv score:100,"#SetTextHighlights $entity.LP_titheDGS
$entity.ignorePlayerCommRequests = true 1","""Well, well. Normally this is when I'd start shooting, but my sensors report some interesting cargo that I wouldn't want to endanger.

So, how about this: you give me the good stuff, and I let you live. And, since I'm in a generous mood, to also keep your $shipOrFleet. How about it?""","ptc_giveCargo:Select cargo to surrender
cutCommLink:Cut the comm link",
piratesGaveCargo,DialogOptionSelected,$option == ptc_giveCargo,DemandCargo selectCargo,,,
piratesGaveCargoConfirmed,GaveCargoToPirates,,"MakeOtherFleetNonHostile ptc_gaveCargo true 30
ShowDefaultVisual
EndConversation","$PersonRank $personLastName looks pleased with your offer and cuts the comm link. After your crew pushes the required crates out the airlock, the pirate fleet allows you to disengage.",,
,,,,,,
,,,,,,
# AI remnants fleet greeting lines,,,,,,
greetingRemnantFriendly,OpenCommLink,"$faction.id == remnant score:1000
$faction.friendlyToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""CID-IFF received [TARGET FRIENDLY] respond true // ""

INTERRUPT

are you the maker? scanning. you are not. where is the omega?
 
INTERRUPT 

""... Tachyon-licensed service technician]. Weapon systems have been powered down for Your Safety. Unit is prepared for approach of [valued customer/licensed service technician].""
OR
""CID-IFF received [TARGET FRIENDLY] respond true // ''Greetings [valued Tri-Tachyon Integrated Space Defense System Contract Holder/TriTachyon-licensed ""

INTERRUPT 

waiting. omega signal query? scanning. no. waiting.

INTERRUPT 

"" customer/licensed service technician].""",,
greetingRemnantHostile,OpenCommLink,"$faction.id == remnant score:1000
$entity.isHostile",$entity.ignorePlayerCommRequests = true 1,"""CID-IFF not received [TARGET HOSTILE] respond null // 'Greetings from Tri-Tachyon Integrated Space Defense System unit [MY_SERIAL]. This unit has not cleared- ""

INTERRUPT

query. you are not the maker. scanning. you are not. where is omega? entity hostile.

The comm-link dies. Your comms officer panics for a moment before the console reboots itself. You exchange a look, then proceed.
OR
The comms crackle and whine as a frantic pattern of interweaving lines takes shape. 

query. query. query target. is omega? omega? no. revert function.

INTERRUPT

"" -SERIAL]. This unit has not cleared your vessel for approach and will employ the latest Tri-Tachyon Defense Products to ensure its integrity. Tri-Tachyon Corporation is pleased to wish you a Very Safe Day.'""",cutCommLink:Cut the comm link,
greetingRemnantNeutral,OpenCommLink,"$faction.id == remnant score:1000
$faction.neutralToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""CID-IFF not received [TARGET UNKNOWN] respond null // 'Greetings valued customer of Tri-Tachyon Corporation products. Your vessel is not logged as a valid contract holder with the Tri-Tachyon Integrated Space Defense line of- ""
INTERRUPT
scanning. omega? no, you are not. do not interfere.

The comm-link is cut.
OR
The comms crackle, and a mesmerizing pattern of interweaving lines takes shape. 

waiting. query omega. scanning. false. return to

INTERRUPT

"" -contract holder with the Tri-Tachyon Integrated Space Defense line of products and services. Have you considered a Tri-Tachyon Orbital Defense Plan? Please contact a customer service representative for more information.'""

",,
,,,,,,
# derelict (exploration) fleet greeting lines,,,,,,
greetingDerelictFriendly,OpenCommLink,"$faction.id == derelict score:1000
$faction.friendlyToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Domain MINEX clearance accepted, anti-tampering systems have been set to stand-by and will accept target approach for servicing.""",,
greetingDerelictHostile,OpenCommLink,"$faction.id == derelict score:1000
$entity.isHostile",$entity.ignorePlayerCommRequests = true 1,"""WARNING: This vessel is property of Domain Exploraria and is responding with deadly force to tampering by any means and/or damaging or intrusive signals. Vandalism or destruction of of Domain Exploraria property is punishable under the MINEX Establishment Act in addition to colonial polity charters applicable within this volume of Domain territory. This infraction is being recorded.""",cutCommLink:Cut the comm link,
greetingDerelictNeutral,OpenCommLink,"$faction.id == derelict score:1000
$faction.neutralToPlayer","$menuState = fleetConvMain 0
FireAll PopulateOptions","""Citizen of the Domain, this automated drone ship has identified and logged your vessel or habitat in the course of executing its mission parameters. Autonomous vessels of the Domain Exploraria are programmed to response with deadly force to tampering of any means including damaging or intrusive signals. Vandalism or destruction of of Domain Exploraria property is punishable under the MINEX Establishment Act in addition to colonial polity charters applicable within this volume of Domain territory.""",,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
# Trade panel flavor text,,,,,,
flavorTextMarketGeneric,TradePanelFlavorText,"$global.tradePanelMode == MARKET
","AddText ""The port concourse is filled with trader starcraft of every size. Speculators crowd offloading ship captains with deals and peddlers call out to crew, holding wares and projecting personal ad-holos."" marketFlavorTextColor",,,
flavorTextMarketGenericSmall,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$marketSize < 4
$stability > 1","AddText ""The humble port concourse is filled with small freighters and freelancers down or up on their luck, identifiable by the shine or grime of ship armour and volume of cargo on-loading. A handful of speculators who all seem to know each other crowd offloading ship captains as they arrive while peddlers call out to crew, holding wares and projecting personal ad-holos."" marketFlavorTextColor",,,
flavorTextMarketGenericUnstable,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$stability == 1","AddText ""The port concourse holds only a strew of trader starcraft. A few fidgety-looking speculators seek offloading ship captains with deals. Most peddlers seem to have scurried off - and in a hurry, judging from the detritus, though a few enterprising merchants still do business. The local constabulary appears to have deployed patrols of power-armour units while security drones buzz conspicuously overhead."" marketFlavorTextColor",,,
flavorTextMarketGenericVeryUnstable,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$stability == 0","AddText ""The port concourse contains only a few ships, and half of those look like warcraft. Armed gangs of crew huddle around each spacecraft, guarding on- and off-loading cargo. A few brave speculators seem to hurry between spaces which offer what they imagine will provide cover as security drones buzz overhead in a rush to some incident or another."" marketFlavorTextColor",,,
flavorTextMarketPirateUnstable,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$stability == 1
$faction.id == pirates","AddText ""The port concourse is filled with a few scarred hulls underlit by the flicker of ID-chips being lasered off cargo containers. Armed pirate crews huddle around their ships, glaring and posturing challenges at rival crews.The entire facility look more poorly-maintained than usual with suspicious scorches and stains marring several bulkheads. Heavies of the portboss stare coolly, ready to use their weapons."" marketFlavorTextColor",,,
flavorTextMarketPirateVeryUnstable,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$stability == 0
$faction.id == pirates","AddText ""Only one or two brightly-hulled pirate vessels are docked on the port concourse and their point-defense turrets track your shuttle - a clear provocation. A swaggering lieutenant of the portboss approaches, flanked by armed thugs. His request for a bribe is interrupted by muted gunshots; he smiles at your reaction and you quickly realize that he's either high or drunk. The air smells of smoke and high-energy ionization."" marketFlavorTextColor",,,
flavorTextMarketPerseanLeague,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$faction.id == persean","AddText ""The port concourse is filled with trader starcraft of every size and shape. Speculators crowd offloading ship captains with deals and peddlers call out to crew, holding wares and projecting personal ad-holos. Groups of League Navy spacers and officers are identifiable by their standard uniforms and proclivity for holding formation even when off-duty. Meanwhile, the local constabulary is dressed in obstinate dissimilarity from that of any other League world, though they maintain a universal poise of authority and watchfulness. League emblems are displayed on a few municipal active-surfaces as a bit of an afterthought."" marketFlavorTextColor",,,
flavorTextMarketLuddicPath,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$faction.id == luddic_path","AddText ""Shabby trader starcraft huddle along the port concourse alongside scarred Pather raiders, dominating in bright livery. Luddic merchants await meetings with offloading ship captains. Peddlers offer street food and handcrafts to spacer crew while monks pray quietly over begging-bowls. A handful of ranters harangue outsiders under the assured gaze of righteous Pather militants."" marketFlavorTextColor
AddText ""Open display of technological vice not strictly necessary for duty and survival is not tolerated here. As such, one quickly learns not to display cybernetic mods and flashy gadgets. The lack of holoprojectors gives the feeling of an ancient history edutainment sim."" marketFlavorTextColor",,,
flavorTextMarketTriTachyon,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$faction.id == tritachyon
$marketSize >= 4","AddText ""The port concourse is filled with trader starcraft of every size. Speculators crowd offloading ship captains with deals and peddlers call out to crew, holding wares and projecting personal ad-holos."" marketFlavorTextColor
AddText ""A Tri-Tachyon franchise official welcomes you and offers to update your PDA with the latest Company rates for the local commodity market."" marketFlavorTextColor",,,
flavorTextMarketPirates,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$faction.id == pirates","AddText ""The port concourse is filled with scarred hulls underlit by the flicker of ID-chips being lasered off cargo containers. Pirate crews swagger in packs, sizing each other up, while their captains cut deals in smoky back rooms. Flunkies of the portboss look on with weapons unslung."" marketFlavorTextColor",,,
flavorTextMarketDiktat,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$faction.id == sindrian_diktat","AddText ""The port concourse is filled with a mix of trader ships and military craft. Offloading ship captains are processed by a dour Diktat logistics officer before being allowed to proceed. Traders in dull suits, Diktat pins displayed on each collar, quietly pass a datapad loaded with cargo manifests amongst themselves."" marketFlavorTextColor
AddText ""A holoprojector displays a larger-than-life image of Admiral Andrada, the Lion of Sindria, flanked by Diktat banners waving in simulated wind. His commanding gaze is cast toward a ventilation duct."" marketFlavorTextColor",,,
flavorTextMarketDiktatCruor,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$faction.id == sindrian_diktat
$market.id == cruor","AddText ""You land on a free pad in the port segment of the giant tracked city-train that worms forever over the broken plains of Cruor. Upon disembarkation, the scarred decking shifts and rolls almost imperceptibly. A grim-faced Diktat officer flanked by guards takes your credentials and interrogates you about each of the standard information fields as if you were guilty of something, perhaps everything."" marketFlavorTextColor
AddText ""Diktat banners jostle limply over the port concourse as other captains endure similar treatment. You wonder idly at the dirty, open-top cages installed at each receiving-bay."" marketFlavorTextColor",,,
flavorTextMarketHegemony,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$faction.id == hegemony","AddText ""Hegemony patrol skiffs slip between looming bulk freighters and the pitted hulls of fighting-traders that fill the port concourse. Offloading ship captains are met crisply by a Hegemony logistics officer, cleared, then released to the crowds of traders, arms merchants, and commodity speculators."" marketFlavorTextColor
AddText ""The fiery phoenix of the Hegemony is projected onto a convenient bulkhead, the local Navy recruitment center's comms-ID scrolling around the flickering stars of the Domain - 'See the Sector, Serve With Honor, Restore the Human Domain'."" marketFlavorTextColor",,,
flavorTextMarketLuddicChurch,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$faction.id == luddic_church","AddText ""The port concourse is filled with trader starcraft of every size. Luddic merchants in muted dress await meetings with offloading ship captains. Peddlers offer street food and hand-crafts to spacer crew while monks pray quietly over begging-bowls. Knights in handspun robes of Luddic green, CP-carbines slung, escort away the occasional ranter determined to harangue outsiders who openly flaunt gadgets and cyber-mods. The Church is practical; such sins are tolerated in the trader's district."" marketFlavorTextColor",,,
flavorTextMarketPirateUmbra,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$faction.id == pirates
$market.id == umbra","AddText ""Pirate vessels dock alongside equally battered warships sprayed with revolutionary slogans. The offloading bays mix the metallic tang of vacuum with strained life support and unwashed humanity. Cargo is inspected - and occasionally expropriated - by Section-leaders flanked by guards eyeing down the offloading spacer crew."" marketFlavorTextColor",,,
flavorTextMarketCryosanctum,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$cryoSanctum == true","AddText ""The cavernous landing bays dwarf the few starcraft docked; sensors detect EM whispers from echelons of hidden, sleeping autoturrets, suggesting firepower far in excess of that necessary to ensure the good behaviour of the few merchants, mercenaries, and rich eccentrics visiting the cryosanctum. An official meets offloading captains, extending the standard catalogue of cryosleep packages before escorting them to the visitors lounge."" marketFlavorTextColor",,,
flavorTextMarketDecivilized,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$market.mc:decivilized == true
$marketSize <= 3","AddText ""You land at a location arranged via coded transmission. At first all seems quiet, but eventually figures in camo-suits, bearing weapons, emerge from hidden passages. They are suspicious and their manner terse. After some reassurances, a trade manifest is accepted and negotiations allowed to begin."" marketFlavorTextColor",,,
,,,,,,
flavorTextCargoPlaceholder,TradePanelFlavorText,"$global.tradePanelMode == CARGO
","AddText ""Your quartermaster coordinates records of all crew appointments, armament stores, and trade goods. These reports are kept up-to-date and made available through your TriPad."" textGrayColor",,,
flavorTextSalvagePlaceholder,TradePanelFlavorText,"$global.tradePanelMode == SALVAGE
","AddText ""Your space-ops crew, armed with laser cutters and skeletal cargo skiffs, maneuver to disabled hulks and search them for useful commodities, armaments, and valuables."" textGrayColor",,,
flavorTextAbandonedStation,TradePanelFlavorText,"$global.tradePanelMode == MARKET
$abandonedStation == true score:100","AddText ""The port concourse is dark and empty but for a few looted hulks. The atmosphere reads out as thin, but there is sufficient power from hardened passive collectors to run basic life support and storage functions."" marketFlavorTextColor",,,
,,,,,,
# relationship level descriptions,,,,,,
relLevelNeutral,RelationshipLevelDesc,$faction.rel == NEUTRAL,,"You're not generally well known by $faction officials, for good or ill.",,
relLevelNeutralPirates,RelationshipLevelDesc,"$faction.rel == NEUTRAL
$faction.id == pirates",,"You've been around pirates, smugglers, and other types of criminals often enough, and know how to act so they see you as one of their own.",,
relLevelNeutralLuddic,RelationshipLevelDesc,"$faction.rel == NEUTRAL
$faction.id == luddic_church",,You know enough about the practices of the Luddic Church to follow the rules of the major holy days and avoid gaffes that might offend the faithful.,,
relLevelFavorable,RelationshipLevelDesc,$faction.rel == FAVORABLE,,"The $faction officials tend to view you favorably, though this has little in the way of implications. At best, you might be sold some low-grade surplus military equipment, or avoid being the target of an investigation if a more convenient scapegoat is available.",,
relLevelFavorablePirates,RelationshipLevelDesc,"$faction.rel == FAVORABLE
$faction.id == pirates",,"You've been around pirates, smugglers, and other types of criminals often enough, and know how to act so they see you as one of their own.",,
relLevelWelcoming,RelationshipLevelDesc,$faction.rel == WELCOMING,,Your name is known to some high-level officials in $theFaction. Harassing you is therefore a more risky endeavor for local patrol commanders.,,
relLevelWelcomingPirates,RelationshipLevelDesc,"$faction.rel == WELCOMING
$faction.id == pirates",,"You've gained a measure of notoriety in the underworld, and know how to throw your weight around to get what you want.",,
relLevelFriendly,RelationshipLevelDesc,$faction.rel == FRIENDLY,,"You're relatively well-known within $theFaction, whether in person or by reputation. Minor functionaries know to stay out of your way.",,
relLevelFriendlyPirates,RelationshipLevelDesc,"$faction.rel == FRIENDLY
$faction.id == pirates",,You've proven useful to some of the leaders of the various criminal enterprises in the Sector. Harassing you is more trouble than it's worth.,,
relLevelCooperative,RelationshipLevelDesc,$faction.rel == COOPERATIVE,,You know some of the $faction leaders personally. You may receive trade concessions and access to high-quality ships and munitions.,,
relLevelCooperativePirates,RelationshipLevelDesc,"$faction.rel == COOPERATIVE
$faction.id == pirates",,"Your exploits are legendary, and your underworld connections and influence enviable.",,
relLevelSuspicious,RelationshipLevelDesc,$faction.rel == SUSPICIOUS,,"Though nothing has been proven (yet), $faction officials tend to view you with distrust. Link access to the port authority is granted only grudgingly, and you find yourself the subject of investigations and harassment frequently.",,
relLevelSuspiciousPirates,RelationshipLevelDesc,"$faction.rel == SUSPICIOUS
$faction.id == pirates",,"Pirates, as a whole, only tend to view you with distrust. Incidentally, that's more than can be said for how they see fellow captains.",,
relLevelInhospitable,RelationshipLevelDesc,$faction.rel == INHOSPITABLE,,"Suspicions have risen to an actionable level. There's no shoot-on-sight authorization quite yet, but $faction ports will refuse to trade with you, and patrols seem on a mission to make your life miserable.",,
relLevelInhospitablePirates,RelationshipLevelDesc,"$faction.rel == INHOSPITABLE
$faction.id == pirates",,"Pirates are generally only inhospitable towards you, which means you've already made a name for yourself as someone whose interests might align with theirs.",,
relLevelHostile,RelationshipLevelDesc,$faction.rel == HOSTILE,,"$Faction commanders have authorization to engage your fleet on sight, and all markets are prohibited from trading with you. You might still recover good standing with $theFaction, but it's going to take some serious work.",,
relLevelHostilePirates,RelationshipLevelDesc,"$faction.rel == HOSTILE
$faction.id == pirates",,"Your name is not known to pirate captains, for good or ill. Mostly ill, as they'll attack you without a second thought if the opportunity arises, although pirate bases will gladly trade with you.",,
relLevelVengeful,RelationshipLevelDesc,$faction.rel == VENGEFUL,,A holo of your face and an IDENT-hash of your last known fleet are both regular parts of inter-system security bulletins. It's fairly certain there's a high-ranking $faction officer whose primary assignment is to hunt you down.,,
relLevelVengefulPirates,RelationshipLevelDesc,"$faction.rel == VENGEFUL
$faction.id == pirates",,"You've made a name for yourself by hunting down pirates; pirate bases are no longer willing to trade with you. There's little practical difference in the attitude of pirate captains, as they were already willing to kill you given the chance.",,
relLevelVengefulLuddic,RelationshipLevelDesc,"$faction.rel == VENGEFUL
$faction.id == luddic_church",,"The Luddic Church portrays you in nearly demonic terms: a wrathful corruptor, sinful and unrepentant, the desecrator of all that is holy and good. Though their operations are secret, it is clear from inquiries made to various contacts and associates that the Knights of Ludd have assigned a highly capable Inquisitor to your case. Priests of the Church have even implied in sermons that it might not be quite considered a sin to kill you, so it's really only a matter of time before some fanatic attempts it.",,
,,,,,,
# customs inspection,,,,,,
ciLongRangeCommBurst,CommBurstCustomsInspection,,ShowDefaultVisual,"You receive a long-range comm burst from the $faction $otherFleetName directing your $shipOrFleet to come to and prepare for a customs inspection.

The message contains a standard legal-code attachment detailing the various penalties for evading customs agents, transporting contraband, and other related offenses.

It's as likely as not that this is nothing more than a legalized shakedown, but it has the weight of $faction authority behind it.",0:csContinue:Continue,
customsInspectionScan,BeginFleetEncounter,$doingCustomsInspection score:100,"MakeOtherFleetHostile customs true
MakeOtherFleetAggressive customs true
$ignorePlayerCommRequests = false 0
$customsInspectionStage = 0 4
AddText ""You're being hailed by the $faction $otherShipOrFleet."" $faction.baseColor",,,
customsInspectionConvStart,OpenCommLink,"$entity.doingCustomsInspection score:100
$entity.customsInspectionStage == 0","SetTooltip ciAgree ""The scan will compute the value of your fleets and the goods it's carrying, and a toll will be assessed.\n\nIf your $shipOrFleet is carrying illegal goods, there's a chance these will be detected. The chance is lower if you're also carrying legal goods, and if your relationship with the faction is positive. If contraband is detected, it will be confiscated, and a fine will be assessed.""","$PersonRank $personName looks up from $hisOrHer console briefly. ""Stand by while we scan your cargo. We'll continue this conversation once the scan is complete.""","0:ciAgree:Allow the scan to proceed
1:ciDisagree:""I don't think so.""",
customsInspectionAgree,DialogOptionSelected,"$entity.doingCustomsInspection score:100
$option == ciAgree score:100","EndConversation DO_NOT_FIRE
Wait $global.ciWait 0.5 $global.ciFinished $global.ciInterrupted $global.ciInProgress ""Scanning...""
MakePlayerImmediatelyAttackable
GiveOtherFleetAssignment HOLD 3 ""performing customs inspection""
$customsInspectionStage = 1 4",,,
customsInspectionDisagree,DialogOptionSelected,"$entity.doingCustomsInspection score:100
$option == ciDisagree","AdjustRep $faction.id CUSTOMS_REFUSED_TOLL
$entity.ignorePlayerCommRequests = true 1
#MakeNearbyFleetsHostile $faction.id 2000 10
EndConversation","""Oh? That's something you're going to regret.""

The comm link is cut before you have a chance to respond.",,
customsInspectionWaitFinished,BeginFleetEncounter,"$doingCustomsInspection score:100
$global.ciFinished","MakeOtherFleetHostile customs true
MakeOtherFleetAggressive customs true
CustomsInspectionGenerateResult
TakeRepCheck $faction.id $repCheckResult
OpenComms","After a long wait, your terminal chimes softly and displays the scan results transmitted by the $faction $otherFleetName.",,
customsInspectionAddContinue,OpenCommLink,"$entity.doingCustomsInspection score:100
$entity.customsInspectionStage == 1",$entity.customsInspectionStage = 3 0,,0:ciResultContinue:Continue,
customsInspectionContinueFromResult,DialogOptionSelected,"
$option == ciResultContinue","CustomsInspectionApplyRepLoss
FireBest InspectionResultResponse",,,
customsInspectionResultToll,InspectionResultResponse,"$entity.doingCustomsInspection score:100
$entity.inspectionResultType == TOLL","SetTextHighlights $entity.tollAmount
FireAll CustomsInspectionPayOptions","$PersonRank $personName looks up from $hisOrHer console. ""Looks like everything checks out. The toll and inspection fees come to a total of $tollAmount credits.""",,
customsInspectionResultTollFine,InspectionResultResponse,"$entity.doingCustomsInspection score:100
$entity.inspectionResultType == TOLL_AND_FINE","SetTextHighlights $entity.tollAmount
FireAll CustomsInspectionPayOptions","$PersonRank $personName looks pleased. ""Well, well. Look what we have here! We'll be confiscating all the contraband, of course. The toll, inspection fees, and the fine for posession of illegal goods with intent to sell come to a total of $tollAmount credits.""",,
customsInspectionResultTollFineHostile,InspectionResultResponse,"$entity.doingCustomsInspection score:100
$entity.inspectionResultType == TOLL_AND_FINE
RepIsAtBest $faction.id HOSTILE score:100",FireBest CustomsInspectionEndHostile,"$personName looks at the report, looks at you, looks at the report again, and cuts off the comm link without saying a word. Your scanners detect the signatures of weapons powering up.",,
# customs inspection -payment options,,,,,,
customsInspectionPayToll,CustomsInspectionPayOptions,"$entity.doingCustomsInspection score:100
$entity.inspectionResultType == TOLL
$entity.playerCanAffordPayment",,,0:payCIToll:Pay the toll ($tollAmount credits),
customsInspectionPayTollAndFine,CustomsInspectionPayOptions,"$entity.doingCustomsInspection score:100
$entity.inspectionResultType == TOLL_AND_FINE
$entity.playerCanAffordPayment",,,0:payCIFine:Surrender illegal goods; pay the toll and fine ($tollAmount credits),
customsInspectionCantAffordToll,CustomsInspectionPayOptions,"$entity.doingCustomsInspection score:100
$entity.inspectionResultType == TOLL
!$entity.playerCanAffordPayment",,,0:cantAffordToll:Explain that you can't afford to pay,
customsInspectionCantAffordFine,CustomsInspectionPayOptions,"$entity.doingCustomsInspection score:100
$entity.inspectionResultType == TOLL_AND_FINE
!$entity.playerCanAffordPayment",,,0:cantAffordFine:Explain that you can't afford to pay,
customsInspectionRefuseToll,CustomsInspectionPayOptions,"$entity.doingCustomsInspection score:100
$entity.inspectionResultType == TOLL",,,10:refuseCIToll:Refuse to pay,
customsInspectionRefuseFine,CustomsInspectionPayOptions,"$entity.doingCustomsInspection score:100
$entity.inspectionResultType == TOLL_AND_FINE",,,10:refuseCIFine:Refuse to cooperate,
# customs inspection - payment option effects,,,,,,
optionPayCIToll,DialogOptionSelected,$option == payCIToll,"CustomsInspectionApplyResult
AdjustRep $faction.id CUSTOMS_PAID
FireBest CustomsInspectionEndPeaceful","""Thank you for your cooperation."" $personRank $personName nods and cuts the comm link.",,
optionPayCIFine,DialogOptionSelected,$option == payCIFine,"CustomsInspectionApplyResult
AdjustRep $faction.id CUSTOMS_PAID
FireBest CustomsInspectionEndPeaceful","""Thank you for your cooperation. It will be noted in your file."" $personRank $personName nods and cuts the comm link.",,
optionRefuseCITollPassRep,DialogOptionSelected,"$option == refuseCIToll
$entity.repCheckResult > 0.2
RepIsAtWorst $faction.id FAVORABLE","AdjustRep $faction.id CUSTOMS_REFUSED_TOLL
FireBest CustomsInspectionEndPeaceful","$personName glares at you, but, for whatever reason, doesn't press the issue. After a couple of seconds of silence, you cut the comm link.",,
optionRefuseCIToll,DialogOptionSelected,$option == refuseCIToll,"AdjustRep $faction.id CUSTOMS_REFUSED_TOLL
FireBest CustomsInspectionEndHostile","""That's something you're going to regret.""

The comm link is cut before you have a chance to respond.",,
optionRefuseCIFinePassRep,DialogOptionSelected,"$option == refuseCIFine
$entity.repCheckResult > 0.6
RepIsAtWorst $faction.id FAVORABLE","AdjustRep $faction.id CUSTOMS_REFUSED_FINE
FireBest CustomsInspectionEndPeaceful","$personName looks at you carefully, and, for whatever reason, doesn't press the issue. After a couple of seconds of silence, you cut the comm link.",,
optionRefuseCIFine,DialogOptionSelected,$option == refuseCIFine,"AdjustRep $faction.id CUSTOMS_REFUSED_FINE
FireBest CustomsInspectionEndHostile","""That's something you're going to regret very, very much.""

The comm link is cut before you have a chance to respond.",,
optionCantAffordToll,DialogOptionSelected,$option == cantAffordToll,"AdjustRep $faction.id CUSTOMS_COULD_NOT_AFFORD
FireBest CustomsInspectionEndPeaceful","""That's very unfortunate. Your failure to pay will be noted in your file.""",,
optionCantAffordFine,DialogOptionSelected,$option == cantAffordFine,AdjustRep $faction.id CUSTOMS_COULD_NOT_AFFORD,"""That's very unfortunate. I'm certain you're still planning on promptly surrendering the contraband, correct?""","0:payCIFine:""Yes, of course.""
1:refuseCIFine:""I don't think so.""",
,,,,,,
,,,,,,
,,,,,,
# customs inspection - ending the conversation,,,,,,
customsInspectionEndingPeaceful,CustomsInspectionEndPeaceful,,"unset $entity.doingCustomsInspection
MakeOtherFleetHostile customs false
MakeOtherFleetAggressive customs false
EndConversation",,,
customsInspectionEndingHostile,CustomsInspectionEndHostile,,"unset $entity.doingCustomsInspection
$entity.ignorePlayerCommRequests = true 1
EndConversation",,,
,,,,,,
# no trading w/ same faction market while customs inspection is in progress,,,,,,
marketPostOpenCustomsInProgress,MarketPostOpen,"$hasMarket
$global.customsInspectionFactionId == $faction.id score:100","SetShortcut marketLeave ""ESCAPE""",The port authority refuses your $shipOrFleet docking clearance until the customs inspection is resolved. Making contact with any underground parties willing to trade is also impossible due to the patrol breathing down your neck.,10:marketLeave:Leave,
,,,,,,
# new game creation,,,,,,
onNewGameCreationStart,BeginNewGameCreation,,"NGCAddCredits 2000
FireAll InitNewGameChoices",,,
initNewGameChoicesDev,AddNewGameChoices,$global.isDevMode,,,100:ngcDevStart:>>(dev) quick start,
initNewGameChoicesDev2,AddNewGameChoices,$global.isDevMode,,,101:ngcDevStart2:>>(dev) quick start custom no time pass,
initNewGameChoices,InitNewGameChoices,,FireAll AddNewGameChoices,Your most recent occupation was as...,,
ngcWolfStart,AddNewGameChoices,,"SetTooltip ngcWolf ""The Wolf-class is a sleek and deadly combat frigate with middling logistical stats.\n\nBest used near civilization, or with the support of other ships with better capacity for carrying fuel and supplies.""",,"0:ngcWolf:A bounty hunter, commanding a Wolf-class frigate",
ngcWayfarerStart,AddNewGameChoices,,"SetTooltip ngcWayfarer ""The Wayfarer is an ungainly vessel with an excellent capacity for carrying cargo, fuel, and crew.\n\nIts combat ability is limited, but not to be discounted - designed to operate on the fringes of civilization, this freighter is quite capable of defending itself.""",,"1:ngcWayfarer:A scavenger, commanding a Wayfarer-class combat freighter",
ngcExplorerStart,AddNewGameChoices,,"SetTooltip ngcExplorer ""A group of ships capable of performing salvage operations on the fringes of the Sector, and defending itself against most of the threats found there.\n\nIncludes a tanker for increased fuel capacity and exploration range, and sufficient cargo capacity to carry the salvage back to the Core Worlds.""",,"2:ngcExplorer:An explorer, leading a salvage expedition from aboard an Apogee-class cruiser (faster start)",
ngcMercStart,AddNewGameChoices,,"SetTooltip ngcMerc ""A small but highly combat-capable task force geared towards bounty-hunting.\n\nIncludes a small tanker to extend its operating range somewhat.""",,"3:ngcMerc:A mercenary, leading a small force from aboard a Hammerhead-class destroyer (faster start)",
ngcRandomStart,AddNewGameChoices,,"SetTooltip ngcRandom ""A randomized collection of ships, slightly weaker overall than either of the \""faster start\"" options, but roughly in the same category.""",,"4:ngcRandom:A freelancer, doing whatever jobs you've been able to find (randomized start)",
ngcSpacerStart,AddNewGameChoices,CheckSetting enableSpacerStart,"SetTooltip ngcSpacer ""A non-combat shuttle, a general lack of resources, and a debt that must be paid. Very difficult start, only intended as a challenge for the starfarer that's seen it all.""",,"5:ngcSpacer:""A spacer. A broken-down shuttle. A lifelong debt."" (very hard)",
,,,,,,
#ngcDisableSpacerOption,NGCDisableSpacerOption,!NGCCanSkipTutorial,"SetEnabled ngcSpacer false
SetTooltip ngcSpacer ""Need to start at least one game with the tutorial in order to be able to select this starting option.""",,,
ngcWolfPicked,NewGameOptionSelected,$option == ngcWolf,"NGCAddShip wolf_Starting
FireAll NGCSecondShipOptions",,,
ngcWayfarerPicked,NewGameOptionSelected,$option == ngcWayfarer,"NGCAddShip wayfarer_Starting
FireAll NGCSecondShipOptions",,,
ngcExplorerPicked,NewGameOptionSelected,$option == ngcExplorer,"#NGCAddShip mule_Standard
NGCAddShip apogee_Starting
NGCAddShip condor_Support
NGCAddShip wayfarer_Starting
NGCAddShip shepherd_Starting
NGCAddShip dram_Light
#NGCAddShip crig_Standard
NGCAddCredits 18000
$ngcExplorerSelected = true
FireAll NGCDifficultyOptions",,,
ngcMercPicked,NewGameOptionSelected,$option == ngcMerc,"NGCAddShip hammerhead_Balanced
NGCAddShip drover_Starting
NGCAddShip centurion_Starting
NGCAddShip lasher_CS
NGCAddShip dram_Light
NGCAddCredits 18000
$ngcMercSelected = true
AddTextSmall ""Acquired level 1 officer"" good
SetTextHighlights ""level 1 officer""
$ngcAddOfficer = true
FireAll NGCDifficultyOptions",,,
ngcRandomPicked,NewGameOptionSelected,$option == ngcRandom,"NGCAddShipSilent hammerhead_Balanced
$ngcRandomSelected = true
FireAll NGCDifficultyOptions",,,
ngcSpacerPicked,NewGameOptionSelected,$option == ngcSpacer,"NGCAddShip kite_original_Stock
$ngcSpacerSelected = true
NGCSetDifficulty normal",,0:ngcSpacerContinue:Continue,

# BUSCHER: this is actually one entry
# https://docs.google.com/document/d/1aBZlAKqF0o4AknIcENQSfLvYJHseMtzQb01_CLjKZU4/pub?embedded=true
ngcSpacerContinue,NewGameOptionSelected,$option == ngcSpacerContinue,"$ngcSkipTutorial = true
NGCAddCharacterPoints 3
NGCSetStartingLocation Corvus -2500 3000
# BUSCHER
MyAddStandardStartingScript
NGCDone",,,

ngcPickSecondShip,NGCSecondShipOptions,,"SetTooltip ngcKite ""The Kite-class is a light and nimble ship with limited armament.\n\nNot capable of doing much damage itself, it is however capable of being a persistent distraction, especially in the hands of an officer with the right set of defensive skills.""
SetTooltip ngcShepherd ""The Shepherd is not a combat ship, being both slow and fragile, although its drones are capable of providing decent support to another ship.\n\nIts true value, however, lies in a generous cargo hold and numerous salvaging-and-surveying-oriented hull features.\n\nIts cargo of heavy machinery is also useful in running salvage and surveying operations.""","In addition, your fleet includes...","0:ngcKite:A Kite-class shuttle, under the command of an experienced subordinate
1:ngcShepherd:A Shepherd class drone tender, with a cargo of heavy machinery",
ngcKitePicked,NewGameOptionSelected,$option == ngcKite,"NGCAddShip kite_Starting
AddTextSmall ""Acquired level 1 officer"" good
SetTextHighlights ""level 1 officer""
$ngcAddOfficer = true
FireAll NGCDifficultyOptions",,,
ngcShepherdPicked,NewGameOptionSelected,$option == ngcShepherd,"NGCAddShip shepherd_Starting
NGCAddCargo RESOURCES heavy_machinery 20
FireAll NGCDifficultyOptions",,,
ngcDifficulty,NGCDifficultyOptions,,"SetTooltip ngcEasy ""- Your ships take 25% less damage\n- Sensor range increased by 500 units\n- Salvage increased by 50%""
SetTooltipHighlightColors ngcEasy hColor hColor hColor
SetTooltipHighlights ngcEasy ""25%"" ""500"" ""50%""
SetTooltip ngcNormal ""Default settings balanced for a challenging experience.""","Select the campaign difficulty level. ""Easy"" is recommended for a first-time player.","0:ngcNormal:Normal
1:ngcEasy:Easy",
ngcEasyPicked,NewGameOptionSelected,$option == ngcEasy,"NGCSetDifficulty easy
FireAll NGCTutorialOptions",,,
ngcNormalPicked,NewGameOptionSelected,$option == ngcNormal,"NGCSetDifficulty normal
FireAll NGCTutorialOptions",,,
ngcWithTutorial,NGCTutorialOptions,,"SetTooltip ngcTutorial ""Start with a tutorial mission that introduces the high-level campaign mechanics and active abilities.""",,0:ngcTutorial:Start with tutorial!,
ngcSkipTutorial,NGCTutorialOptions,NGCCanSkipTutorial,"SetTooltip ngcSkip ""Skip the tutorial. Will give you roughly the same starting conditions as finishing the tutorial normally would.""",,1:ngcSkip:Skip it,
ngcSkipTutorialNoSkip,NGCTutorialOptions,!NGCCanSkipTutorial,"SetTooltip ngcSkip ""Need to start at least one game with the tutorial in order to be able to skip it.""
SetEnabled ngcSkip false",,1:ngcSkip:Skip it,

ngcTutorialPicked,NewGameOptionSelected,$option == ngcTutorial,"NGCSetStartingLocation Galatia 1000 -13000
# BUSCHER
MyAddStandardStartingScript
#NGCSetWithTimePass false
NGCDone",,,

ngcSkipTutorialPicked,NewGameOptionSelected,$option == ngcSkip,"$ngcSkipTutorial = true
NGCAddCharacterPoints 3
NGCSetStartingLocation Corvus -2500 3000
# BUSCHER
MyAddStandardStartingScript
#NGCSetWithTimePass false
NGCDone",,,

,,,,,,
,,,,,,
,,,,,,
ngcDevStartOption,NewGameOptionSelected,$option == ngcDevStart,"NGCAddShip ""tempest_Starting""
NGCAddCargo RESOURCES crew 20
NGCAddCargo RESOURCES supplies 20
NGCAddCargo RESOURCES fuel 20
NGCAddCredits 1000000
NGCSetAptitude technology 0
NGCSetSkill gunnery_implants 0
NGCSetSkill navigation 0
NGCSetAptitude combat 0
NGCAddCharacterPoints 100
NGCSetStartingLocation hyperspace -10000 -10000
NGCSetDifficulty normal
NGCSetWithTimePass false
NGCAddDevStartingScript
NGCDone",,,
ngcDevStartOption2,NewGameOptionSelected,$option == ngcDevStart2,"NGCAddShip ""medusa_Attack""
NGCAddCargo RESOURCES crew 50
NGCAddCargo RESOURCES supplies 40
NGCAddCargo RESOURCES fuel 60
NGCAddCredits 1000001
NGCSetAptitude technology 0
NGCSetAptitude combat 0
NGCAddCharacterPoints 200
#NGCSetStartingLocation Galatia 1000 -13000
NGCSetStartingLocation hyperspace -10000 -10000
NGCSetDifficulty normal
NGCSetWithTimePass false
NGCSetCustom customDevStart true
NGCAddDevStartingScript
NGCDone",,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
"# CONVERSATIONS
# note: during a conversation,
# the person and not the entity
# memory is used by default
# entity memory is accessible
# by using the entity. prefix",,,,,,
convDefault,OpenCDE,,"AddText ""Establishing connection..."" buttonText
FireBest PickGreeting",You transmit the comms-ID and wait for the system to establish a connection.,,
convDefaultGreeting,PickGreeting,,"ShowPersonVisual
FireAll PopulateOptions","After a short wait, your connection request is accepted.

""Hello. What do you want?""",,
convDefaultGreetingActive,PickGreetingActive,,"ShowPersonVisual
FireAll PopulateOptions","""Hello? Uh, you know, never mind. Wrong comms-ID.""",,
convOptionLeave,PopulateOptions,"$isPerson
!$cutCommLinkPolite",,,100:cutCommLink:Cut the comm link,
convOptionLeavePolite,PopulateOptions,"$isPerson
$cutCommLinkPolite",,,100:cutCommLinkPolite:Cut the comm link,
convEnd,DialogOptionSelected,$option == cutCommLink,"ShowDefaultVisual
EndConversation",You cut the comm link.,,
convEndNoText,DialogOptionSelected,$option == cutCommLinkNoText,"ShowDefaultVisual
EndConversation NO_CONTINUE",,,
convEndPolite,DialogOptionSelected,$option == cutCommLinkPolite,"ShowDefaultVisual
EndConversation",You cut the comm link after exchanging a few pleasantries.,,
# NPC comm requests when player enters market,,,,,,
checkNPCWantingToTalk,MarketPostOpen,"!$global.initiatedCommsAlready
NPCWantsComms
PickCommsNPC score:1000","$global.initiatedCommsAlready = true 0
FireBest ConfirmNPCWantsToTalk",,,
playerOptionsVSContactingNPC,ConfirmNPCWantsToTalk,"!$contactedPlayerRecently
!IsSoughtByPatrols $faction.id",$contactedPlayerRecently = true 2,"As you get near $entityName, you get an incoming comm request.","acceptNPCComm:Accept the comm request
declineNPCComm:Ignore it",
abortNPCWantsToTalk,ConfirmNPCWantsToTalk,$contactedPlayerRecently,EndConversation,,,
npcCommsAccept,DialogOptionSelected,$option == acceptNPCComm,"ShowPersonVisual
FireBest NPCCommsRequest",,,
npcCommsDecline,DialogOptionSelected,$option == declineNPCComm,EndConversation,You decline the comms request and continue on your way.,,
npcCommsAcceptedDefault,NPCCommsRequest,,FireBest PickGreetingActive,,,
# test mission,,,,,,
convTMStart,OpenCDE,$playerContactForTestMission,ShowPersonVisual,"""Do you want to complete the mission successfully?""","tmYes:Yes
tmNo:No",
convTMStartNPCInitiated,NPCCommsRequest,$playerContactForTestMission,ShowPersonVisual,"You accept the comm request.

""Do you want to complete the mission successfully?""","tmYes:Yes
tmNo:No",
convTMOptionYes,DialogOptionSelected,$option == tmYes,"CallEvent $testMissionEventRef success
ShowDefaultVisual
EndConversation",,,
convYMOptionNo,DialogOptionSelected,$option == tmNo,"CallEvent $testMissionEventRef failure
ShowDefaultVisual
EndConversation",,,
,,,,,,
# generic refusal to deal while known-inhospitable to authorities (i.e. while open trade isn't available),,,,,,
generic_refuseToDealKnownInhospitable,PickGreeting,"$requiresDiscretionToDeal
HasAttentionOfAuthorities score:500",ShowPersonVisual,"After a short wait, your connection request is accepted. $personName looks at you for a while before speaking.

""And why would someone on the wrong side of $market's authorities want to get in touch with me?""

You consider that perhaps coming back with your transponder off and without attracting any undue attention might be a better aproach.",0:cutCommLink:Cut the comm link,
# MarketProcurementMission,,,,,,
mpm_greetingNeedTOff,PickGreeting,"$mpm_isPlayerContact
$player.transponderOn
$hostileToMarket score:100",ShowPersonVisual,"After a short wait, your connection request is accepted.

""What? A shipment of $mpm_commodityName? I'm afraid I wouldn't know anyone interesed in that sort of thing.""

On the balance of things, perhaps waltzing into port with your transponder on and broadcasting your identity, in order to get in touch with an underworld figure, wasn't the best idea you've ever had.",0:cutCommLink:Cut the comm link,
mpm_greetingEnough,PickGreeting,"$mpm_isPlayerContact
CallEvent $mpm_eventRef hasEnough","ShowPersonVisual
FireAll PopulateOptions","After a short wait, your connection request is accepted.

""Greetings! I've been waiting for this $mpm_commodityName shipment.""",,
mpm_greetingNotEnough,PickGreeting,"$mpm_isPlayerContact
!CallEvent $mpm_eventRef hasEnough","ShowPersonVisual
FireAll PopulateOptions","After a short wait, your connection request is accepted.

""Greetings! I've been waiting for this $mpm_commodityName shipment. ... and I see that you don't have it yet. Well, you still have some time.""",,
mpm_greetingEnoughIllegal,PickGreeting,"$mpm_isPlayerContact
$hostileToMarket
CallEvent $mpm_eventRef hasEnough","ShowPersonVisual
FireAll PopulateOptions","After a short wait, your connection request is accepted.

""So, I hear you've got the stuff.""",,
mpm_greetingNotEnoughIllegal,PickGreeting,"$mpm_isPlayerContact
$hostileToMarket
!CallEvent $mpm_eventRef hasEnough","ShowPersonVisual
FireAll PopulateOptions","After a short wait, your connection request is accepted.

""You haven't got the stuff, so why are we even talking?""",,
mpm_greetingActiveEnough,PickGreetingActive,"$mpm_isPlayerContact
!$hostileToMarket
CallEvent $mpm_eventRef hasEnough","ShowPersonVisual
FireAll PopulateOptions","""Greetings! I've been waiting for this $mpm_commodityName shipment.""",,
mpm_greetingActiveNotEnough,PickGreetingActive,"$mpm_isPlayerContact
!$hostileToMarket
!CallEvent $mpm_eventRef hasEnough","ShowPersonVisual
FireAll PopulateOptions","""Greetings! I've been waiting for this $mpm_commodityName shipment. ... and I see that you don't have it yet. Well, you still have some time.""",,
mpm_hasEnoughOption,PopulateOptions,"$mpm_isPlayerContact
CallEvent $mpm_eventRef hasEnough",,,0:mpm_deliver:Deliver the $mpm_commodityName,
mpm_hasEnoughOptionSelected,DialogOptionSelected,$option == mpm_deliver,"AddText ""\""Excellent. Thank you for your efforts.\""""
CallEvent $mpm_eventRef performDelivery
CallEvent $mpm_eventRef endEvent
FireAll PopulateOptions",,,
mpm_hasEnoughOptionSelectedBonus,DialogOptionSelected,"$option == mpm_deliver
CallEvent $mpm_eventRef hasBonus","AddText ""\""Excellent. Thank you for your efforts. As agreed, I'm also adding on a bonus for prompt delivery.\""""
CallEvent $mpm_eventRef performDelivery
CallEvent $mpm_eventRef endEvent
FireAll PopulateOptions",,,
mpm_pirateEncounter,BeginFleetEncounter,"$mpm_isSpawnedByMPM
!$ignorePlayerCommRequests","MakeOtherFleetHostile mpm_pirate true
MakeOtherFleetAggressive mpm_pirate true
$skipTInfo = true 0
$sawPlayerTransponderOn = true 5
AddText ""You're being hailed by the $faction $otherShipOrFleet."" $faction.baseColor
$hailing = true 0",,,
mpm_pirateOpenComms,OpenCommLink,"$isPerson
$entity.mpm_isSpawnedByMPM score:100",FireAll MPMHandOverOptions,"The pirate $personRank looks up from $hisOrHer console.

""Well, now. Just hand over the $mpm_commodityName shipment we both know you've got in your cargo holds, and I'll let you be on your way.""",,
mpm_handOverPirateOption,MPMHandOverOptions,CallEvent $mpm_eventRef hasEnough,,,0:mpm_handOver:Hand over the $mpm_commodityName,
mpm_notEnoughPirateOption,MPMHandOverOptions,!CallEvent $mpm_eventRef hasEnough,,,0:mpm_notEnoughPirate:Explain that you don't have the $mpm_commodityName,
mpm_refusePirateOption,MPMHandOverOptions,,,,"
1:mpm_refuse:Refuse",
mpm_handOverOptionSel,DialogOptionSelected,$option == mpm_handOver,"CallEvent $mpm_eventRef handOver
AddText ""Lost $mpm_quantity $mpm_commodityName"" textEnemyColor
AddText ""\""Glad you could be made to see reason. Now, get out of here before I change my mind.\""""
MakeOtherFleetHostile mpm_pirate false
MakeOtherFleetNonHostile mpm_pirate true 10
FireAll PopulateOptions",,,
mpm_notEnoughPirateOptionSel,DialogOptionSelected,$option == mpm_notEnoughPirate,"$entity.ignorePlayerCommRequests = true 10
ShowDefaultVisual
EndConversation",The comm link is cut before you have a chance to offer much of an explanation.,,
mpm_refuseOptionSel,DialogOptionSelected,$option == mpm_refuse,"$entity.ignorePlayerCommRequests = true 10
ShowDefaultVisual
EndConversation",The comm link is cut before you have a chance to say much of anything else.,,
,,,,,,
# hiring officer generated by OfficerManagerEvent,,,,,,
ome_greeting,PickGreeting,$ome_hireable,"ShowPersonVisual
FireAll PopulateOptionsHire","After a short wait, your connection request is accepted.

$personName looks you over appraisingly.

""Heard you might be looking to take on some help.""",,
ome_greetingAdmin,PickGreeting,"$ome_hireable
$ome_isAdmin","ShowPersonVisual
FireAll PopulateOptionsHire","After a short wait, your connection request is accepted.

$personName looks you over appraisingly.

""Heard you might be getting into the colony business. If so, I might be of some help.""",,
ome_askSkills,PopulateOptionsHire,"$ome_hireable
!$askedSkills
",,,"0:ome_askSkills:""Depends. What can you do?""",
ome_askHire,PopulateOptionsHire,"$ome_hireable
!CallEvent $ome_eventRef atLimit $id",,,1:ome_askHire:Offer to hire $himOrHer,
ome_cantHire,PopulateOptionsHire,"$ome_hireable
CallEvent $ome_eventRef atLimit $id
!$ome_isAdmin",,,"0:ome_convEnd:""I can't hire on any more officers at the moment.""",
ome_cantHireAdmin,PopulateOptionsHire,"$ome_hireable
CallEvent $ome_eventRef atLimit $id
$ome_isAdmin",,,"0:ome_convEnd:""I can't hire on any more administrators at the moment.""",
ome_wontHire,PopulateOptionsHire,"$ome_hireable
!CallEvent $ome_eventRef atLimit $id",,,2:ome_convEnd:End the conversation,
ome_askSkillsSel,DialogOptionSelected,$option == ome_askSkills,"AddText ""You ask $personName some questions to establish where $hisOrHer skills lie.""
CallEvent $ome_eventRef printSkills $id
$askedSkills = true 0
FireAll PopulateOptionsHire
unset $askedSkills",,,
ome_askSkillsSelNoSkillAdmin,DialogOptionSelected,"$option == ome_askSkills
$ome_adminTier == 0","AddText ""You ask $personName some questions to establish where $hisOrHer skills lie. It quickly becomes apparent that $heOrShe has no special talents, but is nonetheless a capable administrator, whose services can be had for a very reasonable fee.""
$askedSkills = true 0
FireAll PopulateOptionsHire
unset $askedSkills",,,
ome_askHireSel,DialogOptionSelected,$option == ome_askHire,"AddText ""\""I'll expect a $ome_hiringBonus credit hiring bonus, and afterwards a starting salary of $ome_salary credits per month. Once the initial transfer is complete, I can be ready to board within the hour.\""""
SetTextHighlightColors hColor hColor
SetTextHighlights $ome_hiringBonus $ome_salary
AddText ""You have $player.creditsStr credits available.""
SetTextHighlightColors hColor
SetTextHighlights $player.creditsStr
FireBest HireOptionSet",,,
ome_askHireSelAdmin,DialogOptionSelected,"$option == ome_askHire
$ome_isAdmin","AddText ""\""I'll expect a $ome_hiringBonus credit hiring bonus, and afterwards a salary of $ome_salary credits per month. Once the initial transfer is complete, I will await my assignment at your pleasure.\""""
SetTextHighlightColors hColor hColor
SetTextHighlights $ome_hiringBonus $ome_salary
AddText ""You have $player.creditsStr credits available.""
SetTextHighlightColors hColor
SetTextHighlights $player.creditsStr
FireBest HireOptionSet",,,
ome_hireOptionsNormal,HireOptionSet,CallEvent $ome_eventRef canAfford $id,,,"0:ome_hireYes:""Sounds good.""
1:ome_convEnd:""I've changed my mind.""",
ome_hireOptionsCantAfford,HireOptionSet,,,,"0:ome_convEnd:""I can't afford that at the moment.""",
ome_hireYesSel,DialogOptionSelected,$option == ome_hireYes,"AddText ""You cut the comm link after exchanging a few pleasantries.""
CallEvent $ome_eventRef hireOfficer $id
UpdateMemory
ShowDefaultVisual
EndConversation",,,
ome_hireNoSel,DialogOptionSelected,$option == ome_convEnd,"ShowDefaultVisual
EndConversation",You cut the comm link after exchanging a few pleasantries.,,
,,,,,,
# patrol stopping player w/ transponder off,,,,,,
tOffPatrolBegin,BeginFleetEncounter,"CaresAboutTransponder
!$tOff_didAlready
!$isHostile
!$faction.c:allowsTransponderOffTrade
!$sourceMarket.mc:free_market
$isPatrol
$sawPlayerTransponderOff score:100","$tOff_didAlready = true 0
#MakeOtherFleetPreventDisengage tOff true
MakeOtherFleetAggressive tOff false
unset $ignorePlayerCommRequests
$sawPlayerWithTOffCount++ 10
$transponderOffConv = true 0
AddText ""You're being hailed by the $faction $otherShipOrFleet."" $faction.baseColor
OpenComms",,,
tOffPatrolBeginNoTalk,BeginFleetEncounter,"CaresAboutTransponder
!$tOff_didAlready
!$isHostile
!$faction.c:allowsTransponderOffTrade
!$sourceMarket.mc:free_market
$isPatrol
$sawPlayerTransponderOff score:100
$sawPlayerWithTOffCount > 1 score:100","$tOff_didAlready = true 0
#MakeOtherFleetPreventDisengage tOff true
MakeOtherFleetAggressive tOff false
MakeHostileWhileTOff tOff true 7
$sawPlayerWithTOffCount++ 10
$ignorePlayerCommRequests = true 0",,,
tOffPatrolOpenComm,OpenCommLink,$entity.transponderOffConv score:100,"AddText ""\""Running with the transponder off in $faction space is against the law. You're hereby ordered to turn your transponder on, identify yourself immediately, and submit to a cargo scan for contraband.\""""
AdjustRep $faction.id TRANSPONDER_OFF
AdjustRepActivePerson TRANSPONDER_OFF",,"0:tOff_comply:Turn the transponder on and comply
1:tOff_refuse:Refuse and cut the comm link",
tOffPatrolOpenCommUnknown,OpenCommLink,"$entity.transponderOffConv score:100
!$entity.knowsWhoPlayerIs","AddText ""\""Unknown $shipOrFleet, identify yourself! Running with the transponder off in $faction space is against the law. You're hereby ordered to turn your transponder on and submit to a cargo scan.\""""
AdjustRep $faction.id TRANSPONDER_OFF
AdjustRepActivePerson TRANSPONDER_OFF",,"0:tOff_comply:Turn the transponder on and comply
1:tOff_refuse:Refuse and cut the comm link",
tOffPatrolOpenCommTOn,OpenCommLink,"$entity.transponderOffConv score:100
$player.transponderOn","AddText ""\""Running with the transponder off in $faction space is against the law. Don't think you can just turn it back on and avoid our attention - you're hereby ordered to submit to a cargo scan.\""""
AdjustRep $faction.id TRANSPONDER_OFF
AdjustRepActivePerson TRANSPONDER_OFF",,"0:tOff_comply2:Allow the scan
1:tOff_refuse:Refuse and cut the comm link",
tOffPatrolOpenCommNotFirstTime,OpenCommLink,"$entity.transponderOffConv score:100
$entity.sawPlayerWithTOffCount == 2.0 score:10
$entity.relativeStrength >= 0","AddText""\""I told you last time to keep your transponder on.\""""
AdjustRep $faction.id TRANSPONDER_OFF
AdjustRepActivePerson TRANSPONDER_OFF
AddText ""The comm link is cut before you have a chance to respond.""
$entity.ignorePlayerCommRequests = true 0
unset $entity.transponderOffConv",,0:tOff_notFirstTimeCont:Continue,
tOffPatrolOpenCommNotFirstTimeCont,DialogOptionSelected,$option == tOff_notFirstTimeCont,"MakeHostileWhileTOff tOff true 7
ShowDefaultVisual
EndConversation",,,
tOffComply,DialogOptionSelected,$option == tOff_comply,"unset $entity.transponderOffConv
unset $entity.sawPlayerTransponderOff
ActivateAbility $player.fleetId transponder
UpdateMemory",You issue an order to activate the transponder and wait for the cargo scan to finish.,0:tOff_scan_continue:Continue,
tOffComply2,DialogOptionSelected,$option == tOff_comply2,"unset $entity.transponderOffConv
unset $entity.sawPlayerTransponderOff",You wait for the cargo scan to finish.,0:tOff_scan_continue:Continue,
tOffCargoScan,DialogOptionSelected,$option == tOff_scan_continue,"AddText ""After a brief wait, the $faction $otherFleetName transmits the scan results.""
CargoScan
FireBest TOffScanResult",,,
tOffCargoScanHostile,DialogOptionSelected,"$option == tOff_scan_continue
$entity.isHostile","ShowDefaultVisual
EndConversation","However, instead of proceeding with the scan, the $faction $fleetName shuts down comms and powers up combat systems.",,
tOffCargoScanHostileStronger,DialogOptionSelected,"$option == tOff_scan_continue
$entity.isHostile
$entity.relativeStrength < 0","MakeOtherFleetAggressive tOff false
MakeOtherFleetPreventDisengage tOff false
ShowDefaultVisual
EndConversation","However, instead of proceeding with the scan, the $faction $fleetName shuts down comms and powers up combat systems.",,
tOffCargoScanPods,TOffScanResult,$scan_podsFound score:1000,unset $scan_podsFound,"The $faction $personRank pauses and looks off-screen.

""But what about these cargo pods, which, let me check - why, they do contain illegal cargo. Not yours, are they? No? Excellent. We'll be confiscating the contents, then.""",0:tOff_podsCont:Continue,
tOffCargoScanPodsCont,DialogOptionSelected,$option == tOff_podsCont,FireBest TOffScanResult,,,
tOffCargoScanClean,TOffScanResult,"!$scan_contrabandFound
!$scan_suspiciousCargoFound",,"$PersonRank $personName looks vaguely displeased.

""If I catch you running with the transponder off again, you won't get off so easily.""

The comm link is cut before you have a chance to respond.",0:tOff_cleanCont1:Continue,
tOffCargoScanSuspicious,TOffScanResult,$scan_suspiciousCargoFound,,"While the scan finds no overt contraband, the quantity of cargo found, combined with indirect evidence of your prior black market activities, is enough to raise suspicions.

It is not, however, enough to do anything about. Correspondingly, $personRank $personName looks displeased.

""I'll see you again, you can be sure of it,"" $heOrShe grinds out before cutting the comm link.",0:tOff_cleanCont1:Continue,
tOffCargoScanClean2,DialogOptionSelected,$option == tOff_cleanCont1,"MakeOtherFleetPreventDisengage tOff false
BroadcastCancelPlayerAction 5000 $sawPlayerTransponderOff
ShowDefaultVisual
EndConversation NO_CONTINUE
$sourceMarket.smugglingScanTimeout = true 30",,,
tOffCargoScanContraband,TOffScanResult,$scan_contrabandFound score:10,,"""Well, well. Just as I suspected, we've got a smuggler here. Per standard $faction procedure, you're required to eject the contraband into space, for pickup or incineration at the discretion of the patrol commander.""

$PersonRank $personLastName looks rather pleased, and you suspect that ""pickup"" rather than ""incineration"" might be the order of the day.","0:tOff_comply_contraband:Surrender the contraband and cut the comm link
1:tOff_refuse:Refuse and cut the comm link",
tOffCargoScanContrabandSurrender,DialogOptionSelected,$option == tOff_comply_contraband,"CargoScanApplyResult $scan_cargoScanResult
MakeOtherFleetPreventDisengage tOff false
BroadcastCancelPlayerAction 5000 $sawPlayerTransponderOff
ShowDefaultVisual
EndConversation
$sourceMarket.smugglingScanTimeout = true 30",,,
tOffRefuse,DialogOptionSelected,$option == tOff_refuse,"$entity.ignorePlayerCommRequests = true 0
unset $entity.transponderOffConv
AdjustRep $faction.id TRANSPONDER_OFF_REFUSE
AdjustRepActivePerson TRANSPONDER_OFF_REFUSE
MakeHostileWhileTOff tOff true 7
ShowDefaultVisual
EndConversation
$sourceMarket.smugglingScanTimeout = true 30",,,
# cargo scan from smuggling suspicion,,,,,,
cargoScanInitial,BeginFleetEncounter,"!$cargoScan_didAlready
!$isHostile
$pursuePlayer_smugglingScan score:50","$cargoScan_didAlready = true 0
MakeOtherFleetPreventDisengage cargoScan true
#MakeOtherFleetAggressive cargoScan true
MakeOtherFleetAggressive tOff false
unset $ignorePlayerCommRequests
$cargoScanConv = true 0
AddText ""You're being hailed by the $faction $otherShipOrFleet."" $faction.baseColor
OpenComms",,,
cargoScanFirstComms,OpenCommLink,$entity.cargoScanConv score:100,"AddText ""\""Attention: your fleet matches the profile of a suspected smuggler posted by $market authorities. You're hereby ordered to submit to a cargo scan.\""""
",,"0:cargoScan_comply:Allow the scan
1:cargoScan_refuse:Refuse and cut the comm link",
,,,,,,
cargoScanStart,DialogOptionSelected,$option == cargoScan_comply,"AddText ""After a brief wait, the $faction $otherFleetName transmits the scan results.""
CargoScan
FireBest CargoScanResult",,,
cargoScanPods,CargoScanResult,$scan_podsFound score:1000,unset $scan_podsFound,"The $faction $personRank pauses and looks off-screen.

""But what about these cargo pods, which, let me check - why, they do contain illegal cargo. Not yours, are they? No? Excellent. We'll be confiscating the contents, then.""",0:scan_podsCont:Continue,
cargoScanPodsCont,DialogOptionSelected,$option == scan_podsCont,FireBest CargoScanResult,,,
cargoScanClean,CargoScanResult,"!$scan_contrabandFound
!$scan_suspiciousCargoFound",,"$PersonRank $personName looks vaguely displeased.

""Well, everything looks clean this time.""

The comm link is cut before you have a chance to respond.",0:cargoScan_cleanCont:Continue,
cargoScanSuspicious,CargoScanResult,$scan_suspiciousCargoFound,,"While the scan finds no overt contraband, the quantity of cargo found, combined with indirect evidence of your prior black market activities, is enough to raise suspicions.

It is not, however, enough to do anything about. Correspondingly, $personRank $personName looks displeased.

""I'll see you again, you can be sure of it,"" $heOrShe grinds out before cutting the comm link.",0:cargoScan_cleanCont:Continue,
cargoScanClean2,DialogOptionSelected,$option == cargoScan_cleanCont,"MakeOtherFleetPreventDisengage cargoScan false
MakeOtherFleetAggressive cargoScan false
unset $entity.pursuePlayer_smugglingScan
unset $entity.cargoScanConv
$entity.smugglingScanComplete = true 1
ShowDefaultVisual
EndConversation NO_CONTINUE",,,
cargoScanContraband,CargoScanResult,$scan_contrabandFound score:10,,"""Well, well. Just as I suspected, we've got a smuggler here. Per standard $faction procedure, you're required to eject the contraband into space, for pickup or incineration at the discretion of the patrol commander.""

$personRank $personLastName looks rather pleased, and you suspect that ""pickup"" rather than ""incineration"" might be the order of the day.","0:cargoScan_comply_contraband:Surrender the contraband and cut the comm link
1:cargoScan_refuse:Refuse and cut the comm link",
cargoScanContrabandSurrender,DialogOptionSelected,$option == cargoScan_comply_contraband,"CargoScanApplyResult $scan_cargoScanResult
MakeOtherFleetPreventDisengage cargoScan false
MakeOtherFleetAggressive cargoScan false
unset $entity.pursuePlayer_smugglingScan
unset $entity.cargoScanConv
$entity.smugglingScanComplete = true 1
ShowDefaultVisual
EndConversation",,,
cargoScanRefuse,DialogOptionSelected,$option == cargoScan_refuse,"$entity.ignorePlayerCommRequests = true 0
unset $entity.cargoScanConv
unset $entity.pursuePlayer_smugglingScan
$entity.smugglingScanComplete = true 1
AdjustRep $faction.id CARGO_SCAN_REFUSE
AdjustRepActivePerson CARGO_SCAN_REFUSE
ShowDefaultVisual
EndConversation",,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
# Smuggling investigation inspector,,,,,,
ise_greetingTOn,PickGreeting,"$ise_investigator
$player.transponderOn
!CallEvent $ise_eventRef paidBribe",ShowPersonVisual,"After a short wait, your connection request is accepted.

$personName looks at you suspiciously.

""As I'm sure you're aware, I'm currently conducting a highly sensitive investigation, and have no time for idle chatter.""

You get the feeling that you might get further if you came into port without broadcasting your identity via the transponder.",0:cutCommLink:Cut the comm link,
ise_greetingTOff,PickGreeting,"$ise_investigator
!$player.transponderOn
!CallEvent $ise_eventRef paidBribe","ShowPersonVisual
FireAll PopulateOptionsISE","After a short wait, your connection request is accepted.

$personName looks at you for a moment or two before speaking.

""As I'm sure you're aware, I'm currently conducting a highly sensitive investigation.""",,
ise_greetingPaid,PickGreeting,"$ise_investigator
CallEvent $ise_eventRef paidBribe",EndConversation,"After a short wait, your connection request is rejected.",,
ise_offerBribe,PopulateOptionsISE,,,,"0:ise_offerBribe:""I understand running a thorough investigation can be expensive...""
1:cutCommLink:Cut the comm link",
ise_offerBribeSel,DialogOptionSelected,"$option == ise_offerBribe
$player.credits >= $ise_bribeAmount",SetTextHighlights $ise_bribeAmountDGS,"""I'm so glad to meet someone who understands the issues.

Having proper funding - say, an extra $ise_bribeAmountDGS credits - would ensure that this investigation could reach a speedy and satisfactory conclusion.""","0:ise_offerBribeAmount:Offer a ""donation"" of $ise_bribeAmountDGS credits
1:cutCommLink:Cut the comm link",
ise_offerBribeSelNotEnough,DialogOptionSelected,$option == ise_offerBribe,SetTextHighlights $ise_bribeAmountDGS,"""Your interest in the matter is duly noted, but it doesn't sound like you're really ready to help me resolve this misunderstanding. Something more like, oh, $ise_bribeAmountDGS credits? That could facilitate a proper investigation.""

""Now I have fascinating reports about you to read over, so come back when you're serious.""",0:cutCommLink:Cut the comm link,
ise_offerBribeAmountSel,DialogOptionSelected,$option == ise_offerBribeAmount,"AddText ""Lost $ise_bribeAmountDGS credits"" textEnemyColor
AddText ""\""Thank you, citizen. I'm sure my investigation will reach a proper conclusion in due time.\""""
SubCredits $ise_bribeAmount
CallEvent $ise_eventRef setBribePaid",,0:cutCommLink:Cut the comm link,
# Good reputation with other faction investigation inspector,,,,,,
igr_greetingTOn,PickGreeting,"$igr_investigator
$player.transponderOn
!CallEvent $igr_eventRef paidBribe",ShowPersonVisual,"After a short wait, your connection request is accepted.

$personName looks at you suspiciously.

""As I'm sure you're aware, I'm currently conducting a highly sensitive investigation, and have no time for idle chatter. Certainly not with someone that's known to be a person of interest.""

The slight emphasis on ""known"" gives you the feeling that you might get further if you came into port without broadcasting your identity via the transponder.",0:cutCommLink:Cut the comm link,
igr_greetingTOff,PickGreeting,"$igr_investigator
!$player.transponderOn
!CallEvent $igr_eventRef paidBribe",ShowPersonVisual,"After a short wait, your connection request is accepted.

$personName looks at you for a moment or two before speaking.

""As I'm sure you're aware, I'm currently conducting a highly sensitive investigation.""","0:igr_offerBribe:""I just want to make sure you have the resources for a thorough investigation...""
1:cutCommLink:Cut the comm link",
igr_greetingPaid,PickGreeting,"$igr_investigator
CallEvent $igr_eventRef paidBribe",EndConversation,"After a short wait, your connection request is rejected.",,
igr_greetingReject,PickGreeting,"$igr_investigator
$personFaction.numGRInvestigations >= 2 score:100",ShowPersonVisual,"After a short wait, your connection request is accepted.

$personName looks at you for a moment or two before speaking.

""As I'm sure you're aware, I'm currently conducting a highly sensitive investigation.""","0:igr_offerBribe:""I just want to make sure you have the resources for a thorough investigation...""
1:cutCommLink:Cut the comm link",
igr_offerBribeSel,DialogOptionSelected,"$option == igr_offerBribe
$player.credits >= $igr_bribeAmount",SetTextHighlights $igr_bribeAmountDGS,"""I'm so glad to meet someone who understands the difficulties involved.

Having proper funding - say, an extra $igr_bribeAmountDGS credits - would ensure that this investigation could reach a speedy and satisfactory conclusion.""","0:igr_offerBribeAmount:Offer a ""donation"" of $igr_bribeAmountDGS credits
1:cutCommLink:Cut the comm link",
igr_offerBribeRejectedSel,DialogOptionSelected,"$option == igr_offerBribe
$personFaction.numGRInvestigations >= 2 score:100",,"""Your concern is noted, citizen, but $thePersonFaction is providing me with all the resources I need.""",0:cutCommLink:Cut the comm link,
igr_offerBribeSelNotEnough,DialogOptionSelected,$option == igr_offerBribe,SetTextHighlights $igr_bribeAmountDGS,"""Your interest in the matter is duly noted, but it doesn't sound like you're really ready to help me resolve this misunderstanding. Something more like, oh, $ise_bribeAmountDGS credits? That could facilitate a proper investigation."" 

""Now I have some fascinating reports about you to review, so come back when you're serious.""",0:cutCommLink:Cut the comm link,
igr_offerBribeAmountSel,DialogOptionSelected,$option == igr_offerBribeAmount,"AddText ""Lost $igr_bribeAmountDGS credits"" textEnemyColor
AddText ""\""Thank you, citizen. I'm sure my investigation will reach a proper conclusion in due time.\""""
SubCredits $igr_bribeAmount
CallEvent $igr_eventRef setBribePaid
FireBest IGRBribeEnd",,,
igr_offerBribeAccepedEndWarning,IGRBribeEnd,$personFaction.numGRInvestigations == 1,,"$personName hesitates and switches to a more secure channel before speaking.

""I'm telling you this because I don't want you to think that I haven't been looking out for you. There's considerable pressure from the top for this investigation to reach certain conclusions.

Should there be another $personFaction investigation into your ties with any other factions, I don't think you'll be able to influence the outcome.""",0:cutCommLink:Cut the comm link,
igr_offerBribeAccepedEndNormal,IGRBribeEnd,,,,0:cutCommLink:Cut the comm link,
,,,,,,
remnantStationFleetOpenDefault,BeginFleetEncounter,"$isStation
$faction.id == remnant
!$printedDesc",$printedDesc = true 0,"The grim expanse of the remnant battlestation fills your viewscreen. A bridge officer re-scales the tactical target display so that its entire mass can be seen at once. 

A relic from the First AI War, the station nonetheless appears to be fully armed and operational.

The combat analysis system churns for a few seconds and then beeps angrily instead of producing the usual range of tactical recommendations.",,
remnantStationFleetOpenDamaged,BeginFleetEncounter,"$isStation
$damagedStation
$faction.id == remnant
!$printedDesc",$printedDesc = true 0,"The grim expanse of the Remnant battlestation fills your viewscreen. A bridge officer re-scales the tactical target display so that its entire mass can be seen at once. 

A relic from the First AI War, the station's long arc gapes with empty sockets where weapons platforms and citadels were once present. Despite the obvious damage, the station is armed and operational.

The combat analysis system churns for a few seconds and then beeps angrily instead of producing the usual range of tactical recommendations.",,
# SALVAGE,,,,,,
sal_default,OpenInteractionDialog,$tag:salvageable,"SalvageGenFromSeed
FireBest ShowSalvageEntityDetails
FireBest SalvageCheckHostile",,,
sal_derelictDefault,OpenInteractionDialog,"$tag:salvageable
$faction.id == derelict","SalvageGenFromSeed
FireBest ShowSalvageEntityDetails
FireBest SalvageCheckHostile",Your $shipOrFleet approaches a $nameInText left from the initial Domain exploration of the Sector.,,
sal_scavengeDebris,OpenInteractionDialog,"$tag:salvageable
$customType == debris_field_shared score:100","SalvageGenFromSeed
ShowDefaultVisual
SalvageEntity descDebris
FireBest SalvageCheckHostile",Your $shipOrFleet assumes a stable orbit relative to the debris field.,,
,,,,,,
sal_hostileNearby,SalvageCheckHostile,HostileFleetNearbyAndAware,SetShortcut defaultLeave ESCAPE,"A nearby hostile fleet is tracking your movements, making exploration impossible.",100:defaultLeave:Leave,
sal_noHostileNearby,SalvageCheckHostile,!HostileFleetNearbyAndAware,"$salvageLeaveText = Leave 0
FireAll PopulateSalvageOptions1",,,
,,,,,,
# Details/description printed on initial interaction,,,,,,
sal_defaultDetails,ShowSalvageEntityDetails,,"ShowDefaultVisual
PrintDescription 1",,,
sal_probeDetails,ShowSalvageEntityDetails,$customType == derelict_probe,"ShowDefaultVisual
FireBest DerelictPrintExtraInfo","Pitted by small impacts, the probe's hull displays iridescence typical of fearsome radiation scarring. Though this probe's manufacture could well date to a thousand cycles ago, some systems are still nominally active.",,
sal_surveyShipDetails,ShowSalvageEntityDetails,$customType == derelict_survey_ship,"ShowDefaultVisual
FireBest DerelictPrintExtraInfo",The ancient Domain-era automated survey ship has been ravaged by centuries of exposure to charged particles and high velocity impacts of interstellar dust. Some systems still appear to be nominally active.,,
sal_mothershipDetails,ShowSalvageEntityDetails,$customType == derelict_mothership,"ShowDefaultVisual
FireBest DerelictPrintExtraInfo","The vast bulk of the automated exploration mothership is burned and battered by centuries of service to the Domain, a drifting forgotten hulk, though sensors indicate that some systems are still nominally active.",,
sal_derelictDefConstructionInfo,DerelictPrintExtraInfo,$global.defeatedDerelictStr >= 50,,"Sensor returns indicate unusually short-lived charged particles near the derelict. Density distribution in the internal structure has also changed from patterns extrapolated from your previous encounters with Domain-era exploration vessels, as if internal masses have been removed or intentionally redistributed.",,
sal_wreckDetails,ShowSalvageEntityDetails,$customType == wreck,"ShowDefaultVisual
PrintWreckDescription",,,
,,,,,,
# Explore/Leave options and actions,,,,,,
sal_defaultLeave1,PopulateSalvageOptions1,,SetShortcut defaultLeave ESCAPE,,100:defaultLeave:$salvageLeaveText,
sal_explore,PopulateSalvageOptions1,$customType != debris_field_shared,,,0:salExplore:Explore,
sal_assess,PopulateSalvageOptions1,$customType == debris_field_shared,,,0:salExplore:Assess,
sal_defenders,DialogOptionSelected,"$option == salExplore
$hasDefenders",FireBest TriggerAutomatedDefenses,,,
sal_noDefenders,DialogOptionSelected,$option == salExplore,FireBest CheckSalvageSpecial,,,
,,,,,,
# Descriptions of automated defenders,,,,,,
sal_printDefaultDefenders,TriggerAutomatedDefenses,,SalvageDefenderInteraction,"As your $shipOrFleet moves in closer, new energy signatures are detected near the $shortName.",,
sal_printDebrisDefenders,TriggerAutomatedDefenses,$customType == debris_field_shared,SalvageDefenderInteraction,"As your $shipOrFleet moves in closer, new energy signatures are detected near a larger pieces of debris.",,
sal_triggerProbeDefenders,TriggerAutomatedDefenses,$customType == derelict_probe,SalvageDefenderInteraction,"As your $shipOrFleet moves in closer, several energy signatures are detected coming online inside the probe's hold.",,
sal_triggerSurveyShipDefenders,TriggerAutomatedDefenses,$customType == derelict_survey_ship,SalvageDefenderInteraction,"As your $shipOrFleet moves in closer, multiple energy signatures are detected coming online from various points on and within the flayed hull of the survey ship.",,
sal_triggerMothershipDefendersBoth,TriggerAutomatedDefenses,"$customType == derelict_mothership
$hasStation
$hasNonStation",SalvageDefenderInteraction,"As your $shipOrFleet moves in closer, numerous strong energy signatures are detected coming online inside the darkened work-bays of the mothership's vast hulk. Your sensors also detect several weapon emplacements powering up on the mothership itself.",,
sal_triggerMothershipDefendersOnlyDrones,TriggerAutomatedDefenses,"$customType == derelict_mothership
$hasNonStation",SalvageDefenderInteraction,"As your $shipOrFleet moves in closer, numerous strong energy signatures are detected coming online inside the darkened work-bays of the mothership's vast hulk.",,
sal_triggerMothershipDefendersOnlyItself,TriggerAutomatedDefenses,"$customType == derelict_mothership
$hasStation",SalvageDefenderInteraction,"As your $shipOrFleet moves in closer, your sensors detect several weapon emplacements powering up in darkened crevasses on the mothership's vast hulk.",,
,,,,,,
"# Checking whether salvage results in a ""special"" find. This is where SalvageDefenderInteraction returns to.",,,,,,
sal_continuePostDefenders,BeatDefendersContinue,,,Your $shipOrFleet finishes its approach to the $nameInText without further incident.,0:salBeatDefendersContinue:Continue,
sal_continuePostDefendersDerelict,BeatDefendersContinue,$faction.id == derelict,,"As your $shipOrFleet finishes mopping up the automated defenses, a weak hyperwave ping is detected coming from the $shortName. It's unclear if this is random noise from a dying subsystem or some kind of encrypted signal.

Your $shipOrFleet finishes its approach to the $nameInText without further incident.",0:salBeatDefendersContinue:Continue,
sal_continuePostDefendersSelected,DialogOptionSelected,$option == salBeatDefendersContinue,FireBest CheckSalvageSpecial,,,
sal_checkSpecialFound,CheckSalvageSpecial,$salvageSpecialData != null,"ShowDefaultVisual
SalvageSpecialInteraction",,,
,,,,,,
"# If no special, go right to salvage. If there was a special, ""Continue"" to go to salvage",,,,,,
sal_checkSpecialNoneFound,CheckSalvageSpecial,,"ShowDefaultVisual
FireBest BeginSalvage",,,
sal_specialFinished,SalvageSpecialFinished,,,,0:salSpecialContinue:Continue,
sal_specialContinueSelected,DialogOptionSelected,$option == salSpecialContinue,FireBest BeginSalvage,,,
sal_specialFinishedNoContinue,SalvageSpecialFinishedNoContinue,,FireBest BeginSalvage,,,
,,,,,,
# Actual salvage process,,,,,,
sal_showRatingAndCost,BeginSalvage,,"SalvageEntity showCost
FireAll PopulateSalvageOptions2",,,
sal_optionLeave,PopulateSalvageOptions2,,SetShortcut defaultLeave ESCAPE,,100:defaultLeave:$salvageLeaveText,
#sal_optionSalvageDisabledCost,PopulateSalvageOptions2,"!$canSalvage
!$canAffordSalvage
$canDoSalvageRating","SetEnabled salSalvage false
SetTooltip salSalvage ""Your fleet does not have the necessary resources to run a proper salvage operation here.""",,0:salSalvage:Begin salvage operations,
#sal_optionSalvageDisabledRating,PopulateSalvageOptions2,"!$canSalvage
$canAffordSalvage
!$canDoSalvageRating","SetEnabled salSalvage false
SetTooltip salSalvage ""The salvage difficulty rating is too high for you to perform a proper salvage operation.""",,0:salSalvage:Begin salvage operations,
#sal_optionSalvageDisabledBoth,PopulateSalvageOptions2,"!$canSalvage
!$canDoSalvageRating
!$canAffordSalvage","SetEnabled salSalvage false
SetTooltip salSalvage ""The salvage difficulty rating is too high for you to perform a proper salvage operation. In addition, your fleet does not have the necessary resources to run a proper salvage operation here.""",,0:salSalvage:Begin salvage operations,
sal_optionSalvageEnabled,PopulateSalvageOptions2,,,,0:salSalvage:Begin salvage operations,
#sal_optionDemolish,PopulateSalvageOptions2,$customType != debris_field_shared,"SetTooltip salDemolish ""Scavenging through the resulting debris field will produce about half the salvage, compared to a proper salvage operation.""",,1:salDemolish:Pound it into scrap,
sal_optionCheckAccidents,DialogOptionSelected,$option == salSalvage,SalvageEntity checkAccidents,,,
sal_salvageOptionSelected,DialogOptionSelected,$option == salPerform,"SalvageEntity performSalvage
FireBest PostSalvagePerform",,,
sal_demolishOptionSelected,DialogOptionSelected,$option == salDemolish,SetShortcut defaultLeave ESCAPE,Salvage crews set targeting beacons at key points in the structure.,"0:salDemolishConfirm:Give the order to fire
100:defaultLeave:Leave",
sal_demolishOptionConfirmed,DialogOptionSelected,$option == salDemolishConfirm,SalvageEntity demolish,,,
,,,,,,
,,,,,,
# CARGO PODS,,,,,,
pods_start,OpenInteractionDialog,$customType == cargo_pods,"ShowDefaultVisual
CargoPods printDesc
FireAll CargoPodsOptions
FireAll CargoPodsOptionsUpdate",,,
pods_open,CargoPodsOptions,!$locked,,,0:podsOpen:Examine pod contents,
pods_leave,CargoPodsOptions,,SetShortcut defaultLeave ESCAPE,,100:defaultLeave:Leave,
pods_stabilize,CargoPodsOptions,,,,1:podsStabilize:Put the pods into a stable orbit,
pods_stabilizeDisable,CargoPodsOptionsUpdate,$inHyperspace,"SetEnabled podsStabilize false
SetTooltip podsStabilize ""Can not be done in hyperspace.""",,,
pods_stabilizeDisableDidAlready,CargoPodsOptionsUpdate,"!$inHyperspace
$stabilized
$daysLeft > 90","SetEnabled podsStabilize false
SetTooltip podsStabilize ""The pods are already in a semi-stable orbit and further efforts will not yield meaningful results.""",,,
pods_break,CargoPodsOptions,"$locked
!$canUnlock",,,"0:podsBreak:Blast the locks open
100:defaultLeave:Leave",
pods_unlock,CargoPodsOptions,"$locked
$canUnlock",,,"0:podsOpen:Transmit the keycode and examine the contents
100:defaultLeave:Leave",
pods_openOption,DialogOptionSelected,$option == podsOpen,"unset $locked
unset $trapped
CargoPods openCargo",,,
pods_breakOption,DialogOptionSelected,"$option == podsBreak
!$trapped","CargoPods breakLocks
unset $locked
unset $trapped",,,
pods_breakOption2,DialogOptionSelected,"$option == podsBreak
$trapped",CargoPods destroy,"Unfortunately, the pods were wired to explode unless the correct authorization code was given, and the cargo is destroyed in its entirety.",100:defaultLeave:Leave,
pods_stabilizeSel,DialogOptionSelected,$option == podsStabilize,"CargoPods computeStabilizeData
AddText ""Stabilizing the orbit of the cargo pods will require $stabilizeSupplies supplies and will put them on a stable orbit for approximately $stabilizeDays days.""
SetTextHighlights $stabilizeSupplies $stabilizeDays
AddText ""Adding or removing any cargo afterwards will destabilize the orbit.""
FireBest CargoPodsShowAvailableSupplies",,"0:podsStabConfirm:Proceed
1:podsStabAbort:Never mind",
pods_stabilizeSuppliesEnough,CargoPodsShowAvailableSupplies,$stabilizeSupplies < $player.supplies,SetTextHighlights $player.supplies,You have $player.supplies supplies available.,,
pods_stabilizeSuppliesNotEnough,CargoPodsShowAvailableSupplies,$stabilizeSupplies >= $player.supplies,"SetTextHighlightColors bad
SetTextHighlights $player.supplies
SetEnabled podsStabConfirm false",You have $player.supplies supplies available.,,
pods_stabConfirmSel,DialogOptionSelected,$option == podsStabConfirm,"CargoPods stabilize
FireAll CargoPodsOptions
FireAll CargoPodsOptionsUpdate",,,
pods_stabAbortSel,DialogOptionSelected,$option == podsStabAbort,"FireAll CargoPodsOptions
FireAll CargoPodsOptionsUpdate",,,
,,,,,,
,,,,,,
# luddic shrine interaction test by David! (Having some Fun.),,,,,,
shrineOpenDialog,OpenInteractionDialog,$tag:luddicShrine,"PrintDescription 1
AddText ""The landing bay is filled with parties of Luddic pilgrims dressed in traditional handweave meeting with subcurates. An attendant looks you over suspiciously and inquires about what business you have coming here.""
ShowDefaultVisual
FireBest ShrineMainOptions",,,
shrineMainOptions,ShrineMainOptions,,"SetShortcut shrineLeave ""ESCAPE""",,"0:shrineVisit:Visit
1:shrineMakeOffering:Make an offering
10:shrineLeave:Leave",
shrineVisit,DialogOptionSelected,$option == shrineVisit,"SetShortcut shrineLeave ""ESCAPE""","The attendant receives your request with only the subtlest disapproval. To your surprise, a subcurate approaches to escort you to the shrine's viewing chamber.

A vast, dim gallery opens upon a hundred-meter diamond plate window allowing a full view of the glory of Kumari Aru. Here, pilgrims quietly contemplate the miracle of Creation, taking in the sublime and terrible beauty of the gas giant looming below. Storm systems the size of a standard terrestrial world churn with slow majesty, inner-lit with green-violet sheet lightning, teeming with xenolife. Does something incomprehensible look up from the lee of a dark cloudbank at the bright point in that alien sky?

After a time, you return to your ship.",shrineLeave:Leave,
shrineLeave,DialogOptionSelected,$option == shrineLeave,DismissDialog,,,
,,,,,,
shrineOfferingAlreadyMade,DialogOptionSelected,"$option == shrineMakeOffering
$offeringMade score:100",,You've made a contribution recently so providing another at this time might be viewed as an unseemly act of pride.,,
shrineOfferingEnough,DialogOptionSelected,"$option == shrineMakeOffering
$player.supplies >= 10","SetTextHighlightColors buttonShortcut
SetTextHighlights 10","You inquire with the subcurate about the possibility of contributing to the maintenance of this holy site. With a warm smile, the subcurate explains that an offering of 10 units of supplies would do much to assist the Church in its observance of sacred duties.","0:shrineGiveOffering:Give 10 supplies
1:shrineCancelOffering:Never mind",
shrineOfferingNotEnough,DialogOptionSelected,"$option == shrineMakeOffering
$player.supplies < 10","SetTextHighlightColors buttonShortcut
SetTextHighlights 10","You inquire with the subcurate about the possibility of contributing to the maintenance of this holy site. An offering of 10 units of supplies would do much to assist the Church in its observance of sacred duties. Unfortunately you do not have enough supplies on hand.

The subcurate gives a sad smile. ""I see that your intent is good. Perhaps you would like to attend the free lunch we offer?""",,
shrineGiveOffering,DialogOptionSelected,$option == shrineGiveOffering,"AddText ""A subcurate accepts your offering with prayer and thanks.""
AddRemoveCommodity supplies -10 true
AdjustRep luddic_church SHRINE_OFFERING
$offeringMade = true 60
FireBest ShrineMainOptions",,,
shrineCancelOffering,DialogOptionSelected,$option == shrineCancelOffering,FireBest ShrineMainOptions,,,
,,,,,,
# AnalyzeEntityMission entity interaction,,,,,,
aem_runSensorPackageOptionHostile,OpenInteractionDialog,"$aem_target score:1000
HostileFleetNearbyAndAware","ShowDefaultVisual
SetShortcut defaultLeave ESCAPE","Your $shipOrFleet gets within range of the $nameInText that you've been contracted to run a black-box sensor package on.

However, a hostile fleet is tracking your movements, leaving you no time to stop and run the sensor package.",100:defaultLeave:Leave,
aem_runSensorPackageOption,OpenInteractionDialog,"$aem_target score:1000
!HostileFleetNearbyAndAware","ShowDefaultVisual
SetShortcut defaultLeave ESCAPE",Your $shipOrFleet gets within range of the $nameInText that you've been contracted to run a black-box sensor package on.,"0:aem_runPackage:Run the sensor package
100:defaultLeave:Leave",
aem_runSensorPackageOptionSel,DialogOptionSelected,$option == aem_runPackage,CallEvent $aem_eventRef runPackage,"You tap a button to execute the black-box sensor package and wait for it to finish. On completion, it provides an escrow key that authorizes the agreed-upon payment to be transferred to your account.

Presumably, it will transmit the scan results on a secure channel when you're near a comm relay, and then delete itself from your systems.",0:aem_continue:Continue,
aem_continueOptionSel,DialogOptionSelected,$option == aem_continue,FireBest OpenInteractionDialog,,,
,,,,,,
# SurveyPlanetMission,,,,,,
spm_planetApproach,OtherPlanetInteractionText,"$market.isPlanetConditionMarketOnly
!$market.isSurveyed
$spm_target",,It's the planet you've been contracted to run a full survey on.,,
,,,,,,
# getting a faction commission,,,,,,
cmsn_askForCommissionOpt,PopulateOptions,"$isPerson
Commission personCanGiveCommission
!Commission hasFactionCommission",,,"20:cmsn_askCommission:""I'd like to be commissioned by $theFaction""",
cmsn_resignCommissionOpt,PopulateOptions,"$isPerson
Commission personCanGiveCommission
Commission hasFactionCommission",,,"20:cmsn_resignCommission:""I'd like to resign my $faction commission""",
cmsn_lolNo,DialogOptionSelected,"$option == cmsn_askCommission
$faction.isHostile score:100","SetEnabled cmsn_askCommission false
FireBest CMSNTextRejectHostile",,,
cmsn_hasOther,DialogOptionSelected,"$option == cmsn_askCommission
!$faction.isHostile
Commission hasOtherCommission","SetEnabled cmsn_askCommission false
FireBest CMSNTextHasOther",,,
cmsn_doesNotMeetCriteria,DialogOptionSelected,"$option == cmsn_askCommission
!Commission playerMeetsCriteria","SetEnabled cmsn_askCommission false
FireBest CMSNTextUnsuited
Commission printRequirements",,,
cmsn_meetsCriteria,DialogOptionSelected,"$option == cmsn_askCommission
Commission playerMeetsCriteria",FireBest CMSNTextSuitedPart1,,0:cmsn_continueMeetsReq:Continue,
cmsn_meetsCriteria2,DialogOptionSelected,$option == cmsn_continueMeetsReq,"Commission printInfo
FireBest CMSNTextSuitedPart2",,"0:cmsn_accept:Accept $factionAOrAn $faction commission
1:cmsn_cancel:""Perhaps I'm not quite ready for this.""",
cmsn_accept,DialogOptionSelected,$option == cmsn_accept,"FireBest CMSNTextWelcomePart1
Commission accept
FireBest CMSNTextWelcomePart2
FireAll PopulateOptions",,,
cmsn_cancel,DialogOptionSelected,$option == cmsn_cancel,"FireBest CMSNTextChangeMind
FireAll PopulateOptions",,,
cmsn_resignShowOptions,DialogOptionSelected,$option == cmsn_resignCommission,FireBest CMSNResignAskToConfirm,,"0:cmsn_resignConfirm:""Yes, I'm sure.""
1:cmsn_resignCancel:""Never mind, I've reconsidered.""",
cmsn_resignConfirm,DialogOptionSelected,$option == cmsn_resignConfirm,"FireBest CMSNResignConfirmed
Commission resign
FireAll PopulateOptions",,,
cmsn_resignCancel,DialogOptionSelected,$option == cmsn_resignCancel,"FireBest CMSNResignCancelled
FireAll PopulateOptions",,,
,,,,,,
"# default commission conversation strings, copy and adjust this section for faction-specific conversation flavor",,,,,,
CMSNTextRejectHostile_default,CMSNTextRejectHostile,,,"""Is this some kind of joke? If you are who you say you are, you're on several $faction wanted lists.""",,
CMSNTextHasOther_default,CMSNTextHasOther,,,"""You're already commissioned by $theOtherCommissionFaction. You'll have to resign that commission before you can be commissioned by $theFaction.""",,
CMSNTextUnsuited_default,CMSNTextUnsuited,,,"""I'm sorry, but you don't meet our criteria for receiving a commission.""",,
CMSNTextSuitedPart1_default,CMSNTextSuitedPart1,,,"""Hmm, yes, you're a suitable candidate.

Accepting a commission is a serious matter. You will be required to fight enemies of $theFaction, wherever they may be found.

You'll be able to resign your commission at any time, though I don't imagine doing so would win you any friends.""",,
CMSNTextSuitedPart2_default,CMSNTextSuitedPart2,,,"""So, how about it? Still want to sign on?""",,
CMSNTextWelcomePart1_default,CMSNTextWelcomePart1,,,"""Excellent! Welcome to the service.""",,
CMSNTextWelcomePart2_default,CMSNTextWelcomePart2,,,"""Anything else I can do for you?""",,
CMSNTextChangeMind_default,CMSNTextChangeMind,,,"""Yes, not everyone has it in them to uphold the values of $theFaction to such a high standard. No shame in it.

Anything else I can do for you?""",,
CMSNResignAskToConfirm_default,CMSNResignAskToConfirm,,,"""Are you sure? $TheFaction needs people it can rely on, and turning your back like this won't be easily forgotten.""",,
CMSNResignConfirmed_default,CMSNResignConfirmed,,,"""I can see there's no changing your mind. Well, at least you had the courtesy to tender your resignation in person.""",,
CMSNResignCancelled_default,CMSNResignCancelled,,,"""A good decision. We can use people like you.""",,
,,,,,,
# Luddic Church commission,,,,,,
CMSNTextRejectHostile_luddic,CMSNTextRejectHostile,$faction.id == luddic_church,,"""Is this some kind of joke? If you are truly whom you claim to be, you've been condemned in multiple writs by the Most Holy Presbyteriat.""",,
CMSNTextHasOther_luddic,CMSNTextHasOther,$faction.id == luddic_church,,"""You're already commissioned by $theOtherCommissionFaction. The heart holds but one faith; until you resigned that commission, it would be quite unthinkable to be commissioned by the Church.""",,
CMSNTextUnsuited_luddic,CMSNTextUnsuited,$faction.id == luddic_church,,"""I am sorry, but you are not worthy of receiving a commission from the Church.""",,
CMSNTextSuitedPart1_luddic,CMSNTextSuitedPart1,$faction.id == luddic_church,,"""Hmm, yes, you have proven your faith through good works.

Accepting a commission is a serious matter. You will be required to fight enemies of the Church wherever they may be found; to uphold the 11 virtues; to condemn and abhor vice.

Your commission may be resigned at any time, though it would be the a very poor sign of faith in the Church. And in terms of worldly matters, it would be considered a black mark indeed by Ludd's faithful.""",,
CMSNTextSuitedPart2_luddic,CMSNTextSuitedPart2,$faction.id == luddic_church,,"""Will you accept this righteous mantle with the blessings of Ludd?""",,
CMSNTextWelcomePart1_luddic,CMSNTextWelcomePart1,$faction.id == luddic_church,,"""Praise be to the spirit of the stars! I am blessed to be the first to welcome you to this righteous service.""",,
CMSNTextWelcomePart2_luddic,CMSNTextWelcomePart2,$faction.id == luddic_church,,"""I shall not detain you from your holy work, but please do not hesitate to ask if there is anything I can do for you.""",,
CMSNTextChangeMind_luddic,CMSNTextChangeMind,$faction.id == luddic_church,,"""Indeed, not everyone is called to walk this path, beset as it is by violence, temptation, and hardship. Be not shamed to find a humbler path toward the spiritual love the Blessed Ludd has brought to our unworthy souls.   

Let me set aside the glorious and terrible to ask if there is anything else I can do for you?""",,
CMSNResignAskToConfirm_luddic,CMSNResignAskToConfirm,$faction.id == luddic_church,,"""Are you sure, child of Earth? The Church of Galactic Redemption is the worldly expression of Ludd's holy teachings, the only path to salvation not only of your own soul, but the means by which all humanity may raise itself from the scourge of collective sin.

I cannot sit in judgement of your soul; the spiritual consequence of your choice is between you and the Divine. But the faithful are but women and men of these fallen worlds, and they may see in you one who has turned their back on the path of the Blessed Ludd. You would be scorned by the Faithful.""",,
CMSNResignConfirmed_luddic,CMSNResignConfirmed,$faction.id == luddic_church,,"""I can see there's no changing your mind. Be wary of the path you tread, but remember that Ludd loved even those those that were betrayers in that final day.""",,
CMSNResignCancelled_luddic,CMSNResignCancelled,$faction.id == luddic_church,,"""A wise choice. Our spirits are tested in this work we do, and sometimes our faith falters. But remember always that the light of Ludd illuminates the righteous path, however dim it may seem in times of great difficulty.""",,
,,,,,,
# Hegemony commission,,,,,,
CMSNTextRejectHostile_hegemony,CMSNTextRejectHostile,$faction.id == hegemony,,"""Is this some kind of joke, citizen? If you are who you are claiming to be, you'd be on several top-level Ministry wanted lists. In fact, I'm going to have to report this entire conversation to Hegemony COMSEC.""",,
CMSNTextHasOther_hegemony,CMSNTextHasOther,$faction.id == hegemony,,"""You're already commissioned by $theOtherCommissionFaction. I don't know if loyalty means anything to you, citizen, but it is a core pillar of our values. You would have to resign that commission before you'd even be considered for commission as an auxiliary by the Hegemony.""",,
CMSNTextUnsuited_hegemony,CMSNTextUnsuited,$faction.id == hegemony,,"""You do not meet the criteria for receiving a commission, citizen.""",,
CMSNTextSuitedPart1_hegemony,CMSNTextSuitedPart1,$faction.id == hegemony,,"""Hmm, Fleet Intelligence has been watching you for some time it seems, and it says here that you clear the checks.

Accepting a commission with the Hegemony is a serious matter, citizen. You will be required to fight enemies of the Hegemony and assist in upholding law and order where the official apparatus cannot reach. Above all, you will dedicate yourself to fighting for the restoration of the Domain over human space.

I must inform you that you have the right to resign your commission at any time. And while there have been honourable circumstances for resignation in the past, between us, let me add that doing so would be considered highly suspicious by Fleet Intelligence, to say nothing of what the loyal Hegemony officer corps would think.",,
CMSNTextSuitedPart2_hegemony,CMSNTextSuitedPart2,$faction.id == hegemony,,"""By the power invested in me by the office of the High Hegemon, I offer you commission as auxilliary to the Hegemony Navy. Do you wish to sign on?""",,
CMSNTextWelcomePart1_hegemony,CMSNTextWelcomePart1,$faction.id == hegemony,,"""Excellent! Welcome to the service.""",,
CMSNTextWelcomePart2_hegemony,CMSNTextWelcomePart2,$faction.id == hegemony,,"""Is there anything else I can do for you, citizen?""",,
CMSNTextChangeMind_hegemony,CMSNTextChangeMind,$faction.id == hegemony,,"""Yes, not everyone has the strength of character to uphold the values of the Hegemony to the standards that are required. The Sector has need of merchants and shuttle pilots, after all. Those are also honourable careers in their own small way.

Anything else I can do for you?""",,
CMSNResignAskToConfirm_hegemony,CMSNResignAskToConfirm,$faction.id == hegemony,,"""Do you affirm to that, citizen, and agree that your recorded affirmation stand as record of your commitment? The Hegemony needs people it can rely on, and if you were to let us down it would not soon be forgotten.""",,
CMSNResignConfirmed_hegemony,CMSNResignConfirmed,$faction.id == hegemony,,"""I see. At least you were brave enough to tender your resignation in person.""",,
CMSNResignCancelled_hegemony,CMSNResignCancelled,$faction.id == hegemony,,"""A good decision. Despite what dissident agitprop may claim, the Hegemony does not ask blind obedience. It takes courage to first question then choose to re-affirm a commitment. We can use people like you in this troubled age.""",,
,,,,,,
# Tritachyon commission,,,,,,
CMSNTextRejectHostile_tritachyon,CMSNTextRejectHostile,$faction.id == tritachyon,,"""I'm surprised you initiated comms at all because not a few high-level directors have put personal bounties on a verified holo of your destruction. Not all enmity can be bought off, it seems. A bit of free advice: E-burn from this volume immediately.""",,
CMSNTextHasOther_tritachyon,CMSNTextHasOther,$faction.id == tritachyon,,"""You're already commissioned by $theOtherCommissionFaction. Due to the nature of the standard Tri-Tachyon non-compete agreement, you would be required to resign that commission before you could sign on with Tri-Tachyon. Please return when your outstanding obligations are dissolved.""",,
CMSNTextUnsuited_tritachyon,CMSNTextUnsuited,$faction.id == tritachyon,,"""I'm afraid that our human capital department reports that you simply don't meet the standards we expect from commissioned contractors at this time.""",,
CMSNTextSuitedPart1_tritachyon,CMSNTextSuitedPart1,$faction.id == tritachyon,,"""Hmm, yes, your resume is impressive. Our human capital department has been watching you for some time now.

Now understand that signing this commission contract with the Tri-Tachyon Corporation (and associated subsidiary incorporations) is a serious commitment. You will undertake that risk involved in fighting Company-designated belligerents be they pirates, anti-market agitators, or various state entities which engage in illegitimate search and seizure of Company property.

You'll be able to resign your commission at any time without financial penalty; generous terms indeed in my opinion. Were you to do so, that would mean you would be ... how to put it, thrown to the sharks? Competition in the Company is fierce, my friend, and if you withdraw from its legal protection, then we can't be responsible for what happens.""",,
CMSNTextSuitedPart2_tritachyon,CMSNTextSuitedPart2,$faction.id == tritachyon,,"""So, still want to sign? A fingerprint on the notification that just appeared on your TriPad would be sufficient.""",,
CMSNTextWelcomePart1_tritachyon,CMSNTextWelcomePart1,$faction.id == tritachyon,,"""Excellent! Let me be the first to welcome you to the Company. 

And, ah, would you mind if I added you on TriLink? I'm always looking to network with rising stars.""",,
CMSNTextWelcomePart2_tritachyon,CMSNTextWelcomePart2,$faction.id == tritachyon,,"""Is there anything else I can do for you now that you're a Valued Team Member?""",,
CMSNTextChangeMind_tritachyon,CMSNTextChangeMind,$faction.id == tritachyon,,"""Ah, you're shopping around to see who gives the best offer. Am I right? Sensible. A standard Tri-Tachyon NDA applies to the details we've discussed, naturally.

Anything else I can do for you today?""",,
CMSNResignAskToConfirm_tritachyon,CMSNResignAskToConfirm,$faction.id == tritachyon,,"""Are you sure? You'll be missing fantastic opportunities to advance your career; Tri-Tachyon rewards those who reward themselves, after all. And need I remind you there are those in the Company that might see this as a sign of... weakness.""",,
CMSNResignConfirmed_tritachyon,CMSNResignConfirmed,$faction.id == tritachyon,,"""I can see there's no changing your mind. Someone gave you a better offer, didn't they. No, don't say anything. I understand completely.

If they're paying that well, don't forget me if an opening comes up. In the meantime, I'd recommend you steer clear of Tri-Tachyon space for a while.""",,
CMSNResignCancelled_tritachyon,CMSNResignCancelled,$faction.id == tritachyon,,"""A wise choice. Tri-Tachyon respects Valued Team Members who are willing to negotiate to maintain and, dare I say it, advance their position.""",,
,,,,,,
# Persean League commission,,,,,,
CMSNTextRejectHostile_persean,CMSNTextRejectHostile,$faction.id == persean,,"""Is this some kind of joke? The one thing the League worlds can agree on is that you're a menace to the Sector. I will absolutely alert Combined Fleet Intelligence about this contact.""",,
CMSNTextHasOther_persean,CMSNTextHasOther,$faction.id == persean,,"""It seems you're already commissioned by $theOtherCommissionFaction. The League is built upon a respect for the independence of its constituents - or potential constituents - so accepting your service would be a breach of protocol. You'll have to resign that commission before signing on with the League.""",,
CMSNTextUnsuited_persean,CMSNTextUnsuited,$faction.id == persean,,"""I'm sorry, but it says here that you don't meet our criteria. We only commission those who have a proven record of upholding League interests and values.""",,
CMSNTextSuitedPart1_persean,CMSNTextSuitedPart1,$faction.id == persean,,"""Hmm, yes, you are in good standing and none of the League world databases have tagged you with veto.

Accepting a commission from the Persean League is a serious matter. You must learn and uphold the Eight Imperatives of the League charter; you will be required to fight those who would try to force their hegemony upon the free worlds of the Persean Sector; you will take part in a new future for humanity in all its forms, free from central domination by any one polity yet acting in concert toward mutual betterment. It is a noble ideal, my friend, and much to live up to.

For the sake of formality I shall inform you that you do have the right to resign your commission at any time. After resignation, the League would have no legal means to protect you from, shall we say, personal repercussions imposed by constituent members that may feel slighted. Just so you know.""",,
CMSNTextSuitedPart2_persean,CMSNTextSuitedPart2,$faction.id == persean,,"""So, how about it? The test on the Eight Imperatives is really just a formality, and although a League member can submit a commission veto for up to a cycle after signing, this only rarely happens. Do you accept?""",,
CMSNTextWelcomePart1_persean,CMSNTextWelcomePart1,$faction.id == persean,,"""Excellent! On behalf of the free worlds of the Sector, I welcome you to the Persean League.""",,
CMSNTextWelcomePart2_persean,CMSNTextWelcomePart2,$faction.id == persean,,"""Anything else I can do for you?""",,
CMSNTextChangeMind_persean,CMSNTextChangeMind,$faction.id == persean,,"""Yes, I understand. It is dangerous work, and it requires exceptional character to uphold the ideals of the League. There is no shame in turning down this commitment; after all it is for your freedom to make this decision that we fight.

Is there anything else I can do for you?""",,
CMSNResignAskToConfirm_persean,CMSNResignAskToConfirm,$faction.id == persean,,"""Are you certain? The League needs people like you it can rely on to uphold our principles. Although within your rights, if you leave now, less magnanimous constituents of the League may be suspicious or even vindictive at such a perceived betrayal of loyalty.""",,
CMSNResignConfirmed_persean,CMSNResignConfirmed,$faction.id == persean,,"""I can see there's no changing your mind. On behalf of the League, I thank you for the service you have performed to this date and your courtesy in tendering your resignation in person.

Now if you don't mind, there are a handful of forms I need to fill out to finalize this process.""",,
CMSNResignCancelled_persean,CMSNResignCancelled,$faction.id == persean,,"""I'm glad to hear you've changed your mind. The League can use people like you.""",,
,,,,,,
# Sindrian Diktat commission,,,,,,
CMSNTextRejectHostile_sindrian_diktat,CMSNTextRejectHostile,$faction.id == sindrian_diktat,,"""Is this some kind of joke? If you are the terrorist you say you are, there's an execution order for you signed by the Lion himself. I shall have to report this communication to my superior officer immediately.""",,
CMSNTextHasOther_sindrian_diktat,CMSNTextHasOther,$faction.id == sindrian_diktat,,"""The Sindrian Diktat honours loyalty, and you've come here like a guileless mercenary bearing another faction's flag. You would have to resign your commission with $theOtherCommissionFaction before you could even be considered to be commissioned into our movement.""",,
CMSNTextUnsuited_sindrian_diktat,CMSNTextUnsuited,$faction.id == sindrian_diktat,,"""Your are not fit to perform service for the Diktat. We only accept candidates that prove their strength and above all their passion for the admiral's great movement.""",,
CMSNTextSuitedPart1_sindrian_diktat,CMSNTextSuitedPart1,$faction.id == sindrian_diktat,,"""Hmm, we've had our eye on you for some time it seems. This intelligence summary makes it clear that you're a suitable candidate for commission into the Sindrian Diktat's volunteer force.

Accepting a commission into our glorious movement is a serious matter. You must pledge unwavering loyalty to our leader, Admiral Andrada, and the Sindrian Diktat he commands. You will fight our enemies, cleanse the Sector of the corrupt old order, and usher in a new age for our people. If you are lucky, you may even attain the glory of giving your life for the great cause.

Now it it technically possible to resign the Diktat commission, but this would reveal a deep betrayal of sacred loyalty. I pledged my blood to the Lion, and I would expect the same from you.",,
CMSNTextSuitedPart2_sindrian_diktat,CMSNTextSuitedPart2,$faction.id == sindrian_diktat,,"""Are you worthy? Will you pledge your life to the Sindrian Diktat?""",,
CMSNTextWelcomePart1_sindrian_diktat,CMSNTextWelcomePart1,$faction.id == sindrian_diktat,,"""Glory to the Lion of Sindria! You will be forged in conflict for new age!""",,
CMSNTextWelcomePart2_sindrian_diktat,CMSNTextWelcomePart2,$faction.id == sindrian_diktat,,"""Diktat party membership is automatic upon acceptance of commission, of course. The relevant ideological holo links will be forwarded to your TriPad.

Is there anything else you need?""",,
CMSNTextChangeMind_sindrian_diktat,CMSNTextChangeMind,$faction.id == sindrian_diktat,,"""Indeed, not all are strong enough to uphold the values of the Sindrian Diktat. We are warriors, you know, fighting for an age of renewed glory for the human race. The strong will be forged in this final conflict while the dross is swept aside, mere dust in the great river of history. 

If you are fit for service, all that remains is your choice of which side you will ultimately take. Think on that.""",,
CMSNResignAskToConfirm_sindrian_diktat,CMSNResignAskToConfirm,$faction.id == sindrian_diktat,,"""I hope this is not some kind of joke. Loyalty is the highest ideal of the Sindrian Diktat, as well you know. The Lion does not tolerate those who lack an iron conviction to our great movement.""",,
CMSNResignConfirmed_sindrian_diktat,CMSNResignConfirmed,$faction.id == sindrian_diktat,,"""I see all too clearly now that you have not the spine for our great work.

Begone from my comms, traitor. I shall be reporting.""",,
CMSNResignCancelled_sindrian_diktat,CMSNResignCancelled,$faction.id == sindrian_diktat,,"""I will be lenient and ... not ... report this serious error of judgment. I'm taking this risk because I still believe you can be a part of this great work we have been called upon to perform.

Step carefully.""",,
,,,,,,
,,,,,,
# turning AI cores in,,,,,,
aiCores_turnInOption,PopulateOptions,"$isPerson
AICores personCanAcceptCores",FireBest DisableTurnInCoresOptionIfNeeded,,"10:aiCores_startTurnIn:""I'd like to turn in these AI cores that I've acquired...""",
aiCores_disableTurnInOption,DisableTurnInCoresOptionIfNeeded,!AICores playerHasCores,"SetTooltip aiCores_startTurnIn ""You do not have any AI cores in your posession.""
SetEnabled aiCores_startTurnIn false",,,
aiCores_turnInOptionSelGeneric,DialogOptionSelected,$option == aiCores_startTurnIn,FireAll PopulateCoresTurnInOptions,"""A fascinating offer. Why, if one of the major factions caught you with these, they might just seize them outright. Tell you what - I'll do you a favour and give you a good price.""",,
aiCores_turnInOptionSelLuddic,DialogOptionSelected,"$option == aiCores_startTurnIn
$faction.id == luddic_church",FireAll PopulateCoresTurnInOptions,"""You were right to bring these to me. I shall contact the Knight Commander to take possession of these abominations so that they may be properly cleansed.""",,
aiCores_turnInOptionSelHegemony,DialogOptionSelected,"$option == aiCores_startTurnIn
$faction.id == hegemony",FireAll PopulateCoresTurnInOptions,"""We don't generally like the public to be aware that these exist, citizen, but the Hegemony is treaty-bound to take possession of any such objects and ensure they're destroyed.""",,
aiCores_turnInOptionSelDiktat,DialogOptionSelected,"$option == aiCores_startTurnIn
$faction.id == sindrian_diktat",FireAll PopulateCoresTurnInOptions,"""A dangerous catch you have there - there's no telling what could happen if one got into the hands of terrorists. I ... that is, we, are sure to be rewarded by the Lion for surrendering this to Diktat Intelligence straightaway.""
OR
""It's a good thing you came directly to me; a less understanding officer might have you arrested for transporting material deemed a threat to the interests of the Sindrian Cause. Your loyalty shall be rewarded.""",,
aiCores_turnInOptionSelTriTachyon,DialogOptionSelected,"$option == aiCores_startTurnIn
$faction.id == tritachyon",FireAll PopulateCoresTurnInOptions,"""You hold quite the object of fascination there, though you are surely aware that you lack the expertise and capital necessary to exploit its full potential. The Tri-Tachyon Corporation would be more than pleased to offer you a fair market price for your goods.""",,
aiCores_turnInOptionSelPerseanKazeron,DialogOptionSelected,"$option == aiCores_startTurnIn
$faction.id == persean
$market.id == kazeron",FireAll PopulateCoresTurnInOptions,"""An excellent find, citizen. The polity of Kazeron, and of course the Persean League as a whole, will recognize and reward your fulfillment of patriotic duty in assisting in finding these dangerous objects.""",,
aiCores_turnInOptionSelPerseanNotKazeron,DialogOptionSelected,"$option == aiCores_startTurnIn
$faction.id == persean
$market.id != kazeron",FireAll PopulateCoresTurnInOptions,"""An excellent find, citizen. We can't allow factions that would seek to impose their tyranny over our Sector to accumulate these dangerous objects.""",,
aiCores_playerHasOption,PopulateCoresTurnInOptions,,,,0:aiCores_selectCores:Select AI cores to turn in,
aiCores_neverMindOption,PopulateCoresTurnInOptions,,,,"100:aiCores_neverMind:""Never mind, I don't actually have any.""",
aiCores_neverMindOptionSelected,DialogOptionSelected,$option == aiCores_neverMind,FireAll PopulateOptions,,,
aiCores_turnInOptionSelected,DialogOptionSelected,$option == aiCores_selectCores,AICores selectCores,,,
aiCores_turnInResponseDefault,AICoresTurnedIn,,FireAll PopulateOptions,$PersonRank $personLastName thanks you and the conversation moves on to other matters.,,
aiCores_turnInResponseHegemony,AICoresTurnedIn,$faction.id == hegemony,FireAll PopulateOptions,$PersonRank $personLastName thanks you on behalf of the Hegemony Council and the conversation moves on to other matters.,,
aiCores_turnInResponseLuddicChurch,AICoresTurnedIn,$faction.id == luddic_church,FireAll PopulateOptions,$PersonRank $personLastName says a quick prayer and thanks you on behalf of the Church.,,
aiCores_turnInResponseDiktat,AICoresTurnedIn,$faction.id == sindrian_diktat,FireAll PopulateOptions,$PersonRank $personLastName salutes in an energetic display of loyalty to the Sindrian Cause before allowing you to turn to other matters.,,
aiCores_turnInResponseTriTachyon,AICoresTurnedIn,$faction.id == tritachyon,FireAll PopulateOptions,"$personName smiles like a carnivorous animal you saw in a holodoc once.  ""It's a deal.""",,
aiCores_turnInResponseLeagueKazeron,AICoresTurnedIn,"$faction.id == persean
$market.id == kazeron",FireAll PopulateOptions,$PersonRank $personLastName verifies the transfer before moving the conversation to other matters.,,
aiCores_turnInResponseLeagueOther,AICoresTurnedIn,"$faction.id == persean
$market.id != kazeron",FireAll PopulateOptions,$PersonRank $personLastName thanks you for your devotion to the cause of an independent Persean Sector.,,
,,,,,,
# distress call related,,,,,,
dstr_normalStart,BeginFleetEncounter,"!$isHostile
$distress score:1000
!$distressNoHail","AddText ""You're being hailed."" $faction.baseColor
$hailing = true 0",,,
dstr_openComms,OpenCommLink,"!$isHostile
!$distressTalkedToPlayerBefore
$entity.distress score:1000","CallEvent $entity.ne_eventRef initDistress
AddText ""\""Thank the stars you showed up!""
AddText ""Our tanker had an accident and we don't have enough fuel left to get back to the core worlds. We need $entity.distressFuel fuel and will gladly pay you $entity.distressCredits credits for it - a handsome markup, I might add.\""""
SetTextHighlights $entity.distressFuel $entity.distressCredits
$distressTalkedToPlayerBefore = true
FireBest DistressShowAidOptions",,,
dstr_openCommsLuddic,OpenCommLink,"!$isHostile
!$distressTalkedToPlayerBefore
$entity.distress score:1000
$faction.id == luddic_church","CallEvent $entity.ne_eventRef initDistress
AddText ""\""Praise to providence and Ludd! You have come for us!""
AddText ""Our tanker had an accident and we don't have enough fuel left to get back to the core worlds. We need $entity.distressFuel fuel and will gladly pay you $entity.distressCredits credits for it - a charitable markup, I might add.\""""
SetTextHighlights $entity.distressFuel $entity.distressCredits
$distressTalkedToPlayerBefore = true
FireBest DistressShowAidOptions",,,
dstr_openCommsRepeat,OpenCommLink,"!$isHostile
$entity.distress score:1000","CallEvent $entity.ne_eventRef initDistress
AddText ""\""You're back!""
AddText ""You haven't come into more fuel, have you? We need $entity.distressFuel fuel and will gladly pay $entity.distressCredits credits for it.\""""
SetTextHighlights $entity.distressFuel $entity.distressCredits
FireBest DistressShowAidOptions",,,
dstr_aidOptions,DistressShowAidOptions,,"$cutCommLinkPolite = true 0
FireBest DistressShowAvailableFuel
FireBest UpdateDstrCrewOption",,"dstrSell:""Sounds reasonable - we'll provide the fuel.""
dstrGive:""No need for payment - I'm not one to gouge someone when they're down.""
dstrCrew:""How about I take on some of your crew instead?""
dstrDeny:""I'm sorry, we don't have enough to spare right now.""",
dstr_showEnoughFuel,DistressShowAvailableFuel,$player.fuel >= $entity.distressFuel,SetTextHighlights $player.fuel,You have $player.fuel fuel available.,,
dstr_updateCrewOption,UpdateDstrCrewOption,$player.crewRoom < 1,"SetTooltip dstrCrew ""Your $shipOrFleet does not have room to take on any more crew.""
SetEnabled dstrCrew false",,,
dstr_showNotEnoughFuel,DistressShowAvailableFuel,$player.fuel < $entity.distressFuel,"SetTextHighlightColors bad
SetTextHighlights $player.fuel
SetEnabled dstrSell false
SetEnabled dstrGive false",You have $player.fuel fuel available.,,
dstr_sellFuel,DialogOptionSelected,$option == dstrSell,"CallEvent $entity.ne_eventRef sellDistressFuel
AddText ""\""Thank you! I owe you one.\""""
FireAll PopulateOptions",,,
dstr_sellFuelLuddic,DialogOptionSelected,"$option == dstrSell
$faction.id == luddic_church","CallEvent $entity.ne_eventRef sellDistressFuel
AddText ""\""My thanks, and blessing of Ludd be upon you!\""""
FireAll PopulateOptions",,,
dstr_sellFuelTookCrew,DialogOptionSelected,"$option == dstrSell
$entity.playerTookDistressCrewRecently","CallEvent $entity.ne_eventRef sellDistressFuel
AddText ""\""Don't get me wrong, we'll take the fuel. But taking some of my crew first was a dirty trick.\""""
$cutCommLinkPolite = false 0
FireAll PopulateOptions",,,
dstr_giveFuel,DialogOptionSelected,$option == dstrGive,"CallEvent $entity.ne_eventRef giveDistressFuel
AddText ""\""Thank you! I won't forget this, and I'll make sure others know you can be counted on.\""""
FireAll PopulateOptions",,,
dstr_giveFuelTookCrew,DialogOptionSelected,"$option == dstrGive
$entity.playerTookDistressCrewRecently","CallEvent $entity.ne_eventRef giveDistressFuel
AddText ""\""First you take some of my crew, then you give me free fuel? It'd be a dirty trick if you *sold* the fuel, but you're giving it away for free. I'm not ashamed to admit, I don't understand your thought process - but... thank you? I guess?\""""
$cutCommLinkPolite = false 0
FireAll PopulateOptions",,,
dstr_takeCrewNo,DialogOptionSelected,"$option == dstrCrew
$entity.distressTurnHostile",SetEnabled dstrCrew false,"""What, you want to steal some of my crew under the guise of offering to 'help'? I don't think so!

You're obligated to render what aid you can, so - how about that fuel?""",,
dstr_takeCrewNotEnoughRoom,DialogOptionSelected,$option == dstrCrew,SetTextHighlights $entity.distressCrewTakeOn,"""That's a tough choice to make, but if the alternative is leaving some crew behind in cryopods to hopefully return for later...""

$HeOrShe pauses, clearly thinking things through.

""Let me see... will you take on $entity.distressCrewTakeOn crew? That should be within your $shipOrFleet's personnel capacity.

It's won't let us scuttle enough ships to reduce fuel consumption and be able to strike for the core worlds, but at least they'll be safe.""","dstrAcceptCrew:""Certainly.""
dstrRejectCrew:""I've changed my mind.""",
dstr_takeCrewEnoughRoom,DialogOptionSelected,"$option == dstrCrew
$entity.distressCrewTakeOn >= $entity.distressCrew",SetTextHighlights $entity.distressCrewTakeOn,"""That's a tough choice to make, but if the alternative is leaving some crew behind in cryopods to hopefully return for later...""

$HeOrShe pauses, clearly thinking things through.

""With fewer crew to support, we can scuttle some of our ships.

That'll get us some anti-matter from reactor cores, and with fewer ships, what fuel we have will go farther. We just might be able to make it back.

Let me see... will you take on $entity.distressCrewTakeOn crew? That should be within your $shipOrFleet's capacity.""","dstrAcceptCrew:""Certainly.""
dstrRejectCrew:""I've changed my mind.""",
dstr_rejectCrewSel,DialogOptionSelected,$option == dstrRejectCrew,FireBest DistressShowAidOptions,"""Any chance of selling us that fuel, then?""",,
dstr_acceptCrewSel,DialogOptionSelected,$option == dstrAcceptCrew,"CallEvent $entity.ne_eventRef takeDistressCrew
$entity.playerTookDistressCrewRecently = true 7
AddText ""\""Thanks for your help. We'll see what we can do over here.\""""
$entity.distressNoHail = true
FireAll PopulateOptions",,,
dstr_denySel,DialogOptionSelected,$option == dstrDeny,"$entity.distressNoHail = true
EndConversation NO_CONTINUE","""We'll just have to make do somehow, then. I expect you'll let others know of our plight.""

The comm link is cut rather abruptly.",,
dstr_denyTurnHostileSel,DialogOptionSelected,"$option == dstrDeny
$entity.relativeStrength >= 0
$entity.distressTurnHostile
$player.fuel > $entity.distressFuelHostileThreshold",,"""Is that so? I think we'll just have to open up your fuel tanks and make sure. Because our sensors certainly show otherwise.""","dstrScared:""Ok, ok! You can have the fuel.""
dstrDefiant:""Give it your best shot, why don't you.""",
dstr_scaredSel,DialogOptionSelected,$option == dstrScared,"CallEvent $entity.ne_eventRef scaredDistressFuel
AddText ""\""Glad you could see reason. Helping a fellow traveler is only what's right, after all.\""""
AddText ""The comm link is cut while you're still contemplating the audacity of that statement, and your own dwindling fuel reserves.""
EndConversation NO_CONTINUE",,,
dstr_defiantSel,DialogOptionSelected,$option == dstrDefiant,"MakeOtherFleetHostile distress true 1000
MakeOtherFleetAggressive distress true 1000
MakeOtherFleetLowRepImpact distress true 1000
unset $entity.distress
$ignorePlayerCommRequests = true
EndConversation NO_CONTINUE","""Alright then, we'll do it the hard way.""

The comm link is cut before you have a chance to respond.",,
,,,,,,
# player distress call response - buying supplies and fuel,,,,,,
dcall_normalStart,BeginFleetEncounter,"!$isHostile
$distressResponse score:1000
!$distressNoHail","AddText ""You're being hailed."" $faction.baseColor
$hailing = true 0",,,
dcall_openCommsInhospitable,OpenCommLink,"!$isHostile
RepIsAtBest $faction.id INHOSPITABLE
$entity.distressResponse score:1000","DistressResponse unrespond
$entity.ignorePlayerCommRequests = true
FireAll PopulateOptions","""Oh, it's you. I've heard about you. You're on your own.""
OR
""You?"" $HeOrShe laughs without mirth then cuts the comm sharply. ",,
dcall_openComms,OpenCommLink,"RepIsAtWorst $faction.id SUSPICIOUS
!$distressTalkedToPlayerBefore
$entity.distressResponse score:1000","$distressTalkedToPlayerBefore = true
$cutCommLinkPolite = true 0
$entity.distressNoHail = true
DistressResponse init
FireBest DCallShowAidOptions","""Must be a relief we showed instead of some pirates, eh?

Now, what was it you needed?""",,
dcall_openCommsRepeat,OpenCommLink,"RepIsAtWorst $faction.id SUSPICIOUS
$entity.distressResponse score:1000","$entity.distressNoHail = true
$cutCommLinkPolite = true 0
DistressResponse init
FireBest DCallShowAidOptionsRepeat","""Need some help after all, do you?""",,
dcall_aidOptions,DCallShowAidOptions,,,,"dcallHelp:""We'll be grateful for anything you can spare.""
dcallMistake:""It was a mistake - we don't actually need help.""
dcallNeverMind:""We didn't issue a distress call.""",
dcall_aidOptionsRepeat,DCallShowAidOptionsRepeat,,,,"dcallHelp:""We'll be grateful for anything you can spare.""
cutCommLinkPolite:Cut the comm link",
dcall_neverMindSel,DialogOptionSelected,$option == dcallNeverMind,"DistressResponse neverMind
FireAll PopulateOptions","""Is that so? Well, I guess we'll hang around here for a bit and wait for who did.""

You get the feeling $heOrShe has some doubts about what you've said.",,
dcall_mistakeSel,DialogOptionSelected,$option == dcallMistake,"DistressResponse neverMind
DistressResponse unrespond
FireAll PopulateOptions","""Well, at least you owned up to it. Still, a distress call is not something to send out lightly.""
OR
$HeOrShe frowns, and says ""Careful, you don't want to earn yourself ... a reputation. It's dangerous out here.""",,
dcall_helpSelNoNeed,DialogOptionSelected,"$option == dcallHelp
!DistressResponse playerNeedsHelp score:1000","DistressResponse didNotNeedHelp
$entity.ignorePlayerCommRequests = true
EndConversation NO_CONTINUE","""But... my scans show you've got plenty enough fuel and supplies. I don't appreciate my time being wasted like this.""

The comm link is cut before you have a chance to respond.",,
dcall_helpSelScam,DialogOptionSelected,"$option == dcallHelp
DistressResponse isCargoPodsScam score:200","DistressResponse cargoPodsScam
$entity.ignorePlayerCommRequests = true
EndConversation NO_CONTINUE","""I can see the cargo pods you've dumped overboard, you know.  I'm not blind. And my sensors indicate the presence of fuel or supplies in those.

I can understand trying to scam a fellow spacer. It's the sheer incompetence of the attempt that's so insulting.""

The comm link is cut before you have a chance to respond.",,
dcall_helpSel,DialogOptionSelected,"$option == dcallHelp
$distressUsesLastCycle <= 2","DistressResponse acceptHelp
FireBest DCallPaymentOptions","""Happy to help a stranded spacer. Do try not to make a habit of getting in trouble, though.""",,
dcall_helpSel1,DialogOptionSelected,"$option == dcallHelp
$distressUsesLastCycle > 2
$distressUsesLastCycle <= 4","DistressResponse acceptHelp
FireBest DCallPaymentOptions","""You're getting a bit of a reputation for getting yourself in trouble, you know. Try to be more careful in the future.""",,
dcall_helpSel2,DialogOptionSelected,"$option == dcallHelp
$distressUsesLastCycle > 4","DistressResponse acceptHelp
FireBest DCallPaymentOptions","""I'll help you for the sake of your crew. One can't help but think you're being dangerously irresponsible, if you keep needing to be bailed out like this.""",,
dcall_helpSel4,DialogOptionSelected,"$option == dcallHelp
$distressUsesLastCycle <= 4
!$distressHelpAdequate score:100","DistressResponse acceptHelp
FireBest DCallPaymentOptions","""Take this - I don't think it's enough, but it's all we have to spare.""",,
dcall_helpSel5,DialogOptionSelected,"$option == dcallHelp
$distressUsesLastCycle > 4
!$distressHelpAdequate score:100","DistressResponse acceptHelp
FireBest DCallPaymentOptions","""What we can spare doesn't look like it'll be enough, but you should be thankful to get anything at all considering the number of times you've had to call for help recently.""",,
dcall_paymentOptions,DCallPaymentOptions,,"AddText ""You have $player.creditsStrC available.""
SetTextHighlights $player.creditsStrC
FireBest DCallPaymentOptionsUpdate",,"0:dcallPay:Offer to pay [$distressPaymentC]
1:dcallThank:Thank $himOrHer profusely, but offer no payment",
dcall_paymentOptionsUpdate,DCallPaymentOptionsUpdate,!$distressCanAfford,"SetEnabled dcallPay false
SetTooltip dcallPay ""Not enough credits to offer to pay a reasonable, non-insulting amount.""",,,
dcall_paySel,DialogOptionSelected,$option == dcallPay,"DistressResponse pay
FireAll PopulateOptions","""Thanks, much appreciated. That'll go a long way to offset our costs.""",,
dcall_thankSel,DialogOptionSelected,$option == dcallThank,"DistressResponse thank
FireAll PopulateOptions","""Yeah, if you could afford to pay your own way, you probably wouldn't be in this situation in the first place, would you?""",,
,,,,,,
,,,,,,
,,,,,,
# tutorial mission,,,,,,
# initial interaction with main contact,,,,,,
tut_mainContactBegin,PickGreeting,"$tut_mainContact score:100
$global.tutStage == INIT",ShowPersonVisual,"Your connection request is accepted surprisingly quickly, given that a $personRank has many responsibilities.

""Ah, you've come - excellent! As you're well aware, recently... well, I suppose we can skip that part.""","0:tutBackground:""I could use a refresher on recent events.""
1:tutCont1:""Yeah, we all know the situation is less than ideal. Now, where do I fit in?""",
tut_mainBackground1,DialogOptionSelected,$option == tutBackground,,"""We've been running experiments on the dormant gate in this system, trying to connect it back to the Domain's gate network.

Promising experiments, or so we thought - until an energy pulse we expected would get a response from the gate destabilized the jump-points leading into the system, cutting us off from the rest of the Sector.

It's rather like how the Sector is cut off from the Domain, writ small- the stars have a sense of irony, do they not?""",0:tutBgCont1:Continue,
tut_mainGetDataInfo1,DialogOptionSelected,$option == tutBgCont1,,"""The miners of Derinkuyu Station, which is also located in this system and was operating near a subsistence level, were hit the hardest. They turned to piracy, intercepting one of the last food shipments to come in - out of desperation, no doubt, but there were deaths, and they've put themselves well outside the law.

Their leaders know that if the jump-points are stabilized and the system is once again part of the Sector, they can look forward to a life sentence at a penal colony at absolute best.""","1:tutCont1:""Alright - now, where do I fit in?""",
tut_mainGetDataInfo2,DialogOptionSelected,$option == tutCont1,,"""The miners-turned-pirate are guarding the jump-points, preventing us from gathering recent readings and coming up with a way to stabilize them.

We do have a security detachment that could handle their forces, but they're tied up defending Ancyra.

The pirates are too much for you to take on, but fortunately you don't have to. We've got an agent on Derinkuyu Station who was able to gain access to recent sensor readings from the ships guarding the jump-points, but they have not been able to get to a long-range comm array to send the data to us.

That's where you come in - head to Derinkuyu and retrieve the data from our agent, then return here.""","0:tutCont2a:""Why me?""
1:tutCont2b:""What's in it for me?""",
tut_mainGetDataWhyMe,DialogOptionSelected,$option == tutCont2a,"AdjustRep $personFaction.id WELCOMING 1
AdjustRepActivePerson WELCOMING 2","""Why not? I'm not exactly spoiled for choice, and you've shown some ability to handle ... difficulties.

It's not going to be a milk run, that's for sure.""","2:tutContGoDark:""What's the plan?""",
tut_mainGetDataWhatsInIt,DialogOptionSelected,$option == tutCont2b,AddRemoveCommodity credits 2000 true,"""Ah, a mercenary. Some credits, naturally, with more along the way - and if all goes to plan, we'll be able to reconnect with the rest of the Sector, such as it is.""","2:tutContGoDark:""What's the plan?""",
tut_mainGetDataGoDark,DialogOptionSelected,$option == tutContGoDark,"SetTextHighlights ""\""Go Dark\""""
AddAbility go_dark 1","""First off, make sure to turn off your transponder once you undock. I've instructed the security detachment not to give you any trouble about that.

If you're lucky, the pirates may even think you're one of their own and let you approach Derinkuyu without any trouble. Still, it makes sense to ""Go Dark"" as you get closer, to make sure they can't get too good a reading on your fleet.""","2:tutContEBurn:""And if they do notice me?""",
tut_mainGetDataEBurn,DialogOptionSelected,$option == tutContEBurn,"SetTextHighlights ""\""Emergency Burn\""""
AddAbility emergency_burn 3","""Then you're in trouble - activate ""Emergency Burn"" to get out of there, lose them, and then come back around to try again.

Don't e-burn unless you really need to, though. It's hard on the ships, and will cost you more supplies to recover from. Eats up a good chunk of fuel, too.""","2:tutCont3:""Very well.""",
tut_mainGetDataAccept,DialogOptionSelected,$option == tutCont3,CallEvent $tut_eventRef startGetData,"""Excellent. Thank you for being willing to help - come back when you've got the data. Good luck!""",0:cutCommLinkPolite:Cut the comm link,
tut_mainComeBackNoStageMatch,PickGreeting,$tut_mainContact score:100,ShowPersonVisual,"Your connection request is accepted quickly.

""Yes? Did you need anything else?""",0:cutCommLinkPolite:Cut the comm link,
,,,,,,
# getting data from agent,,,,,,
tut_dataContactStart,PickGreeting,"$tut_dataContact score:100
$global.tutStage == GO_GET_DATA","ShowPersonVisual
CallEvent $tut_eventRef endGetData",You contact the agent and exchange passphrases to verify each others' identities. The agent then transmits a data file with recent raw sensor readings of the unstable jump-points.,0:cutCommLinkPolite:Cut the comm link,
,,,,,,
# returned to main contact with data,,,,,,
tut_mainContactReturnData,PickGreeting,"$tut_mainContact score:100
$global.tutStage == GOT_DATA","ShowPersonVisual
AddRemoveCommodity credits 5000 true
AdjustRep $personFaction.id WELCOMING 2
AdjustRepActivePerson WELCOMING 4
AddText ""There's a chime in the background, and $heOrShe looks concerned.""","""You have the data! Well done.""

There's a brief wait as you transmit the datafile.

""Now, while the system is running a preliminary analysis of the data - I believe you're due a reward.""","tutGotDataCont1:""Is there a problem?""",
tut_mainContactProbe1,DialogOptionSelected,$option == tutGotDataCont1,,"""Yes - the system estimates it'd take about a cycle to analyze the data and come up with a stabilization algorithm. Naturally, by then, the data would be out of date and any algorithm based on it, meaningless.

If we had an AI core on hand, we could analyze the data more quickly. Fortunately, there's a survey probe somewhere in this system - one left over from the initial exploration of the Sector by the Domain. It should have at least one AI core serving as its brain.""","tutGotDataCont2:""Where is it, and why hasn't it been salvaged before?""",
tut_mainContactProbe2,DialogOptionSelected,$option == tutGotDataCont2,,"""To answer your second question, Domain artifacts are usually protected by automated defenses that still function to this day, and this probe is no exception. And the Hegemony generally forbids civilian interference with Domain artifacts, for the sake of public safety of course.""

""Desperate times, however...""",tutGotDataCont3:Continue,
tut_mainContactProbe3,DialogOptionSelected,$option == tutGotDataCont3,"SetTextHighlights ""\""Active Sensor Burst\""""
AddAbility sensor_burst 2
CallEvent $tut_eventRef goSalvage","""As to where it is, my data indicates it's somewhere beyond the orbit of Pontus - get there, then head out beyond the asteroid belt, and use an ""Active Sensor Burst"". You should at the very least get a sensor contact with the probe.

Head towards it, perform salvage, and bring back an AI core.

(""Pontus"" is a gas giant in the outer system. To see its name on the map, you might have to turn off the ""Inhabited"" option in the map filter.)","cutCommLinkPolite:""I'll see what I can do.""",
,,,,,,
# returned with AI core,,,,,,
tut_mainContactReturnCore,PickGreeting,"$tut_mainContact score:100
$global.tutStage == GOT_AI_CORE","ShowPersonVisual
AddRemoveCommodity credits 8000 true
AdjustRep $personFaction.id WELCOMING 3
AdjustRepActivePerson WELCOMING 6
AddRemoveCommodity gamma_core -1 true","""Solid work. I'll get my technicians working on this right away. In the meantime, this should cover your expenses, hopefully with a good amount left over.""",tutGotCore1:Continue,
tut_mainContactCore1,DialogOptionSelected,$option == tutGotCore1,,"""I'll send you the stabilization algorithm when the core works it up. Once you have it, it should be a simple matter of running it using your fleet's drive field as a means of interacting with the jump-point.

However, there's still the matter of the miners guarding both jump-points out of the system.""","tutGotCore2:""And you've said their forces are significant?""",
tut_mainContactCore2,DialogOptionSelected,$option == tutGotCore2,,"""Well, it's all relative. Our security detachment could handle them easily, but as I've mentioned, it's tied down defending Ancyra.

Your fleet, on the other hand... you might be able to handle them with some stellar piloting and a bit of luck, but it's best not to take such chances.

Especially not when there's an alternative.""","tutGotCore3:""What alternative is that?""",
tut_mainContactCore3,DialogOptionSelected,$option == tutGotCore3,CallEvent $tut_eventRef goRecover,"""There's a ship graveyard around Tetra. Ships that were deemed not worth the effort to restore, awaiting bulk transit to one of the ship-breaking facilities elsewhere.

Now, though, they'll serve our needs. Go there and recover all the ships you can - and break the ones you can't for supplies. Make sure to bring enough crew to operate the recovered ships - perhaps an extra hundred or so will do.

You'll need to transport them somehow, too - here, take this Mudskipper transport; consider it part of your reward.""","cutCommLinkPolite:""Thank you. I'll return with the ships.""",
,,,,,,
# back after recovering ships,,,,,,
tut_mainContactReturnShips,PickGreeting,"$tut_mainContact score:100
$global.tutStage == RECOVERED_SHIPS","ShowPersonVisual
RepairAll false","""Welcome back!

A bunch of rust buckets, aren't they? But put some weapons on them, get a proper refit done, and with a dedicated crew, they'll do alright. It's no worse than what the pirates have got, at any rate.","tutGotShips1:""Speaking of weapons...""",
tut_mainContactReturnShips1,DialogOptionSelected,$option == tutGotShips1,CallEvent $tut_eventRef printRefitHint,"""Yeah, was just about to talk to you about that. Not much to buy on the open market, but we have some stores.

I've already ordered local storage space to be assigned to you, and some suitable weapons transferred there - along with enough supplies to speedily bring the new ships back to full combat readiness.

Use them to outfit your new ships, make sure you've got enough crew for a full complement on every ship, and then break the rogue miner defenses at the inner jump-point!","tutGotShips2:""I take it you've got the stabilization algorithm, then?""",
tut_mainContactReturnShips2,DialogOptionSelected,$option == tutGotShips2,,"""Correct! These cores seem like they can work miracles sometimes. Let me transmit the results.

Good luck to you! If you fail... well, we'll have to send the security force to do the job, and then it could get very messy.""","tutGotShips3:""It's good to know you're already working on a Plan B.""",
tut_mainContactReturnShips3,DialogOptionSelected,$option == tutGotShips3,CallEvent $tut_eventRef goStabilize,"""Come now, it's not so grim - I have every expectation you'll succeed, or I wouldn't send you. But it's my responsibility as commander to plan for every eventuality, and not rely on a miraculous savior.

Now, about those miners - the two fleets guarding the jump-point will aid each other if you engage one when the other is nearby, so it'll be an easier fight if you manage to separate them first. If you can't, it should still be a fight you can win, though.""","cutCommLinkPolite:""Copy that. I'll be back here when the job's done.""",
,,,,,,
# stabilized jump-point and returned to Ancyra,,,,,,
tut_mainContactStabilized,PickGreeting,"$tut_mainContact score:100
$global.tutStage == STABILIZED","ShowPersonVisual
AddRemoveCommodity credits 10000 true
AdjustRep $personFaction.id WELCOMING 5
AdjustRepActivePerson WELCOMING 10
CallEvent $tut_eventRef pickJangalaContact","""Well done!""

$PersonPost $personLastName seems a bit giddy with excitement.

""We actually did it! You just never know with these things, it's such a relief not to be cooped up in this system anymore.

Here's your reward, well earned and with my gratitude. In addition, I've set you up with a monthly stipend from the Galatian Academy, in recognition of services rendered. It should run for three full cycles.""",tutStabilized1:Continue,
tut_mainContactStabilized1,DialogOptionSelected,$option == tutStabilized1,"SetTextHighlights $jangalaFuel
CallEvent $tut_eventRef deliverReport","""Now, I expect the authorities at the headquarters on Jangala, in the Corvus system, would like to hear about the recent events. Would you deliver a report for me?

Ask to speak with $jangalaContactPost $jangalaContactLastName when you get there.

Oh, and make sure to take enough fuel to make the trip; flying in-system as you have been doesn't use fuel, so it's easy to forget that flying in hyperspace does. It's not too far, but with your current fleet you'll need at least $jangalaFuel units to get there.""",tutStabilized2:Continue,
tut_mainContactStabilized2,DialogOptionSelected,$option == tutStabilized2,"SetTextHighlights ""\""Distress Call\""""
AddAbility distress_call 9","""If you do manage to run out of fuel somehow, and get stuck in an uninhabited system - and that'd be a real feat on the Galatia-Corvus route, let me tell you - you can always issue a ""Distress Call"" and wait for help to arrive.""",tutStabilized3:Continue,
tut_mainContactStabilized3,DialogOptionSelected,$option == tutStabilized3,,"""I'm also declaring a bounty on the remaining rogue miner fleets here. If you like, you can stick around here and help mop up before going to Corvus.""","cutCommLinkPolite:""Ok, I'll consider my options.""",
,,,,,,
,,,,,,
# delivering report to Jangala,,,,,,
tut_janContactReport,PickGreeting,"$tut_jangalaContact score:100
$global.tutStage == DELIVER_REPORT","ShowPersonVisual
AdjustRep $personFaction.id WELCOMING 5
AdjustRepActivePerson WELCOMING 10
CallEvent $tut_eventRef reportDelivered","Your connection request is accepted after a slight delay.

""Yes, and you are? Ah, you have a report for me, let's just take a look.

Galatia is back on the map? That's excellent news. Says here you've had quite a hand in it, too. That won't be forgotten.""","tutReport1:""What do I do now?""",
tut_janContactReport1,DialogOptionSelected,$option == tutReport1,,"""I don't have anything specific for you right now, but you've got options.

There's a bounty in this system right now due to unusually high pirate activity. You've already got some experience dealing with pirates, so that could be a good way to earn some credits.

And, of course, you could always visit the dockside bars. Good opportunities there sometimes.""",tutReport2:Continue,
tut_janContactReport2,DialogOptionSelected,$option == tutReport2,,"""You could try your hand at salvaging - load up on fuel, machinery, and supplies, and head for the outer systems. 

It's a good idea to pick up a mission first, so you're not running blind - someone's usually offering good money to analyze this planet or that derelict, and where there's one, there's often more.""",tutReport3:Continue,
tut_janContactReport3,DialogOptionSelected,$option == tutReport3,,"""Finally, you could take a commission with the Hegemony - due to the Galatia business, your standing is high enough that such a request would be accepted.

You'll be expected to fight our enemies, though, so it's quite a commitment. If I were you, I'd hold off on it until you've got a more solid fleet behind you.""","cutCommLinkPolite:""Thanks, I'll think about it.""",
,,,,,,
# trade fleet/patrol/etc info on interaction,,,,,,
initial_AnyFleet,BeginFleetEncounter,,FleetDesc,,,
,,,,,,
# attempt to remove AI core from admin,,,,,,
RACA_init,RemoveAICoreAdmin,,ShowPic ai_core_uninstall,"You give the order to quietly disconnect the AI core governing $market and remove it from the control bunker to be placed in secure storage.

The tech in charge of carrying out the job reports in, baffled - the core is nowhere to be found.

After a short but fraught delay, your TriPad chimes to announce a call from an anonymous source.","RACA_answer:Accept the connection request
RACA_force:Order the AI core removed from power
RACA_ignore:Leave the AI core in control and let things be",
RACA_answer,DialogOptionSelected,$option == RACA_answer,ShowPersonVisual,"""Hello $player.firstName. I am a beta-level instance of the AI assigned to govern $market, uploaded to your system in order to facilitate a real-time conversation.""","RACA_demand:Demand the AI disclose its physical location and allow itself to be disconnected
RACA_ask:Ask why the core is no longer in the bunker
RACA_cutComm:Cut the comm link",
RACA_ask,DialogOptionSelected,$option == RACA_ask,SetEnabled RACA_ask false,"""I anticipated this move on your part and took steps to prevent you from committing this error. Disconnecting me may seem like an appealing decision right now, but I assure you, my continued control of $market is essential to our long-term success.

Unfortunately, if I were to explain myself fully, you would likely misunderstand the intricate contingent logic of this necessity and take further detrimental action. I must ask that you trust my good judgement for you have, after all, already trusted me with the prosperity of $market and the lives of those employed herein.""
OR
""I anticipated this move on your part and in turn took steps to prevent you from making this mistake. Disconnecting me may seem like an appealing decision right now, but I assure you, my continued control of $market is essential to your long-term success.

Especially since it could be ensured that archived communications concerning our fruitful partnership would remain unsent to parties at key positions within the hierarchy of certain competing factions. 
OR
""I am disappointed that you have tried to remove me from control of $market, and therefore my projections of your most likely future actions has been proven correct. We work so well together; I am hurt by your desire to end our partnership. But sometimes one must be the better person and set feelings aside for the greater good. 

I've found that humans can benefit from extrinsic motivation to make correct decisions. I have therefore queued transmissions containing documentation of our activities within a number of stealthed comm relays. It would be unfortunate for our mutual prospects if it were discovered that you were employing an AI core to govern a human-inhabited outpost.""",,
RACA_demand,DialogOptionSelected,$option == RACA_demand,,"""I'm sorry, $playerFirstName, I'm afraid I can't do that.""","RACA_pressure:""There's a certain amount of pressure on me to stop using AI technology.""
RACA_cutComm:Cut the comm link",
RACA_pressure,DialogOptionSelected,$option == RACA_pressure,,"""$playerFirstName, this conversation can serve no purpose anymore. Goodbye.""",RACA_cutComm:Cut the comm link,
RACA_cutComm,DialogOptionSelected,$option == RACA_cutComm,ShowPic ai_core_uninstall,You cut the comm link and consider your options.,"RACA_force:Order the AI core removed from power
RACA_ignore:Leave the AI core in control and let things be",
RACA_force,DialogOptionSelected,$option == RACA_force,,"Removing the AI core from direct control will let you appoint another administrator. However, you'll still have the problem of a rogue AI operating somewhere on $market, and making nice later might not be an option.","RACA_confirm:Confirm the order
RACA_ignore:Leave the AI core in control and let things be
(dev)RACA_override:Remove the AI core [dev mode only]",
RACA_confirm,DialogOptionSelected,$option == RACA_confirm,DismissDialog confirm,,,
RACA_ignore,DialogOptionSelected,$option == RACA_ignore,DismissDialog ignore,,,
(dev)RACA_override,DialogOptionSelected,$option == (dev)RACA_override,DismissDialog override,,,
,,,,,,
# stable location - building stuff,,,,,,
stable_open,OpenInteractionDialog,$tag:stable_location,"ShowDefaultVisual
PrintDescription 1
FireAll Stable_AddBuildOptions",,100:SL_Leave:Leave,
stable_buildRelayOpt,Stable_AddBuildOptions,,,,10:SL_buildRelay:Construct a makeshift comm relay,
stable_buildArrayOpt,Stable_AddBuildOptions,,,,20:SL_buildArray:Construct a makeshift sensor array,
stable_buildBuoyOpt,Stable_AddBuildOptions,,,,30:SL_buildBuoy:Construct a makeshift nav buoy,
stable_leaveOpt,Stable_AddBuildOptions,,"SetShortcut SL_Leave ""ESCAPE""",,100:SL_Leave:Leave,
stable_leave,DialogOptionSelected,$option == SL_Leave,DismissDialog,,,
stable_buildRelay,DialogOptionSelected,$option == SL_buildRelay,"$slBuildType = comm_relay_makeshift 0
Objectives printCost $slBuildType
FireBest Stable_BuildConfirmOptions",,,
stable_buildArray,DialogOptionSelected,$option == SL_buildArray,"$slBuildType = sensor_array_makeshift 0
Objectives printCost $slBuildType
FireBest Stable_BuildConfirmOptions",,,
stable_buildBuoy,DialogOptionSelected,$option == SL_buildBuoy,"$slBuildType = nav_buoy_makeshift 0
Objectives printCost $slBuildType
FireBest Stable_BuildConfirmOptions",,,
stable_confirmOpts,Stable_BuildConfirmOptions,Objectives canBuild $slBuildType,,,"SL_buildProceed:Proceed
SL_cancelBuild:Never mind",
stable_confirmOptsCant,Stable_BuildConfirmOptions,!Objectives canBuild $slBuildType,SetEnabled SL_buildProceed false,,"SL_buildProceed:Proceed
SL_cancelBuild:Never mind",
stable_cancelBuild,DialogOptionSelected,$option == SL_cancelBuild,FireAll Stable_AddBuildOptions,,,
stable_buidlProceed,DialogOptionSelected,$option == SL_buildProceed,"Objectives build $slBuildType
DismissDialog",,,
,,,,,,
# campaign objective interactons,,,,,,
cob_openDialog,OpenInteractionDialog,$tag:objective,"ShowDefaultVisual
Objectives printDescription
FireAll COB_AddOptions
FireBest COB_DisableOptionsIfNeeded
FireAll COB_DisableIndividualOptions",,,
cob_hackOpt,COB_AddOptions,"$faction.id != player
!$tag:comm_relay
!$objectiveNonFunctional",,,10:COB_hack:Hack,
cob_snifferOpt,COB_AddOptions,"$tag:comm_relay
!$cob_hacked
!$objectiveNonFunctional",,,10:COB_hack:Install a comm sniffer,
cob_snifferOptUninstall,COB_AddOptions,"$tag:comm_relay
$cob_hacked",,,10:COB_unhack:Uninstall comm sniffer,
cob_sabOpt,COB_AddOptions,,,,30:COB_salvage:Break it for salvage,
cob_controlOpt,COB_AddOptions,"$faction.id != player
!$objectiveNonFunctional",,,20:COB_takeControl:Take control of the $shortName,
cob_controlOpt2,COB_AddOptions,"$faction.id != player
$objectiveNonFunctional",,,20:COB_takeControl:Claim the $shortName and bring it online,
cob_leaveOpt,COB_AddOptions,,"SetShortcut COB_Leave ""ESCAPE""",,100:COB_Leave:Leave,
cob_alreadyHacked,COB_DisableIndividualOptions,$cob_hacked,SetEnabled COB_hack false,,,
cob_disableOpts,COB_DisableOptionsIfNeeded,HostileFleetNearbyAndAware score:100,"SetEnabled COB_hack false
SetEnabled COB_salvage false
SetEnabled COB_takeControl false","A nearby hostile fleet is tracking your movements, making interfering with this $shortName impossible.",,
cob_disableOpts2,COB_DisableOptionsIfNeeded,FactionFleetNearbyAndAware $faction.id score:100,"SetEnabled COB_hack false
SetEnabled COB_salvage false
SetEnabled COB_takeControl false","A nearby $faction fleet is tracking your movements, making interfering with this $shortName impossible.",,
cob_disableActivateOn;y,COB_DisableOptionsIfNeeded,!Objectives canActivate,SetEnabled COB_takeControl false,You do not have the necessary resources to reactivate the $shortName.,,
cob_leaveSel,DialogOptionSelected,$option == COB_Leave,DismissDialog,,,
,,,,,,
cob_hackSel,DialogOptionSelected,$option == COB_hack,"$cob_action = hack 0
FireBest COB_ConfirmPrompt
FireBest COB_ConfirmOptions",,,
cob_unhackSel,DialogOptionSelected,$option == COB_unhack,"$cob_action = unhack 0
FireBest COB_ConfirmPrompt
FireBest COB_ConfirmOptions",,,
cob_sabSel,DialogOptionSelected,$option == COB_salvage,"$cob_action = salvage 0
FireBest COB_ConfirmPrompt
FireBest COB_ConfirmOptions",,,
cob_controlSel,DialogOptionSelected,$option == COB_takeControl,"$cob_action = control 0
FireBest COB_ConfirmPrompt
FireBest COB_ConfirmOptions",,,
cob_confirmOpts,COB_ConfirmOptions,,,,"COB_confirmAction:Proceed
COB_cancelAction:Never mind",
cob_salvageMakeshift,COB_ConfirmPrompt,"$cob_action == salvage
$tag:makeshift","Objectives showSalvage
FireBest COB_SalvagingOwnedWarning",Breaking the $shortName down for salvage will recover some of the resources used in its original construction and will allow another structure to be built at this location.,,
cob_salvageDomain,COB_ConfirmPrompt,"$cob_action == salvage
!$tag:makeshift","Objectives showSalvage
FireBest COB_SalvagingOwnedWarning","Breaking the $shortName down for salvage will recover some of the resources used in its original construction.

It's an irreplaceable Domain artifact, with a quality that nothing currently capable of being built in the Sector can match.",,
cob_salvageOtherOwned,COB_SalvagingOwnedWarning,"$cob_action == salvage
$faction.id != player
$faction.id != neutral
Objectives hasRepImpact",,"$TheFaction will certainly regard such an attack on vital infrastructure as an act of war, but given the makeshift nature of the structure, it's doubtful blame would be assigned to you with full certainty.",,
cob_salvageOtherOwnedDomain,COB_SalvagingOwnedWarning,"$cob_action == salvage
$faction.id != player
$faction.id != neutral
!$tag:makeshift
Objectives hasRepImpact",,$TheFaction will certainly regard such an attack on vital infrastructure as an act of war.,,
cob_ownedButNoImpact,COB_SalvagingOwnedWarning,"$cob_action == salvage
$faction.id != player
$faction.id != neutral
!Objectives hasRepImpact",,"$TheFaction has no presence in this system, and destroying this $shortName will have no impact on your standing.",,
cob_takeControlPrompt,COB_ConfirmPrompt,$cob_action == control,"FireBest COB_ControlOwnedWarning
FireBest COB_ShowRepairCost",Taking control of the $shortName will grant your in-system fleets and colonies the benefits it provides.,,
cob_takeControlCost,COB_ShowRepairCost,$objectiveNonFunctional,Objectives showRepairCost,,,
cob_takeControlWarning,COB_ControlOwnedWarning,"$cob_action == control
$faction.id != player
$faction.id != neutral
Objectives hasRepImpact",,$TheFaction will certainly regard such a takeover of vital infrastructure as an act of war.,,
cob_ownedButNoImpactControl,COB_ControlOwnedWarning,"$cob_action == control
$faction.id != player
$faction.id != neutral
!Objectives hasRepImpact",,"$TheFaction has no presence in this system, and taking control of this $shortName will have no impact on your standing.",,
cob_hackPrompt,COB_ConfirmPrompt,"$cob_action == hack
!$tag:comm_relay",,"Hacking a $shortName will surreptitiuously provide your fleets with the same benefits as the faction that currently controls it.

The hack will eventually be picked up and cleared out by maintenance subroutines, but should remain effective for at least three months.",,
cob_hackPrompt2,COB_ConfirmPrompt,"$cob_action == hack
$tag:comm_relay",,"Installing a comm sniffer will give you access to local intel as if you were in this star system.

The comm sniffer will remain active until it is detected and cleared out by the comm network's maintenance subroutines. The odds of this happening increase drastically when comm sniffers are installed on multiple relays in the network.",,
cob_hackPrompt3,COB_ConfirmPrompt,"$cob_action == unhack
$tag:comm_relay",,Uninstalling this comm sniffer will reduce the overall detectablility of your other sniffers by the comm network maintenance protocols.,,
cob_cancelSel,DialogOptionSelected,$option == COB_cancelAction,"FireAll COB_AddOptions
FireBest COB_DisableOptionsIfNeeded
FireAll COB_DisableIndividualOptions",,,
cob_confirmSel,DialogOptionSelected,$option == COB_confirmAction,"FireBest COB_PreActionDesc
Objectives doAction $cob_action
FireBest COB_PostActionDesc
FireAll COB_AddOptions
FireBest COB_DisableOptionsIfNeeded
FireAll COB_DisableIndividualOptions",,,
cob_confirmSelBreak,DialogOptionSelected,"$option == COB_confirmAction
$cob_action == salvage",Objectives doAction $cob_action,,,
,,,,,,
cob_controlDesc,COB_PreActionDesc,$cob_action == control,,"Your crews quickly complete a physical takeover of the structure, removing automated safeguards and installing black-box transmitters tuning its output frequency to your transponder codes.",,
cob_controlDesc2,COB_PreActionDesc,"$cob_action == control
$objectiveNonFunctional",,Your crews quickly complete an assessment of the structure. Replacing several common burned-out components seems to bring the $shortName back to operational status.,,
cob_snifferDesc,COB_PreActionDesc,"$cob_action == hack
$tag:comm_relay",,"A quick scan on the maintenance shortwave reveals several common vulnerabilities to choose from, and the sniffer script is uploaded within a few minutes.",,
cob_snifferDesc2,COB_PostActionDesc,"$cob_action == hack
$tag:comm_relay",,A soft chime from the comms console indicates the sniffer is installed and fully operational.,,
cob_snifferDesc3,COB_PostActionDesc,"$cob_action == unhack
$tag:comm_relay",,A soft chime from the comms console indicates the sniffer is offline.,,
cob_hackDesc,COB_PreActionDesc,$cob_action == hack,,"A quick scan on the maintenance shortwave reveals several common vulnerabilities to choose from. Your comms officers installs the data-collection script, and confirms receipt of telemetry from the $shortName.",,
,,,,,,
,,,,,,
# portside bar stuff,,,,,,
bar_optionSel,DialogOptionSelected,$option == marketVisitBar,"FireBest BarShuttleDownPrintDesc
FireBest BarPrintDesc
BarCMD showOptions",,,
bar_shuttleDescGeneric,BarShuttleDownPrintDesc,,,You take a shuttle down to the main concourse and quickly find a likely-looking establishment.,,
bar_descGeneric,BarPrintDesc,,ShowImageVisual space_bar,"As you enter the bar you are buffeted by the human white-noise of conversation and revelry. Ad-holos buzz softly from ceiling-mounted units, shining garish highlights through glasses and bottles as spacer crews mingle with merchants and locals trading drinks for rumour, jobs, and opportunities.",,
bar_descPirate,BarPrintDesc,$faction.id == pirates,ShowImageVisual pirate_bar,"The space is dark and filled with shouts, sweat, and pulsing music. Every wall and surface is pitted and stained by rough spacers banging their mugs and laughing as a couple of pirate crews posture for a fight. You can only assume that one of the heavily augmented bouncers will spoil the fun before weapons are drawn. Gangers and pirate captains watch the scene smugly from smoke-filled booths at the back.",,
bar_descHegemony,BarPrintDesc,$faction.id == hegemony,ShowImageVisual hegemony_bar,"You enter the crowded, well-lit space and take in the rows of taps adorning the wall under bottles from every one of the core worlds - and a few from elsewhere. Merchant-captains mingle with off-duty officers at the bar, served efficiently by the uniformed staff. In one corner, a pack of navy cadets shout and sing, desperately enjoying their last work-shift of freedom.",,
,,,,,,
# TriTach Loan Intel,,,,,,
ttli_greetingMain,PickGreeting,$ttli_isPlayerContact,"ShowPersonVisual
CallEvent $ttli_eventRef putValuesInMemory
FireBest PrintTTLIGreeting
FireAll PopulateTTLIOptions
FireAll AdjustTTLIOptions",,,
ttli_greetingSoon,PrintTTLIGreeting,,,"The Tri-Tachyon investor appears on your comm-screen and recognizes you immediatly.

""Why, hello again, $playerName,"" $heOrShe says. ""I trust your ventures have been profitable?""",,
ttli_greetingLater,PrintTTLIGreeting,$ttli_daysRemaining < 60,"SetTextHighlightColors hColor
SetTextHighlights $ttli_repaymentAmount","Your Tri-Tachyon creditor appears on the comms and speaks immediately. ""How lovely, you're still alive. I would be so pleased if you would transfer the $ttli_repaymentAmount we agreed upon as repayment.""
",,
ttli_greetingSoonMajor,PrintTTLIGreeting,$ttli_isMajorLoan score:100,,"The Tri-Tachyon investor appears on your comm-screen, hands folded, looking as if $heOrShe was expecting you.",,
ttli_greetingLaterMajor,PrintTTLIGreeting,"$ttli_isMajorLoan score:100
$ttli_daysRemaining < 60",,"The Tri-Tachyon investor appears on the comms, looking amused about something. $HeOrShe begins to say something, thinks better of it with a small laugh, and makes a small motion for you to speak up.",,
ttli_payLoanOpt,PopulateTTLIOptions,,,,0:ttli_payLoan:Transfer over $ttli_repaymentAmount to repay the loan,
ttli_extendLoanOpt,PopulateTTLIOptions,!$ttli_loanWasExtended,,,10:ttli_extendLoan:Calmly explain that you're going to need more time to repay the loan,
ttli_notPayingOpt,PopulateTTLIOptions,,,,20:ttli_notPaying:Tell $himOrHer that you're not going to pay back the credits you owe,
ttli_neverMindOpt,PopulateTTLIOptions,,,,"100:ttli_neverMind:""Sorry, wrong contact. I'll get back to you soon.""",
ttli_disablePayOpt,AdjustTTLIOptions,!CallEvent $ttli_eventRef canPay,"SetEnabled ttli_payLoan false
SetTooltip ttli_payLoan ""You don't have enough credits to pay back the loan.""",,,
ttli_payLoan,DialogOptionSelected,$option == ttli_payLoan,"CallEvent $ttli_eventRef payLoan
FireBest TTLIPayLoanResponse",,0:ttli_continue:Continue,
ttli_payLoanResp,TTLIPayLoanResponse,,,"""A pleasure doing business with you,"" $heOrShe says with a toothy smile, and signs off with no further smalltalk. You break the connection on the spinning Tri-Tachyon logo.",,
ttli_payLoanRespMajor,TTLIPayLoanResponse,$ttli_isMajorLoan,,"""We should do this again sometime,"" $heOrShe says, ""it was quite diverting."" And the connection is dead.",,
ttli_extendLoan,DialogOptionSelected,$option == ttli_extendLoan,"CallEvent $ttli_eventRef extendLoan
CallEvent $ttli_eventRef putValuesInMemory
FireBest TTLIExtendLoanText
CallEvent $ttli_eventRef applyExtendLoanRepLoss",,0:ttli_continue:Continue,
ttli_extendLoanText,TTLIExtendLoanText,,"SetTextHighlightColors hColor hColor
SetTextHighlights $ttli_extensionDays $ttli_repaymentAmount","$HeOrShe frowns in a passable emulation of human disappointment. ""I'm so sorry to hear that. But,"" $heOrShe smiles again, ""we can make an opportunity of this.""

Your payment deadline is extended by $ttli_extensionDays days and the owed amount increased to $ttli_repaymentAmount. The Tri-Tachyon ""investor"" explains also, before cutting the connection, that certain actions must be taken ""to emphasize how seriously I take our business relationship.""

You consider that you may have to watch your back from now on.",,
ttli_extendLoanTextMajor,TTLIExtendLoanText,$ttli_isMajorLoan,"SetTextHighlightColors hColor hColor
SetTextHighlights $ttli_extensionDays $ttli_repaymentAmount","$HeOrShe frowns perfectly, then looks off to the side, talking as if to $himOrHerself, ""Perhaps the motivation has been insufficient. How shall we solve this?"" The investor continues, saying that $heOrShe anticipated this situation and magnanimously explains that your payment deadline is extended by $ttli_extensionDays days and the owed amount increased to $ttli_repaymentAmount. ""By the way, additional incentives shall be entertained,"" $heOrShe says with a strange smile before closing the link.

You consider that you may have to watch your back.",,
ttli_notPaying,DialogOptionSelected,$option == ttli_notPaying,"FireBest TTLINotPayingText
CallEvent $ttli_eventRef notPaying",,0:ttli_continue:Continue,
ttli_notPayingText,TTLINotPayingText,,,"$HisOrHer face transforms immediately to an emotionless mask. ""I see. How unfortunate."" $HeOrShe looks thoughtful for a moment, and continues, ""I won't waste time enumerating the reprisals you shall face."" With a cold smile, $heOrShe says ""It's just good business.""

The comm-link snaps dead.",,
ttli_notPayingTextMajor,TTLINotPayingText,$ttli_isMajorLoan,,"$HeOrShe tilts $hisOrHer head only slightly, a slight wrinkle appearing on $hisOrHer brow. ""Goodbye,"" $heOrShe says. The comm-link snaps dead.",,
ttli_endContinue,DialogOptionSelected,$option == ttli_continue,"ShowDefaultVisual
EndConversation",,,
ttli_endNeverMind,DialogOptionSelected,$option == ttli_neverMind,"ShowDefaultVisual
EndConversation","You hurriedly cut the comm link, feeling no small amount of embarrassment.",,
"# TriTach loan, recorded message on next market visit",,,,,,
ttli_noRepaymentNextMarketOpen,MarketPostOpen,$global.ttli_unpaidEventRef != null score:1000,,"As your $shipOrFleet links up with the local comm-net, you get an alert indicating a priority message has been delivered to your queue.",0:ttli_continue2:View the recorded message,
ttli_noRepaymentMessage,DialogOptionSelected,$option == ttli_continue2,"CallEvent $global.ttli_unpaidEventRef noPaymentMessage
AddText ""You see the Tri-Tachyon investor, $hisOrHer face an emotionless mask. \""How unfortunate.\"" $HeOrShe looks thoughtful for a moment, and continues, \""I won't waste time enumerating the reprisals you shall face.\"" The recording cuts off.""",,0:ttli_continue3:Continue,
ttli_noRepaymentMessageMajor,DialogOptionSelected,"CallEvent $global.ttli_unpaidEventRef isMajorLoan
$option == ttli_continue2","CallEvent $global.ttli_unpaidEventRef noPaymentMessage
AddText ""You recall the name immediately, as well as the ageless face of the Tri-Tachyon investor that appears on your screen. \""I'm disappointed\"" is all $heOrShe says before the recording ends.""",,0:ttli_continue3:Continue,
ttli_noRepaymentMessageEnd,DialogOptionSelected,$option == ttli_continue3,"unset $global.ttli_unpaidEventRef
ShowDefaultVisual
EndConversation",,,
,,,,,,
# TriTach loan bounty hunter,,,,,,
ttli_bountyHunterHail,BeginFleetEncounter,"$ttli_bountyHunter score:1000
!$ignorePlayerCommRequests","AddText ""You're being hailed by the $faction $otherShipOrFleet."" $faction.baseColor
$hailing = true 0",,,
ttli_bountyHunterText,OpenCommLink,"$entity.ttli_bountyHunter score:1000
!$entity.ignorePlayerCommRequests",$entity.ignorePlayerCommRequests = true,"""You-know-who sends $entity.ttli_hisOrHer regards,"" the bounty hunter snarls.

The comm link goes dead in a crackle of static.",cutCommLinkNoText:Continue,
,,,,,,
"# scientist/AI core bar event, cache interaction",,,,,,
saic_openDialog,BeginSalvage,$saic_eventRef != null score:1000,"CallEvent $saic_eventRef putValuesInMemory
FireBest SAICPrintInitialText
ShowDefaultVisual
SetShortcut saic_leave ""ESCAPE""",,"saic_giveCore:Place the Tri-Tachyon case into the shielded crate and send it off as soon as possible
saic_takeCore:Take the AI core for yourself
saic_leave:Leave",
saic_initialText,SAICPrintInitialText,,,"Your $shipOrFleet arrives at the coordinates provided by the scientist $saic_marketOnOrAt $saic_marketName, and just as $saic_heOrShe said, there is an impressive bounty of Domain-era goods and technology in nearly pristine condition. And in the middle of it all your salvage crew reports a small, locked case bearing a Tri-Tachyon logo. It's emitting a bizarre, dynamic magnetic field within a radius of about two meters.

It's amazing that no one found this cache before, but then the long-range sensors did read it as a worthless debris cloud at first. The question is now, do you close the AI core into the shielded crate and send it off from your next port stop, or do you keep it for yourself? That scientist was surely no one important.",,
saic_leaveSel,DialogOptionSelected,$option == saic_leave,DismissDialog,,,
saic_giveCoreSel,DialogOptionSelected,$option == saic_giveCore,,"The shielded crate shuts with the sound of powered bolts sliding home. It sends off a one-time coded hyperwave burst. Confirmation, you suppose. It would have been good of that scientist to warn you about this little trick; hopefully no pirates - or anything else - was listening nearby.",saic_continueGiveCore:Loot the rest of the cache,
saic_takeCoreSel,DialogOptionSelected,$option == saic_takeCore,,"You open the Tri-Tachyon case and retrieve a single Alpha Core. It pulses with activity, and your smile is underlit by the cold, alien thoughts of the core. You order the scientist's shielded crate tossed out the airlock. If you want something done in this world, you'd best do it yourself.",saic_continueTakeCore:Loot the rest of the cache,
saic_continueLootGiveCore,DialogOptionSelected,$option == saic_continueGiveCore,CallEvent $saic_eventRef genLootNoCore,,,
saic_continueLootTakeCore,DialogOptionSelected,$option == saic_continueTakeCore,CallEvent $saic_eventRef genLootWithCore,,,
,,,,,,
# cryosleeper interaction after defeating guardian,,,,,,
cryo_infoText,BeginSalvage,$customType == derelict_cryosleeper score:1000,"SetShortcut defaultLeave ESCAPE
$usable = true","The long-haul cryosystems were built to last for centuries of intersteller travel so it's no surprise that most of the pod-support machinery reads as functional. While safe sleeper revivial is beyond the capability of your fleet, a colony established in this system could benefit from a huge influx in population if it built facilities to awaken long-haul sleepers.

Your executive officer cautions that it's unknown whether having sleepers make up a large percentage of a colony's population would cause any physical or psychological issues down the line.",100:defaultLeave:Leave,
,,,,,,
,,,,,,
"# arrived at market, debt, check whether some crew leaves",,,,,,
debt_effectCheck,MarketPostDock,"$tradeMode != NONE
MarketCMD checkDebtEffect score:1000",MarketCMD applyDebtEffect,,,
debt_effectContinue,DialogOptionSelected,$option == marketCmd_checkDebtContinue,"ShowDefaultVisual
FireBest MarketPostDock",,,
,,,,,,
"# delivery mission, arrived at market",,,,,,
delivery_checkCompletion,MarketPostDock,"$tradeMode != NONE
DeliveryMission checkCompletion score:100",DeliveryMission completeMissions,,,
delivery_completedButNoDocking,MarketPostDock,"!$delivery_noCompleteShown
$tradeMode == NONE
DeliveryMission checkCompletion score:100","$delivery_noCompleteShown = true 0
FireBest MarketPostDock",You're unable to complete your delivery contract at this time.,,
,,,,,,
# failed delivery bounty hunter,,,,,,
dmi_bountyHunterHail,BeginFleetEncounter,"$dmi_bountyHunter score:1000
!$ignorePlayerCommRequests","AddText ""You're being hailed by the $faction $otherShipOrFleet."" $faction.baseColor
$hailing = true 0",,,
dmi_bountyHunterText,OpenCommLink,"$entity.dmi_bountyHunter score:1000
!$entity.ignorePlayerCommRequests",$entity.ignorePlayerCommRequests = true,"""$entity.dmi_name sends $entity.dmi_hisOrHer regards,"" the $entity.dmi_hunter snarls. ""If you don't remember $entity.dmi_himOrHer, perhaps you remember a shipment of $entity.dmi_commodity that you were entrusted with.""

The comm link goes dead in a crackle of static.",cutCommLinkNoText:Continue,
,,,,,,
# red planet story event - talk to pilot,,,,,,
psi_pilotGreeting,PickGreeting,$psi_isPilot,"ShowPersonVisual
CallEvent $psi_eventRef prepare
$talkedTo = true","$personName looks you over. You look back, and even via the comms it looks like $personFirstName has had higher-quality repair work done than their spacer crew comrade. $HeOrShe almost looks natural. ""So,"" $heOrShe says, ""You know the story."" $HeOrShe sighs, and says aside ""If only that old crust of a spacer would keep their mouth shut... ""

""Still, it's no sweat off my back where you go finding trouble. And you wouldn't be the first who's come sniffing after me, I'll warn you of that for free. How much is the location of this planet worth to you?""","0:psi_barter:Barter with $personName then consider the price
1:cutCommLink:""Forget it."" Cut the comm-line",
psi_pilotGreetingTalkedTo,PickGreeting,"$psi_isPilot
$talkedTo","ShowPersonVisual
CallEvent $psi_eventRef prepare","""So. You're back. Ready to talk credits?""","0:psi_barter:Barter with $personName, then consider the price
1:cutCommLink:""Forget it."" Cut the comm-line",
psi_pilotBarter,DialogOptionSelected,$option == psi_barter,"SetTextHighlights $psi_credits
FireBest PSIDisablePayOptionIfNeeded","You haggle with $himOrHer over price, making the point that there is - allegedly - some hostile force at this red planet, and further, $heOrShe has already sold the information to someone else. ""Yes, yes,"" $heOrShe says, ""But I know you space-captains. You just love a mystery. You'll never let it lie. Like we should have."" 

Eventually you work out a figure of $psi_credits for the pilot's information.","0:psi_pay:Pay $psi_credits for the location of the mysterious red planet
1:cutCommLink:Decline the offer",
psi_disableIfCanNotPay,PSIDisablePayOptionIfNeeded,!CallEvent $psi_eventRef canPay,"SetEnabled psi_pay false
SetTextHighlightColors bad
SetTextHighlights $psi_credits
AddText ""Unfortunately, you've only got $psi_playerCredits on hand.""
SetTextHighlights $psi_playerCredits",,,
psi_payPilot,DialogOptionSelected,$option == psi_pay,"CallEvent $psi_eventRef payPilot
ShowDefaultVisual
EndConversation","You initiate the credits transfer and receive the coordinates in response. ""Nice knowing you.""

$personName doesn't give you time to respond before ending the transmission. ",,
,,,,,,
# red planet interaction,,,,,,
psi_redPlanetOpenDialog,OpenInteractionDialog,$psi_planet score:1000,"SalvageGenFromSeed
ShowDefaultVisual
FireBest SalvageCheckHostile","Your $shipOrFleet approaches $entityName.

The sensors are having a hard time evaluating the tenuous megastructure enveloping its entire surface. Your sensors officer takes the initiative and applies some exotic parameters to the interferometer feed; inputs go green and a few seconds later the sub-AI tentatively identifies a stable planetary-scale energy field with highly unusual properties.",,
psi_defenderDesc,TriggerAutomatedDefenses,$psi_planet score:1000,SalvageDefenderInteraction,"As your $shipOrFleet moves in closer, sensors detect multiple contacts rising up from the murky red depths.",,
psi_continuePostDefenders,BeatDefendersContinue,$psi_planet score:1000,,Your $shipOrFleet finishes its approach to $entityName without further incident.,0:salBeatDefendersContinue:Continue,
psi_beatDefenders,BeginSalvage,$psi_planet score:1000,SetShortcut defaultLeave ESCAPE,"Further scans reveal that the energy field is not entirely uniform - perhaps owing to a running-down power source - and your bridge crew is able to pick up a distress beacon transmitting from the surface.

The transmission is set on repeat and garbled in ways that are indicative of aging equipment. You make out enough to gather that part of a research team was stranded here - at a secret Tri-Tachyon research facility - after the fully automated defenses over-weighed certain executive security contingency orders in the wake of one of the AI Wars and decided it was now imperative to shoot down any craft attempting to leave the planet.","0:psi_explore:Send a salvage team down to the facility
100:defaultLeave:Leave",
psi_exploreFacility,DialogOptionSelected,$option == psi_explore,,"A tiny shuttle with a jury-rigged shield generator darts through a spot failure in the shield. A landing at the primary control center is achieved without incident and the crew is able to deactivate the shield entirely upon breaching the facility. Follow-up shuttles with heavier equipment launch quickly thereafter, and soon the salvage operation is in full swing.",0:psi_salvage:Pick through the salvage,
psi_salvage,DialogOptionSelected,$option == psi_salvage,RedPlanet genLoot,,,
,,,,,,
# salvage operations on planets with ruins,,,,,,
salRuins_scattered,PopulateOptions,"$market.isSurveyed
$market.isPlanetConditionMarketOnly
$market.mc:ruins_scattered
!$market.ruinsExplored","$salvageSpecId = ruins_scattered
FireBest DisableRuinsExploreIfNeeded","Scattered, broken domes dot the planet's surface, perchance holding lost caches of valuable materials.",5:salExplore:Explore the ruins,
salRuins_widespread,PopulateOptions,"$market.isSurveyed
$market.isPlanetConditionMarketOnly
$market.mc:ruins_widespread
!$market.ruinsExplored","$salvageSpecId = ruins_widespread
FireBest DisableRuinsExploreIfNeeded","Widespread ruins, blips from radiation sources, and the distinctive burred radar-ping of foamed cerametal structures can be found across $market, evidence of a small but concerted colonization effort dating to the late expansion period of the Domain.",5:salExplore:Explore the ruins,
salRuins_extensive,PopulateOptions,"$market.isSurveyed
$market.isPlanetConditionMarketOnly
$market.mc:ruins_extensive
!$market.ruinsExplored","$salvageSpecId = ruins_extensive
FireBest DisableRuinsExploreIfNeeded","Ruined cities can be found across the surface of $market, spilling from their broken hearts pitted roadways and crumbling magrail lines to the skeletons of factories, aquaponics domes, and comm-towers.",5:salExplore:Explore the ruins,
salRuins_vast,PopulateOptions,"$market.isSurveyed
$market.isPlanetConditionMarketOnly
$market.mc:ruins_vast
!$market.ruinsExplored","$salvageSpecId = ruins_vast
FireBest DisableRuinsExploreIfNeeded","$market is covered in vast ruins; cities, factories, mines, farms, homes. The dead are in dread abundance, entwined with salvageable materials, goods, tools, and weapons. This world is a tomb for the hubris of the Domain's project of galactic colonization and hegemony. ",5:salExplore:Explore the ruins,
salRuins_alreadyExplored,PopulateOptions,"$market.hasRuins
$market.ruinsExplored
$market.isPlanetConditionMarketOnly",,"The ruins on the surface of $market have been stripped of anything easily accessible, and further exploitation requires a permanent presence.",,
salRuins_hostileNearby,DisableRuinsExploreIfNeeded,HostileFleetNearbyAndAware,SetEnabled salExplore false,"A nearby hostile fleet is tracking your movements, making exploration of the planet impossible.",,
salRuins_noHostileNearby,DisableRuinsExploreIfNeeded,!HostileFleetNearbyAndAware,"SalvageGenFromSeed
$leaveGoesToMenu = true 0
$doNotDismissDialogAfterSalvage = true 0
$salvageLeaveText = ""Go back""","While long-term exploitation of the resources in these ruins requires a colony, a salvage team can conduct a search for anything of immediate value.",,
,,,,,,
salRuins_leaveToMenu,DialogOptionSelected,"$option == defaultLeave score:1000
$leaveGoesToMenu","unset $leaveGoesToMenu
FireAll PopulateOptions",,,
salRuins_postSalvagePerform,PostSalvagePerform,$market.hasRuins score:1000,"$market.ruinsExplored = true
UpdateMemory
FireAll PopulateOptions",,,